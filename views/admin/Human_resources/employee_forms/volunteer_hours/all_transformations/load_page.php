<?php $arr_select_lable = array(0 => 'مقدم الطلب ',    1 => 'المدير المباشر ',    2 => ' مسؤول التطوع '); ?><?phpif (isset($records) && !empty($records)) {    $mostafed_type_arr = array(0 => 'داخلى', 1 => 'خارجى');    /*echo '<pre>';    print_r($records);    echo "</pre>";*/    ?>    <table id="volunteer_hours_table" class="table table-bordered table-striped table-hover">        <thead>        <tr class="info">            <th>م</th>            <th>إسم الموظف</th>            <th>نوع المستفيد</th>            <th>الجهة/الإدارة</th>            <?php if ($valu != 3) { ?>                <th>الطلب الان عند</th>            <?php } ?>            <th>الاجراء</th>        </tr>        </thead>        <tbody>        <?php if (isset($records) && !empty($records)) {            $y = 0;            foreach ($records as $row) {                $y++;                ?>                <tr id="row<?php echo $row->id; ?>" class="granteed">                    <td><?php echo $y; ?></td>                    <td><?php echo $row->employee; ?></td>                    <td><?php echo $mostafed_type_arr[$row->mostafed_type_fk]; ?></td>                    <td><?php echo$row->edara_geha; ?></td>                    <?php if ($valu != 3) { ?>                        <td>                            <?php                            if (key_exists($row->level,$arr_select_lable)){                                echo $arr_select_lable[$row->level];                            }                            ?>                        </td>                    <?php } ?>                    <td>                        <a data-toggle="modal" data-target="#details_Modal" class="btn btn-xs btn-info"                           style="padding:1px 5px;" onclick="load_page(<?= $row->id ?>);">                            <i class="fa fa-list "></i> </a>                        <?php if ($valu == 3 && $row->level == 0 && $row->suspend != 4) { ?>                            <!--<button class="btn btn-primary btn-xs" data-target="" data-toggle="modal"                                    onclick="send_order_to_moder_final(<?php echo $row->id; ?>);"> تحويل مدير الشؤون المالية والادارية                             </button>-->                            <?php                        }                        if ($row->level != 0) { ?>                            <a class="btn btn-primary btn-xs"                               onclick="load_details_steps(<?php echo $row->id; ?>);"                               data-target="#detailssteps" data-toggle="modal">                                <i class="fa fa-list"></i> التحويلات السابقة </a>                        <?php } ?>                        <?php if ($row->suspend == 2) { ?>                            <button type="button" class="btn  btn-xs btn-danger ">                                تم رفض الطلب                            </button>                        <?php } ?>                        <?php                        if ($row->suspend == 4) {                            ?>                            <button type="button" class="btn btn-xs btn-success ">                                تم قبول الطلب                            </button>                        <?php } ?>                        <?php                        if ($row->suspend == 5) {                            ?>                            <button type="button" class="btn btn-xs btn-danger ">                                تم رفض الطلب                            </button>                        <?php } ?>                        <?php                        if ($valu == 2) {                            ?>                            <button type="button" class="btn btn-xs  btn-success"                                    onclick="follow(<?php echo $row->id; ?>);"                                    data-target="#follow_model" data-toggle="modal">>متابعه الطلب                            </button>                        <?php } ?>   <?php                        if ($valu == 3 && (in_array($row->level, array(1, 2)))) {                            ?>                            <button class="btn btn-success btn-xs" data-target="#detailsModal2" data-toggle="modal"                                    onclick="show_modal(<?php echo $row->level; ?>,<?php echo $row->id; ?>);"> الاجراء                            </button>                        <?php } ?>                    </td>                </tr>            <?php }        } ?>        </tbody>    </table><?php } else { ?>    <div class="alert alert-danger">عفوا !... لايوجد نتائج</div><?php } ?><!-- detailsModal --><div class="modal fade" id="detailsModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 80%;">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" onclick="$('#detailsModal2').modal('hide')" aria-label="Close">                    <span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="detailsModal2_header" style="text-align: center;">                    <?php if (key_exists($row->level + 1, $arr_select_lable)) {                        echo $arr_select_lable[$row->level + 1];                    } else {                        echo "تحويل الطلب";                    } ?></h4>            </div>            <div class="modal-body" style="padding: 10px 0" id="result2">            </div>            <div class="modal-footer" style="display: inline-block;width: 100%;">                <button type="button" onclick="make_suspend();" class="btn btn-labeled btn-success " name="" value=""                        id=""                        style="background-color: #3c990b;border-color: #12891b;padding-top: 0;padding-bottom: 0;border-radius:2px; ">                    <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                </button>                <button type="button" class="btn btn-labeled btn-danger " onclick="$('#detailsModal2').modal('hide')">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><!-- detailsModal    details_Modal --><div class="modal fade" id="details_Modal" tabindex="-1" role="dialog"     aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 80%">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" onclick="$('#details_Modal').modal('hide')" aria-label="Close">                    <span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" style="text-align: center;">التفاصيل </h4>            </div>            <div class="modal-body" id="result_page">            </div>            <div class="modal-footer" style="display: inline-block;width: 100%">                <!--<button                        type="button" onclick="Print_details(document.getElementById('volunter_id').value)"                        class="btn btn-labeled btn-purple ">                    <span class="btn-label"><i class="glyphicon glyphicon-print"></i></span>طباعة                </button>-->                <button type="button" class="btn btn-labeled btn-danger " onclick="$('#details_Modal').modal('hide')">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><div class="modal fade" id="detailssteps" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 95%;">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" onclick="$('#detailssteps').modal('hide')"                        aria-label="Close">                    <span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" style="text-align: center;"></h4>            </div>            <div class="modal-body" style="padding: 10px 0" id="details_steps">            </div>            <div class="modal-footer" style="display: inline-block;width: 100%;">                <button type="button" class="btn btn-labeled btn-danger "                        onclick="$('#detailssteps').modal('hide')">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><!-------------------------------------------end----------------><!----------------------------------------start follow--------------------------------------><div class="modal fade" id="follow_model" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 95%;">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" onclick="$('#follow').modal('hide')" aria-label="Close">                    <span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" style="text-align: center;"> متابعه الطلب</h4>            </div>            <div class="modal-body" style="padding: 10px 0" id="follow">            </div>            <div class="modal-footer" style="display: inline-block;width: 100%;">                <button type="button" class="btn btn-labeled btn-danger " onclick="$('#follow').modal('hide')">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><!----------------------------------------end_follow--------------------------------------><!--<script src="https://cdn.jsdelivr.net/npm/sweetalert2"></script>--><script>    function show_modal(valu, val_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/Volunteer_hours/get_modal",            data: {level: valu, val_id: val_id},            beforeSend: function () {                $('#result2').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#result2').html(d);            }        });    }</script><script>    function load_page(row_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/Volunteer_hours/load_details",            data: {row_id: row_id},            beforeSend: function () {                $('#result_page').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#result_page').html(d);            }        });    }</script><script>    function load_details_steps(valu) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/Volunteer_hours/get_modal_details_steps",            data: {valu: valu},            beforeSend: function () {                $('#details_steps').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#details_steps').html(d);            }        });    }</script><script>    function follow( id) {        // alert(valu);  get_follow        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/Volunteer_hours/get_follow",            data: { id: id},            beforeSend: function () {                $('#follow').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#follow').html(d);            }        });    }</script><script>    $('#volunteer_hours_table').DataTable({        dom: 'Bfrtip',        buttons: [            'pageLength',            'copy',            'csv',            'excelHtml5',            {                extend: "pdfHtml5",                orientation: 'landscape'            },            {                extend: 'print',                exportOptions: {columns: ':visible'},                orientation: 'landscape'            },            'colvis'        ],        colReorder: true,        destroy: true    });</script>