<?php//echo'<pre>';//print_r($mosayer_data);if (isset($mosayer_sysat) and $mosayer_sysat != null) {    if ($mosayer_sysat->rateb_asasy == 'yes') {        $rateb_asasy = $mosayer_data->rateb_asasy;    } else {        $rateb_asasy = 0;    }    if ($mosayer_sysat->badal_sakn == 'yes') {        $badal_sakn = $mosayer_data->badal_sakn;    } else {        $badal_sakn = 0;    }    if ($mosayer_sysat->badal_mowaslat == 'yes') {        $badal_mowaslat = $mosayer_data->badal_mowaslat;    } else {        $badal_mowaslat = 0;    }    if ($mosayer_sysat->badal_etsal == 'yes') {        $badal_etsal = $mosayer_data->badal_etsal;    } else {        $badal_etsal = 0;    }    if ($mosayer_sysat->badal_e3asha == 'yes') {        $badal_e3asha = $mosayer_data->badal_e3asha;    } else {        $badal_e3asha = 0;    }    if ($mosayer_sysat->badal_tabe3a_amal == 'yes') {        $badal_tabe3a_amal = $mosayer_data->badal_tabe3a_amal;    } else {        $badal_tabe3a_amal = 0;    }    if ($mosayer_sysat->badal_edafi == 'yes') {        $badal_edafi = $mosayer_data->badal_edafi;    } else {        $badal_edafi = 0;    }    if ($mosayer_sysat->badal_taklef == 'yes') {        $badal_taklef = $mosayer_data->badal_taklef;    } else {        $badal_taklef = 0;    }    $total_badalat = $rateb_asasy + $badal_sakn + $badal_mowaslat + $badal_etsal + $badal_e3asha + $badal_tabe3a_amal + $badal_edafi + $badal_taklef;} else {    $total_badalat = ($mosayer_data->rateb_asasy + $mosayer_data->badal_sakn + $mosayer_data->badal_mowaslat + $mosayer_data->badal_etsal + $mosayer_data->badal_e3asha + $mosayer_data->badal_tabe3a_amal + $mosayer_data->tot_edafi + $mosayer_data->badal_taklef);}  //echo round(($mosayer_data->rateb_asasy/$mosayer_data->ayam_amal/$mosayer_data->sa3at_amal),2)?><div class="col-md-12">    <?php echo form_open(base_url() . 'human_resources/employee_forms/Employee_salaries/save_egrat', array('id' => 'pop_form')) ?>    <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">        <input type="hidden" value="<?= $mosayer_data->ayam_amal ?>" id="ayam_amal">        <input type="hidden" value="<?php        echo round(($mosayer_data->rateb_asasy/$mosayer_data->ayam_amal/$mosayer_data->sa3at_amal),3)         ?>" id="agr_sa3a"><!--20-9-20-om-->        <input type="hidden" value="<?= $mosayer_data->sa3at_amal ?>" id="sa3at_amal">        <input type="hidden" value="<?= $mosayer_data->emp_id ?>" name="emp_id">        <input type="hidden" value="<?= $mosayer_data->rateb_asasy ?>" id="rateb_asasy">        <input type="hidden" value="<?= $mosayer_data->mosayer_rkm_fk ?>" name="mosayer_rkm_fk">        <input type="hidden" value="<?= $mosayer_data->mosayer_rkm_fk ?>" name="add">       <!-- <input type="hidden" name="total_bdlat" id="total_bdlat"               value="<?= ($mosayer_data->rateb_asasy + $mosayer_data->badal_sakn + $mosayer_data->badal_mowaslat + $mosayer_data->badal_etsal + $mosayer_data->badal_e3asha + $mosayer_data->badal_tabe3a_amal + $mosayer_data->tot_edafi + $mosayer_data->badal_taklef) ?>">        -->      <input type="hidden" name="total_bdlat" id="total_bdlat" value="<?= $total_badalat ?>" />        <label class="label ">تاريخ الاجراء</label>        <input type="date" name="egraa_date" id="egraa_date" class="form-control"               value="<?= date('Y-m-d') ?>">    </div>    <div class="form-group col-md-4 col-sm-6 col-xs-6 padding-4">        <label class="label ">اسم الموظف</label>        <input name="emp_name" id="emp_name" class="form-control" readonly               value="<?php if (!empty($mosayer_data->emp_name)) {                   echo $mosayer_data->emp_name;               } ?>">    </div>    <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">        <label class="label "> الرقم الوظيفي</label>        <input name="emp_code" id="emp_code" class="form-control"               value="<?php if (!empty($mosayer_data->emp_code)) {                   echo $mosayer_data->emp_code;               } ?>" readonly>    </div>    <div class="form-group col-md-4 col-sm-6 col-xs-6 padding-4">        <label class="label "> المسمى الوظيفي</label>        <input name="mosma_wazefy_n" id="mosma_wazefy_n" class="form-control"               value="<?php if (!empty($mosayer_data->mosma_wazefy_n)) {                   echo $mosayer_data->mosma_wazefy_n;               } ?>" readonly>    </div>    <?php switch ($code) {        // oninput="$('#new_value').val(($('#total_bdlat').val() * this.value)/$('#ayam_amal').val() )"        case 901:            $badal_text = 'غياب' ?>            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">عدد الايام</label>                <input name="num" id="num" class="form-control"                       oninput="$('#new_value').val(Math.round(($('#total_bdlat').val() * this.value)/$('#ayam_amal').val() ))"                       data-validation="required" value="">            </div>            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">الاجمالي </label>                <input name="new_value" id="new_value" class="form-control" value="" readonly>            </div>            <?php break;        //          oninput="$('#new_value').val(($('#total_bdlat').val() * this.value)/$('#ayam_amal').val() )"        case 902:            $badal_text = 'إجازة بدون راتب'; ?>            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">عدد الايام</label>                <input name="num" id="num" class="form-control"                       oninput="$('#new_value').val(Math.round(($('#total_bdlat').val() * this.value)/$('#ayam_amal').val()) )"                       data-validation="required" value="">            </div>            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">الاجمالي </label>                <input name="new_value" id="new_value" class="form-control" value="" readonly>            </div>            <?php            break;        //oninput="$('#new_value').val(($('#rateb_asasy').val() * this.value)/($('#ayam_amal').val()*$('#sa3at_amal').val() * 60) )"        case 903:            $badal_text = 'تأخير'; ?>            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">عدد الدقايق</label>                <input name="num" id="num" class="form-control"                       oninput="$('#new_value').val(Math.round(($('#rateb_asasy').val() * this.value)/($('#ayam_amal').val()*$('#sa3at_amal').val() * 60)) )"                       data-validation="required" value="">            </div>            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">الاجمالي </label>                <input name="new_value" id="new_value" class="form-control" value="" readonly>            </div>            <?php            break;        case 904:            $badal_text = 'جزاءات'; ?>            <input type="hidden" value="0" name="num">            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">قيمة الجزاء </label>                <input name="new_value" id="new_value" data-validation="required" class="form-control" value="">            </div>            <?php            break;        case 905:            $badal_text = 'مكافآت'; ?>            <input type="hidden" value="0" name="num">            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">قيمة المكافئة </label>                <input name="new_value" id="new_value" data-validation="required" class="form-control" value="">            </div>            <?php            break;        case 906:            $badal_text = 'اخرى'; ?>            <input type="hidden" value="0" name="num">            <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">اخرى </label>                <input name="new_value" id="new_value" data-validation="required" class="form-control" value="">            </div>            <?php            break;        //oninput="$('#new_value').val(($('#rateb_asasy').val() * this.value)/($('#ayam_amal').val()*$('#sa3at_amal').val() * 60) )"        case 107:            $badal_text = 'عمل اضافي'; ?>                <?php            $in_dwam=1.5;            $out_dwam=2;            if (isset($sysat_setting)&&($sysat_setting)){            $in_dwam=$sysat_setting->hours_out_work_days;            $out_dwam=$sysat_setting->hours_out_vacation_days;        } ?>                        <input type="hidden" value="<?= $code ?>" name="badal_code">            <input type="hidden" value="<?= $badal_text ?>" name="badal_n">            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">عدد الساعات</label>                <input name="num" id="num" class="form-control"                       oninput="$('#new_value').val(Math.round(($('#agr_sa3a').val() * parseFloat($('#dwam_f2a').val())* parseFloat(this.value))))"                       data-validation="required" value="">            </div>   <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">    <label class="label "> فئة الدوام </label>    <select id="dwam_f2a" class="form-control" style="color: red;"            onchange="$('#new_value').val(Math.round(($('#agr_sa3a').val() * parseFloat($('#num').val())* parseFloat(this.value))));                                            if (parseFloat(this.value) > 1){                                                 $('#dwam_f2a_input').val(1);                                            }else{                                                 $('#dwam_f2a_input').val(2);   }"            data-validation="required">      <option value=""> من فضلك قم بالإختيار</option>        <option value="<?=$in_dwam?>">  خلال ايام العمل الرسمية</option>        <option value="<?=$out_dwam?>"> خلال الأجازات والعطلات الرسمية</option>    </select>    <input type="hidden" name="dwam_f2a" id="dwam_f2a_input"></div>            <!--<div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label "> فئة الدوام </label>                <select id="dwam_f2a" class="form-control"                        onchange="$('#new_value').val(Math.round(($('#agr_sa3a').val() * parseFloat($('#num').val())* parseFloat(this.value))));if (parseFloat(this.value) > 1){ $('#dwam_f2a_input').val(1);}else{$('#dwam_f2a_input').val(2);   }"                        data-validation="required">                    <option value="1"> داخل الدوام</option>                    <option value="1.5"> خارج الدوام</option>                </select>                <input type="hidden" name="dwam_f2a" id="dwam_f2a_input">            </div>-->            <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                <label class="label ">الاجمالي </label>                <input name="new_value" id="new_value" class="form-control" value="" readonly>            </div>            <?php            break;        default:            break;    } ?>    <div class="form-group col-md-4 col-sm-6 col-xs-6 padding-4">        <label class="label ">السبب</label>        <textarea name="reason" id="reason" class="form-control"></textarea>    </div>    <?php echo form_close(); ?></div><div class="col-md-12">    <?php if (isset($mosayer_egraat_data) && (!empty($mosayer_egraat_data))) { ?>        <table id="table_data" class="table table-responsive table-striped">            <thead>            <?php if ($code == 107) {                $badal_text =  '  ساعات  '.$badal_text ;            } else {                $badal_text =  ' أيام ' .$badal_text ;            }            ?>            <tr>                <th>م</th>                <th>تاريخ الاجراء</th>                <th>اسم البدل</th>                <th> عدد <?= $badal_text ?></th>                <?php if ($code == 107) { ?>                    <th>فئة الدوام</th>                    <?php                }                ?>                <th>اجمالي</th>                <th>الاجراء</th>            </tr>            </thead>            <tbody>            <?php $x = 1;            foreach ($mosayer_egraat_data as $egraat_datum) {                ?>                <tr>                    <td><?= $x++; ?></td>                    <td><?= $egraat_datum->egraa_date ?></td>                    <td><?= $egraat_datum->badal_n ?></td>                    <td><?= $egraat_datum->num ?></td>                    <?php if ($code == 107) { ?>                        <td><?php $dwam_f2a_arr =array('1'=>"داخل الدوام",'2'=>"خارج الدوام");                            if ( key_exists($egraat_datum->dwam_f2a,$dwam_f2a_arr)){                            echo $dwam_f2a_arr[$egraat_datum->dwam_f2a];                        } ?></td>                        <?php                    }                    ?>                    <td><?= $egraat_datum->new_value ?></td>                    <td id="td_<?= $egraat_datum->id ?>"><a onclick=' swal({                                title: "هل انت متأكد من الحذف ؟",                                text: "",                                type: "warning",                                showCancelButton: true,                                confirmButtonClass: "btn-danger",                                confirmButtonText: "حذف",                                cancelButtonText: "إلغاء",                                closeOnConfirm: false                                },                                function(){ delete_egraa(<?= $egraat_datum->id ?>,"td_<?= $egraat_datum->id ?>"); });'>                            <i class="fa fa-trash"> </i></a></td>                </tr>            <?php } ?>            </tbody>        </table>        <script>            $('#table_data').DataTable({                dom: 'Bfrtip',                buttons: [                    'pageLength',                    'copy',                    'csv',                    'excelHtml5',                    {                        extend: "pdfHtml5",                        orientation: 'landscape'                    },                    {                        extend: 'print',                        exportOptions: {columns: ':visible'},                        orientation: 'landscape'                    },                    'colvis'                ],                colReorder: true,                destroy: true            });        </script>    <?php }    ?></div>