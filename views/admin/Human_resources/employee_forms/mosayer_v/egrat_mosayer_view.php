<style type="text/css">    .print_forma {        /*border:1px solid #73b300;*/        padding: 15px;    }    .piece-box {        margin-bottom: 12px;        border: 1px solid #73b300;        display: inline-block;        width: 100%;    }    .piece-heading {        background-color: #9bbb59;        display: inline-block;        float: right;        width: 100%;    }    .piece-body {        width: 100%;        float: right;    }    .bordered-bottom {        border-bottom: 4px solid #9bbb59 !important;    }    .piece-footer {        display: inline-block;        float: right;        width: 100%;        border-top: 1px solid #73b300;    }    .piece-heading h5 {        margin: 4px 0;    }    .piece-box table {        margin-bottom: 0    }    .piece-box table th,    .piece-box table td {        padding: 2px 2px !important;    }    h6 {        font-size: 16px;        margin-bottom: 3px;        margin-top: 3px;    }    .print_forma table th {        text-align: right;    }    .print_forma table tr th {        vertical-align: middle;    }    .no-padding {        padding: 0;    }    .header p {        margin: 0;    }    .header img {        height: 70px;        width: 80px;        margin: auto;    }    .main-title {        /* display: table; */        text-align: center;        /* position: relative; */        height: 120px;        /* width: 40%; */    }    .main-title h4 {        /* display: table-cell; */        /* vertical-align: bottom; */        text-align: center;        width: 100%;        margin: 0    }    .print_forma hr {        border-top: 1px solid #73b300;        margin-top: 7px;        margin-bottom: 7px;    }    .no-border {        border: 0 !important;    }    .gray_background {        background-color: #eee;    }    @media print {        .footer {            position: fixed;            bottom: 0;            width: 100%;        }    }    .footer img {        width: 100%;        height: 120px;    }    @page {        size: landscape;        margin: 80px 0 0;    }    .open_green {        background-color: #e6eed5;    }    .closed_green {        background-color: #cdddac;    }    .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th,    .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td,    .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td {        border: 1px solid #000000 !important;        text-align: center;        vertical-align: middle;        font-size: 14px !important;        padding: 2px;    }    .flip-mode {        writing-mode: vertical-lr;        text-orientation: mixed;    }    a {        font-size: 14px;        text-decoration: none !important;        color: #000000 !important;    }</style><style>    #all_element tr:nth-child(1) {        counter-reset: rowNumber;    }    #all_element tr {        counter-increment: rowNumber;    }    #all_element tr td:first-child::before {        content: counter(rowNumber);        min-width: 1em;        /*margin-right: 0.5em;*/    }</style><style>	.tableFixHead 	{		overflow-y: auto; 		height: 650px;        margin-top: 70px;	}.tableFixHead thead th 	{ position: sticky; 		top: 0; 	}.tableFixHead tfoot th 	{ position: sticky; 		bottom: 0; 	}		table  	{		border-collapse: inherit; 		width: 100%;	}th     	{		background:#e1eace;   	}	.table-bordered > tfoot > tr > th, .table-bordered > tfoot > tr > td {     border-top: 1px solid #ffffff !important;    border-right: 1px solid #ffffff !important;    background: #e1eace;}.table {    border: 1px solid #000000;}		.table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td {    border: 1px solid #000000;    text-align: center;    vertical-align: middle;    font-size: 14px !important;    padding: 2px;}	             tr{cursor: pointer; transition: all .25s ease-in-out}	   .selected{background-color: #58b446; font-weight: bold; color: #fff;}</style><div class="col-sm-12 no-padding">    <div class="panel default">        <?php        /*echo $current_month->id;        echo '<pre>';        print_r($current_month);        */        ?>        <div class="panel-heading" style="background: #0b97a5;border-radius: 6px; ">            <?php if (isset($current_month) and $current_month != null) { ?>                <h3 style="color: white;" class="panel-title">                    <i class="fa fa-cogs" aria-hidden="true"></i>                    <?= $title; ?>                    <?= $current_month->month_n ?>                    في الفترة من                    <span class="label label-default"                          style="font-size: 17px;background: white !important; border:none; "><strong style="color: black;"><?= $current_month->from_date_ar ?></strong></span>                    إلي                    <span class="label label-default"                          style="font-size: 17px;background: white !important; border:none;"><strong style="color: black;"><?= $current_month->to_date_ar ?></strong></span>                    <span class="label label-default"                          style="font-size: 17px;background: white !important; border:none; float: left; "><strong style="color: black;">القائم بالإجراء   : <?php if (isset($_SESSION['user_login_name']) && $_SESSION['user_login_name'] != null) {    echo $_SESSION['user_login_name'];} else {    echo $_SESSION['user_name'];} ?> </strong></span>                </h3>            <?php } ?>        </div>        <div class="col-sm-12">        <div class="col-sm-2 padding-4">            <label class="label "> مركز التكلفة </label>            <select id="markez_taklfa" name="markez_taklfa[]" multiple title=" يمكنك اختيار اكثر من مركز"                    class="form-control selectpicker" onchange="make_search();"                    data-show-subtext="true" data-live-search="true">                <?php                if (isset($markez_taklfa) && (!empty($markez_taklfa))) {                    foreach ($markez_taklfa as $key) {                        $select = '';                        ?>                        <option value="<?php echo $key->id; ?>" <?= $select ?>> <?php echo $key->name; ?></option>                    <?php }                } ?>            </select>        </div>       <div class="col-sm-2 padding-4">            <label class="label "> الادارة </label>            <select id="edara" name="edara[]" multiple title=" يمكنك اختيار اكثر من اداره"                    class="form-control selectpicker" onchange="make_search();"                    data-show-subtext="true" data-live-search="true">                <?php                if (isset($edara) && (!empty($edara))) {                    foreach ($edara as $key) {                        if ($key->edara_n != '') {                            $select = '';                            ?>                            <option value="<?php echo $key->edara_id; ?>" <?= $select ?>> <?php echo $key->edara_n; ?></option>                        <?php }                    }                } ?>            </select>        </div>       <div class="col-sm-2 padding-4">            <label class="label "> فئة المسير </label>            <select id="mosayer_fe2at" name="mosayer_fe2at[]" multiple title=" يمكنك اختيار اكثر من فئة"                    class="form-control selectpicker" onchange="make_search();"                    data-show-subtext="true" data-live-search="true">                <?php                if (isset($mosayer_fe2at) && (!empty($mosayer_fe2at))) {                    foreach ($mosayer_fe2at as $key) {                        if ($key->title != '') {                            $select = '';                            ?>                            <option value="<?php echo $key->id; ?>" <?= $select ?>> <?php echo $key->title; ?></option>                        <?php }                    }                } ?>            </select>        </div>        <div class="col-sm-2 padding-4">            <label class="label">طريقة الصرف </label>            <select name="pay_method_id_fk" id="pay_method_id_fk"                    multiple title=" يمكنك اختيار اكثر من طريقة"                    onchange="make_search();" class="form-control selectpicker"                    data-show-subtext="true" data-live-search="true">                <?php                $paid_type = array("2" => "شيك", "3" => "تحويل ");                foreach ($paid_type as $key => $value) {                    ?>                    <option value="<?= $key ?>"><?= $value ?></option>                <?php } ?>            </select>        </div>    <div class="col-sm-2 padding-4">    <?php  if($check_month_in_mosayer > 0 ){ ?>            <label class="label">  </label>  <button class="btn btn-sm btn-danger" onclick='swal({        title: "هل انت متأكد من التراجع عن كافة العمليات؟",        text: "",        type: "warning",        showCancelButton: true,        confirmButtonClass: "btn-danger",        confirmButtonText: "تراجع",        cancelButtonText: "إلغاء",        closeOnConfirm: false        },        function(){        swal("تم الإنتهاء!", "", "success");        window.location="<?= base_url()."human_resources/employee_forms/Employee_salaries/delete_mosayer/" . $last_mosayer?>";        });'>        التراجع إلي تجهيز المسير <i class="fa fa-trash"> </i></button>  <?php } ?>    </div>    <div class="col-sm-1 padding-4">     <?php      if ($check_month_in_mosayer  > 0) { ?>                       <label class="label"> </label>                <button class="btn btn-sm btn-info" onclick='get_attachment(<?= $last_mosayer ?>)'><i                            class="fa fa-upload"> </i> مرفقات المسير                </button>          <?php }  ?>    </div>    <div class="col-sm-1 padding-4">        <?php if ($all_mosayer_egmali->level <= 0) { ?>            <div id="div_transformation">                <label class="label"> </label>                <button class="btn btn-sm btn-warning" onclick='swal({                    title: "هل انت متأكد من تحويل المسير؟",                    text: "",                    type: "warning",                    showCancelButton: true,                    confirmButtonClass: "btn-danger",                    confirmButtonText: "تحويل",                    cancelButtonText: "إلغاء",                    closeOnConfirm: false                    },                    function(){                    make_transformation(<?=$last_mosayer?>);                    });'>                    <i class="fa fa-forward"> </i>                      تحويل  المسير </button>            </div>            <?php } ?>    </div>            </div>                <?php            if (isset($all_mosayer_data) && !empty($all_mosayer_data)) {                $x = 1;                ?>        <div class="panel-body">                	<div class="tableFixHead">                <table class="table   " id="table" >                    <thead>                    <tr class="open_green">                        <th rowspan="3" style="width: 20px;">م</th>                        <th rowspan="3" style="width: 140px;">اســــــــــــــــــم الموظف</th>                        <th rowspan="3" style="width: 100px;"><span class="flip-mode">الوظيفة</span></th>                        <th colspan="10">الأستحقاقات</th>                        <th rowspan="3"><span class="flip-mode">إجمالي الأستحقاقات</span></th>                        <th colspan="7">الإستقطاعات</th>                        <th rowspan="3"><span class="flip-mode"> إجمالي الإستقطاعات </span></th>                        <th rowspan="3"><span class="flip-mode">صافي المرتب </span></th>                    </tr>                    <tr>                        <th colspan="8">الرواتب والأجور</th>                        <th colspan="2">مزايا وحوافز</th>                        <!-- <th rowspan="2">أخرى</th>-->                        <th rowspan="2">غياب</th>                        <th rowspan="2">إجازة بدون راتب</th>                        <th rowspan="2">تأخير</th>                        <th rowspan="2">جزاءات</th>                        <th rowspan="2">التأمينات</th>                        <th rowspan="2">السلف</th>                        <th rowspan="2">أخرى</th>                    </tr>                    <tr>                        <th><span class="">راتب أساسي</span></th>                        <th><span class="">بدل سكن</span></th>                        <th><span class="">بدل مواصلات	</span></th>                        <th><span class="">بدل إتصال	</span></th>                        <th><span class="">بدل إعاشة	</span></th>                        <th><span class="">بدل طبيعة عمل	</span></th>                        <th><span class="">العمل الإضافي	</span></th>                        <th><span class="">بدل تكليف	</span></th>                        <th>مكافآت</th>                        <th>بدل الإنتداب</th>                    </thead>                    <tbody id="all_element">                    <?php                          $egmali_rateb_asasy  = 0;            $egmali_badal_mowaslat  = 0;            $egmali_badal_sakn  = 0;            $egmali_badal_etsal   = 0;            $egmali_badal_e3asha   = 0;            $egmali_badal_tabe3a_amal   = 0;            $egmali_tot_edafi  = 0;            $egmali_badal_taklef   = 0;            $egmali_tot_mokafaa   = 0;            $egmali_tot_entdab  = 0;             $egmali_total_esthkak = 0;            $egmali_khasm_keyab  = 0;            $egmali_agaza_bdon_rateb  = 0;            $egmali_total_esthkak  = 0;            $egmali_khasm_takher  = 0;             $egmali_khasm_gezaa  = 0;            $egmali_khasm_tamen  = 0;            $egmali_khasm_solaf  = 0;              $egmali_tot_okraa_khasm  = 0;                   $egmali_total_khsomat  = 0;            $egmali_safi  = 0;                    foreach ($all_mosayer_data as $emp) {                              $egmali_rateb_asasy  += $emp->rateb_asasy;            $egmali_badal_sakn  += $emp->badal_sakn;            $egmali_badal_mowaslat  += $emp->badal_mowaslat;            $egmali_badal_etsal  += $emp->badal_etsal;            $egmali_badal_e3asha  += $emp->badal_e3asha;            $egmali_badal_tabe3a_amal  += $emp->badal_tabe3a_amal;            $egmali_tot_edafi  += $emp->tot_edafi;            $egmali_badal_taklef  += $emp->badal_taklef;            $egmali_tot_mokafaa  += $emp->tot_mokafaa;            $egmali_tot_entdab += $emp->tot_entdab;            $egmali_total_esthkak+= $emp->total_esthkak;            $egmali_khasm_keyab += $emp->khasm_keyab;            $egmali_agaza_bdon_rateb += $emp->agaza_bdon_rateb;            $egmali_khasm_takher += $emp->khasm_takher;                      $egmali_khasm_gezaa += $emp->khasm_gezaa;            $egmali_khasm_tamen += $emp->khasm_tamen;            $egmali_khasm_solaf += $emp->khasm_solaf;                            $egmali_tot_okraa_khasm += $emp->tot_okraa_khasm;                            $egmali_total_khsomat += $emp->total_khsomat;                $egmali_safi += $emp->safi;                         ?>                        <tr data-markz_id="<?= $emp->markz_id ?>" data-edara_id="<?= $emp->edara_id ?>"                            data-emp_pay_method="<?= $emp->emp_pay_method ?>"                            data-cat_mosayer_id_fk="<?= $emp->cat_mosayer_id_fk ?>">                            <td><?$x++; ?> </td>                            <!--<td><?= $emp->emp_name ?></td>-->                            <td><span style="float:right;font-size: 14px; color: black; font-weight: bold;  !important;"                                      data-toggle="tooltip" data-placement="bottom" title="<?= $emp->emp_name ?>">               <?= character_limiter($emp->emp_name, 14) ?>               </span></td>                            <!--  <td><?= $emp->mosma_wazefy_n ?></td>-->                            <td><span style="float:right;font-size: 14px; color: black; font-weight: bold;  !important;"                                      data-toggle="tooltip" data-placement="bottom" title="<?= $emp->mosma_wazefy_n ?>">               <?= character_limiter($emp->mosma_wazefy_n, 6) ?>               </span></td>                            <td class="rateb_asasy" id="rateb_asasy<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 100 ?>,'<?= $emp->rateb_asasy ?>');">                                <?= $emp->rateb_asasy ?>                            </td>                            <td class="badal_sakn" id="badal_sakn<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 101 ?>,                                        '<?= $emp->badal_sakn ?>')"><?= $emp->badal_sakn ?>                            </td>                            <td class="badal_mowaslat" id="badal_mowaslat<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 102 ?>,'<?= $emp->badal_mowaslat ?>')">                                <?= $emp->badal_mowaslat ?></td>                            <td class="badal_etsal" id="badal_etsal<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 106 ?>,'<?= $emp->badal_etsal ?>')">                                <?= $emp->badal_etsal ?>                            </td>                            <td class="badal_e3asha" id="badal_e3asha<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 105 ?>,'<?= $emp->badal_e3asha ?>')">                                <?= $emp->badal_e3asha ?></td>                            <td class="badal_tabe3a_amal" id="badal_tabe3a_amal<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 103 ?>,'<?= $emp->badal_tabe3a_amal ?>')">                                <?= $emp->badal_tabe3a_amal ?>                            </td>                            <!--  onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 107 ?>,'<?= $emp->tot_edafi ?>')"-->                           <!-- <td class="tot_edafi" id="tot_edafi<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(107,<?= $emp->emp_id ?>,0)">                                <?= $emp->tot_edafi ?>                            </td>-->                            <td class="tot_edafi" id="tot_edafi<?= $emp->emp_id ?>"                            onclick="get_pop_detailes(107,<?= $emp->emp_id ?>,3)">                            <?= $emp->tot_edafi ?>                            </td>                            <td class="badal_taklef" id="badal_taklef<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 104 ?>,'<?= $emp->badal_taklef ?>')">                                <?= $emp->badal_taklef ?>                            </td>                            <td class="tot_mokafaa" id="tot_mokafaa<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(905,<?= $emp->emp_id ?>,0)"><?= $emp->tot_mokafaa ?></td>                            <td class="tot_entdab" id="tot_entdab<?= $emp->emp_id ?>"><?= $emp->tot_entdab ?></td>                            <!--   <td class="tot_okraa_esthkaq" id="tot_okraa_esthkaq<?= $emp->emp_id ?>"><?= $emp->tot_okraa_esthkaq ?></td>-->                            <td class="total_esthkak" id="total_esthkak<?= $emp->emp_id ?>"                                style="background: #e6eed5;"><?= $emp->total_esthkak ?></td>                            <td class="khasm_keyab" id="khasm_keyab<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(901,<?= $emp->emp_id ?>,1)"><?= $emp->khasm_keyab ?></td>                            <td class="agaza_bdon_rateb" id="agaza_bdon_rateb<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(902,<?= $emp->emp_id ?>,0)"><?= $emp->agaza_bdon_rateb ?></td>                            <td class="khasm_takher" id="khasm_takher<?= $emp->emp_id ?>"                                 onclick="get_pop_detailes(903,<?= $emp->emp_id ?>,2)"><?= $emp->khasm_takher ?></td>                            <td class="khasm_gezaa" id="khasm_gezaa<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(904,<?= $emp->emp_id ?>,0)"><?= $emp->khasm_gezaa ?></td>                            <td class="khasm_tamen" id="khasm_tamen<?= $emp->emp_id ?>"                                onclick="load_page(<?= $emp->emp_code ?>,<?= $emp->emp_id ?>,'<?= $emp->emp_name ?>','<?= $emp->mosma_wazefy_n ?>',<?= 200 ?>,'<?= $emp->khasm_tamen ?>')">                                <?= $emp->khasm_tamen ?>                            </td>                            <td class="khasm_solaf" id="khasm_solaf<?= $emp->emp_id ?>"><?= $emp->khasm_solaf ?></td>                            <!-- <td class="tot_okraa_khasm" id="tot_okraa_khasm<?= $emp->emp_id ?>"><?= $emp->tot_okraa_khasm ?> </td>-->                            <td class="tot_okraa_khasm" id="tot_okraa_khasm<?= $emp->emp_id ?>"                                onclick="get_pop_detailes(906,<?= $emp->emp_id ?>,0)"><?= $emp->tot_okraa_khasm ?> </td>                            <td class="total_khsomat" id="total_khsomat<?= $emp->emp_id ?>"                                style="background: #e6eed5;"><?= $emp->total_khsomat ?></td>                            <td class="safi" id="safi<?= $emp->emp_id ?>"                                style="background: #e6eed5;"><?= ($emp->safi) ?> </td>                        </tr>                        <?php                    }                    ?>                    </tbody>                    <tfoot class="open_green  tfoot_total">                    <tr>                        <th colspan="3">الإجمالى</th>                        <th class="egmali_rateb_asasy"><?= $egmali_rateb_asasy ?></th>                        <th class="egmali_badal_sakn"><?= $egmali_badal_sakn ?></th>                        <th class="egmali_badal_mowaslat"><?= $egmali_badal_mowaslat ?></th>                        <th class="egmali_badal_etsal"><?= $egmali_badal_etsal ?></th>                        <th class="egmali_badal_e3asha"><?= $egmali_badal_e3asha ?></th>                        <th class="egmali_badal_tabe3a_amal"><?= $egmali_badal_tabe3a_amal ?></th>                        <th class="egmali_tot_edafi"><?= $egmali_tot_edafi ?></th>                        <th class="egmali_badal_taklef"><?= $egmali_badal_taklef ?></th>                        <th class="egmali_tot_mokafaa"><?= $egmali_tot_mokafaa ?></th>                        <th class="egmali_tot_entdab"><?= $egmali_tot_entdab ?></th>                        <!--<th class="egmali_tot_okraa_esthkaq"><?= $egmali_tot_okraa_esthkaq ?></th>-->                        <th class="egmali_total_esthkak"><?= $egmali_total_esthkak ?></th>                        <th class="egmali_khasm_keyab"><?= $egmali_khasm_keyab ?></th>                        <th class="egmali_agaza_bdon_rateb"><?= $egmali_agaza_bdon_rateb ?></th>                        <th class="egmali_khasm_takher"><?= $egmali_khasm_takher ?></th>                        <th class="egmali_khasm_gezaa"><?= $egmali_khasm_gezaa ?></th>                        <th class="egmali_khasm_tamen"><?= $egmali_khasm_tamen ?></th>                        <th class="egmali_khasm_solaf"><?= $egmali_khasm_solaf ?></th>                        <th class="egmali_tot_okraa_khasm"><?= $egmali_tot_okraa_khasm ?></th>                        <th class="egmali_total_khsomat"><?= $egmali_total_khsomat ?></th>                        <th class="egmali_safi"><?= $egmali_safi ?></th>                    </tr>                    </tfoot>                </table>        </div>    </div>                            <?php            }else{ ?>            <div class="col-md-12">              <div class="alert alert-danger">  <strong>عذرا !</strong> لم يتم تجهيز المسير لهذا الشهر إلى الأن الرجاء الذهاب إلى شاشة تجهيز المسير</div>  </div>          <?php   }            ?></div><div class="modal fade" id="modalpop_detailes" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog " style="width: 80%" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="myModalLabel_header"></h4>            </div>            <div class="modal-body">                <div class="container-fluid">                    <div class=" col-xs-12 no-padding" id="load_pop_detailes">                    </div>                </div>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-labeled btn-success " onclick="save_egrat()" id="save_start_work"                        name="add"                        value="حفظ">                    <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                </button>                <span class=" label-danger" id="save_start_work_span" style="display: none;float: right">  </span>                <button type="button" class="btn btn-labeled btn-danger " data-dismiss="modal">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><div class="modal fade" id="detailsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 70%;">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" style="text-align: center;"> أضافه</h4>            </div>            <div class="modal-body" style="padding: 10px 0" id="result">            </div>            <div class="modal-footer" style="display: inline-block;width: 100%;">                <?php                //    if (isset($get_all) && !empty($get_all) ){                ?>                <!-- <button                         type="button" onclick="print_asnaf(document.getElementById('sanf_id').value)"                         class="btn btn-labeled btn-purple ">                     <span class="btn-label"><i class="glyphicon glyphicon-print"></i></span>طباعة                 </button>-->                <?php                //   }                ?>                <button type="button" class="btn btn-labeled btn-danger " data-dismiss="modal">                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                </button>            </div>        </div>    </div></div><!--17-8-20-om--><!-- بداية المرفقات --><div class="modal fade" id="modalpop_attachment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog " style="width: 80%" role="document">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" id="myModalLabel_header"> المرفقات </h4>                </div>                <div class="modal-body">                    <div class="container-fluid">                        <div class=" col-xs-12 no-padding" id="form_attechment">                            <div class="col-md-4 ">                                <label class="label ">اسم المرفق </label>                                <input type="text" name="title" id="title" class="form-control  "                                       data-validation="required">                            </div>                            <div class="form-group padding-4 col-md-4 col-xs-12">                                <label class="label "> المرفق</label>                                <input type="file" class="form-control" accept="image/* , application/pdf" name="morfaq"                                       id="morfaq" data-validation="required">                            </div>                        </div>                        <div class=" col-xs-12 no-padding" id="load_pop_attachment">                        </div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-labeled btn-success " onclick="save_attachment()"                            id="save_start_work"                            name="add"                            value="حفظ">                        <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                    </button>                    <span class=" label-danger" id="save_start_work_span" style="display: none;float: right">  </span>                    <button type="button" class="btn btn-labeled btn-danger " data-dismiss="modal">                        <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                    </button>                </div>            </div>        </div>    </div>    <div class="modal fade" id="myModal-pdf" tabindex="-1"         role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog modal-lg" role="document">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" onclick="$('#myModal-pdf').modal('hide')"                            aria-label="Close"><span aria-hidden="true">&times;</span>                    </button>                    <h4 class="modal-title" id="myModalLabel">الملف</h4>                </div>                <div class="modal-body">                    <iframe id="pdf_iframe" src="" style="width: 100%; height:  640px;" frameborder="0">                    </iframe>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" onclick="$('#myModal-pdf').modal('hide')">                        إغلاق                    </button>                </div>            </div>        </div>    </div>    <div class="modal fade" id="myModal-view" tabindex="-1"         role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog modal-lg" role="document">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" onclick="$('#myModal-view').modal('hide')" aria-label="Close"><span aria-hidden="true">&times;</span>                    </button>                    <h4 class="modal-title" id="myModalLabel">الصورة</h4>                </div>                <div class="modal-body">                    <img id="img_view" src="" width="100%" alt="">                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" onclick="$('#myModal-view').modal('hide')">                        إغلاق                    </button>                </div>            </div>        </div>    </div><!-- نهاية المرفقات --> <script>            function selectedRow(){                var index,                    table = document.getElementById("table");                for(var i = 1; i < table.rows.length; i++)                {                    table.rows[i].onclick = function()                    {                         // remove the background from the previous selected row                        if(typeof index !== "undefined"){                           table.rows[index].classList.toggle("selected");                        }                        console.log(typeof index);                        // get the selected row index                        index = this.rowIndex;                        // add class selected to the row                        this.classList.toggle("selected");                        console.log(typeof index);                     };                }            }            selectedRow();        </script><script>    function save_mosayer_egraat() {        var egraa_date = $('#egraa_date').val();        var emp_code = $('#emp_code').val();        var emp_name = $('#emp_name').val();        var mosma_wazefy_n = $('#mosma_wazefy_n').val();        var ancient_value = $('#anc_value').val();        var new_value = $('#new_value').val();        var reason = $('#reason').val();        var row_id = $('#row_id').val();        var badl_code = $('#badl_code').val();        var mosayer_rkm_fk = $('#mosayer_rkm_fk').val();        var badal_n = $('#badal_n').val();        if (new_value != "") {            $.ajax({                type: 'post',                url: "<?php echo base_url();?>human_resources/employee_forms/Employee_salaries/insert_mosayer_egraat",                data: {                    egraa_date: egraa_date,                    emp_code: emp_code,                    emp_name: emp_name,                    mosma_wazefy_n: mosma_wazefy_n,                    ancient_value: ancient_value,                    new_value: new_value,                    reason: reason,                    badal_code: badl_code,                    emp_id: row_id,                    badal_n: badal_n,                    mosayer_rkm_fk: mosayer_rkm_fk                }, beforeSend: function (xhr) {                    swal({                        title: "جاري الحفظ ... ",                        text: "",                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                        showConfirmButton: false,                        allowOutsideClick: false                    });                },                success: function (resp) {                    //  $('#result').html(d);                    /*     swal("تم الاضافه!", "", "success");                         load_page(emp_code,row_id,emp_name,mosma_wazefy_n,badl_code,ancient_value);     */                    var emp_data = JSON.parse(resp);                    var emp_id = emp_data.emp_id;                    var td_id = emp_data.filed;                    $('#' + td_id + emp_id).html(emp_data.value);                    $('#total_esthkak' + emp_id).html(emp_data.total_esthkak);                    $('#total_khsomat' + emp_id).html(emp_data.total_khsomat);                    $('#safi' + emp_id).html(emp_data.safi);                    swal({                        title: 'تم  الحفظ بنجاح',                        type: 'success',                        confirmButtonText: 'تم'                    });                    $('#detailsModal').modal('hide');                }            });        } else {            swal("برجاء تكمله البيانات", "", "warning");        }    }</script><script>    function load_page(emp_code, row_id, emp_name, mosma_wazefy_n, badl_code, ancient_value) {//alert(ancient_value);        $('#detailsModal').modal('show');        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/Employee_salaries/get_mosayer_egraat",            data: {                emp_code: emp_code,                row_id: row_id,                emp_name: emp_name,                mosma_wazefy_n: mosma_wazefy_n,                badl_code: badl_code,                ancient_value: ancient_value,                mosayer_rkm_fk:<?=$mosayer_rkm_fk?>            }, beforeSend: function () {                $('#result').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#result').html(d);            }        });    }</script><script>    function get_pop_detailes(code, emp_id, process_id) {        $('#modalpop_detailes').modal('show');        $.ajax({            type: 'post',            url: '<?php echo base_url() ?>human_resources/employee_forms/Employee_salaries/get_pop_detailes',            data: {emp_id: emp_id, mosayer_rkm_fk:<?=$mosayer_rkm_fk?>, code: code, process_id: process_id},            cache: false,            beforeSend: function () {                /*  swal({                        title: "جاري الحذف ... ",                        text: "",                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                    showConfirmButton: false,                    allowOutsideClick: false                });*/                $('#load_pop_detailes').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (resp) {                $('#load_pop_detailes').html(resp);            }        });    }    function save_egrat() {        var all_inputs = $(' #pop_form [data-validation="required"]');        var valid = 1;        var text_valid = "";        all_inputs.each(function (index, elem) {            console.log(elem.id + $(elem).val());            if ($(elem).val().length >= 1) {                // valid=1;                $(elem).css("border", "2px solid #5cb85c");            } else {                valid = 0;                $(elem).css("border", "2px solid #ff0000");            }        });        $.ajax({            type: 'post',            url: $('#pop_form').attr('action'),            data: $('#pop_form').serialize(),            cache: false,            beforeSend: function (xhr) {                if (valid == 0) {                    swal({                        title: 'من فضلك ادخل كل الحقول ',                        text: text_valid,                        type: 'error',                        confirmButtonText: 'تم'                    });                    xhr.abort();                } else if (valid == 1) {                    swal({                        title: "جاري الحفظ ... ",                        text: "",                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                        showConfirmButton: false,                        allowOutsideClick: false                    });                }            },            success: function (resp) {                var emp_data = JSON.parse(resp);                var emp_id = emp_data.emp_id;                var td_id = emp_data.filed;                $('#' + td_id + emp_id).html(emp_data.value);                $('#total_esthkak' + emp_id).html(emp_data.total_esthkak);                $('#total_khsomat' + emp_id).html(emp_data.total_khsomat);                $('#safi' + emp_id).html(emp_data.safi);                swal({                    title: 'تم  الحفظ بنجاح',                    type: 'success',                    confirmButtonText: 'تم'                });                $('#modalpop_detailes').modal('hide');            }        });    }</script><script>    function delete_egraa(egraa_id, td_id) {        $.ajax({            type: 'post',            url: '<?php echo base_url() ?>human_resources/employee_forms/Employee_salaries/delete_egraa',            data: {egraa_id: egraa_id},            cache: false,            beforeSend: function () {                swal({                    title: "جاري الحذف ... ",                    text: "",                    imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                    showConfirmButton: false,                    allowOutsideClick: false                });            },            success: function (resp) {                swal({                    title: 'تم  الحذف بنجاح',                    type: 'success',                    confirmButtonText: 'تم'                });                $('#' + td_id).closest("tr").remove();                $('#morfq_show').html(resp);            }        });    }</script><script>    // $('#all_element tr')    var type_search_arr = ['', 'markz_id', 'edara_id', 'cat_mosayer_id_fk', 'emp_pay_method'];    var all_element = [];    function make_search() {        var edara = $('#edara').val();        var mosayer_fe2at = $('#mosayer_fe2at').val();        var markez_taklfa = $('#markez_taklfa').val();        var pay_method_id_fk = $('#pay_method_id_fk').val();        all_element = document.querySelectorAll('#all_element tr');        if ((markez_taklfa) && (markez_taklfa.length > 0)) {            console.log('search :: 1');            filter_search(all_element, 1, markez_taklfa)        }        if ((edara) && (edara.length > 0)) {            console.log('search :: 2');            filter_search(all_element, 2, edara)        }        if ((mosayer_fe2at) && (mosayer_fe2at.length > 0)) {            console.log('search :: 3');            filter_search(all_element, 3, mosayer_fe2at)        }        if ((pay_method_id_fk) && (pay_method_id_fk.length > 0)) {            console.log('search :: 4');            filter_search(all_element, 4, pay_method_id_fk)        }        if (all_element.length > 0) {            $('.tfoot_total').show();        } else {            $('.tfoot_total').hide();        }        sumOfColumns();    }    function filter_search(input_elem, type_search, search_value) {        var new_element = [];        /*   console.log('type_search ::'+type_search);           console.log('search_value ::'+search_value);           console.log('input_elem ::'+input_elem.length);*/        for (var i = 0; i < input_elem.length; i++) {            var text = input_elem[i].getAttribute('data-' + type_search_arr[type_search]);            console.warn("title ::" + text);            /* if (text.indexOf(search_value) > -1) {*/            if (search_value.indexOf(text) > -1) {                input_elem[i].style.display = '';                new_element.push(input_elem[i]);            } else {                input_elem[i].style.display = 'none';            }        }        all_element = new_element;    }    function sumOfColumns() {        var egmali_rateb_asasy = 0;        $(".rateb_asasy:visible").each(function () {            egmali_rateb_asasy += parseInt($(this).html());            $(".egmali_rateb_asasy").html(egmali_rateb_asasy);        });        var egmali_badal_sakn = 0;        $(".badal_sakn:visible").each(function () {            egmali_badal_sakn += parseInt($(this).html());            $(".egmali_badal_sakn").html(egmali_badal_sakn);        });        var egmali_badal_mowaslat = 0;        $(".badal_mowaslat:visible").each(function () {            egmali_badal_mowaslat += parseInt($(this).html());            $(".egmali_badal_mowaslat").html(egmali_badal_mowaslat);        });        var egmali_badal_etsal = 0;        $(".badal_etsal:visible").each(function () {            egmali_badal_etsal += parseInt($(this).html());            $(".egmali_badal_etsal").html(egmali_badal_etsal);        });        var egmali_badal_e3asha = 0;        $(".badal_e3asha:visible").each(function () {            egmali_badal_e3asha += parseInt($(this).html());            $(".egmali_badal_e3asha").html(egmali_badal_e3asha);        });        var egmali_badal_tabe3a_amal = 0;        $(".badal_tabe3a_amal:visible").each(function () {            egmali_badal_tabe3a_amal += parseInt($(this).html());            $(".egmali_badal_tabe3a_amal").html(egmali_badal_tabe3a_amal);        });        var egmali_tot_edafi = 0;        $(".tot_edafi:visible").each(function () {            egmali_tot_edafi += parseInt($(this).html());            $(".egmali_tot_edafi").html(egmali_tot_edafi);        });        var egmali_badal_taklef = 0;        $(".badal_taklef:visible").each(function () {            egmali_badal_taklef += parseInt($(this).html());            $(".egmali_badal_taklef").html(egmali_badal_taklef);        });        var egmali_tot_mokafaa = 0;        $(".tot_mokafaa:visible").each(function () {            egmali_tot_mokafaa += parseInt($(this).html());            $(".egmali_tot_mokafaa").html(egmali_tot_mokafaa);        });        var egmali_tot_entdab = 0;        $(".tot_entdab:visible").each(function () {            egmali_tot_entdab += parseInt($(this).html());            $(".egmali_tot_entdab").html(egmali_tot_entdab);        });        var egmali_total_esthkak = 0;        $(".total_esthkak:visible").each(function () {            egmali_total_esthkak += parseInt($(this).html());            $(".egmali_total_esthkak").html(egmali_total_esthkak);        });        var egmali_khasm_keyab = 0;        $(".khasm_keyab:visible").each(function () {            egmali_khasm_keyab += parseInt($(this).html());            $(".egmali_khasm_keyab").html(egmali_khasm_keyab);        });        var egmali_agaza_bdon_rateb = 0;        $(".agaza_bdon_rateb:visible").each(function () {            egmali_agaza_bdon_rateb += parseInt($(this).html());            $(".egmali_agaza_bdon_rateb").html(egmali_agaza_bdon_rateb);        });        var egmali_khasm_takher = 0;        $(".khasm_takher:visible").each(function () {            egmali_khasm_takher += parseInt($(this).html());            $(".egmali_khasm_takher").html(egmali_khasm_takher);        });        var egmali_khasm_gezaa = 0;        $(".khasm_gezaa:visible").each(function () {            egmali_khasm_gezaa += parseInt($(this).html());            $(".egmali_khasm_gezaa").html(egmali_khasm_gezaa);        });        var egmali_khasm_tamen = 0;        $(".khasm_tamen:visible").each(function () {            egmali_khasm_tamen += parseInt($(this).html());            $(".egmali_khasm_tamen").html(egmali_khasm_tamen);        });        var egmali_khasm_solaf = 0;        $(".khasm_solaf:visible").each(function () {            egmali_khasm_solaf += parseInt($(this).html());            $(".egmali_khasm_solaf").html(egmali_khasm_solaf);        });        var egmali_tot_okraa_khasm = 0;        $(".tot_okraa_khasm:visible").each(function () {            egmali_tot_okraa_khasm += parseInt($(this).html());            $(".egmali_tot_okraa_khasm").html(egmali_tot_okraa_khasm);        });        var egmali_total_khsomat = 0;        $(".total_khsomat:visible").each(function () {            egmali_total_khsomat += parseInt($(this).html());            $(".egmali_total_khsomat").html(egmali_total_khsomat);        });        var egmali_safi = 0;        $(".safi:visible").each(function () {            egmali_safi += parseInt($(this).html());            $(".egmali_safi").html(egmali_safi);        });    }</script><script>        function make_transformation(mosayer_rkm_fk) {                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/Employee_salaries/make_transformation",                    data: {mosayer_rkm: mosayer_rkm_fk},                    beforeSend: function (xhr) {                        swal({                            title: "جاري التحويل ... ",                            text: "",                            imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                            showConfirmButton: false,                            allowOutsideClick: false                        });                    },                    success: function (resp) {                        swal({                            title: 'تم تحويل الى المدير المباشر بنجاح',                            type: 'success',                            confirmButtonText: 'تم'                        });                        $('#div_transformation').hide('slow');                    }                });        }    </script><!--بداية المرفقات --->     <script>        /*21-10-2020*/        function get_attachment(last_mosayer) {            $('#modalpop_attachment').modal('show');            $.ajax({                type: 'post',                url: "<?php echo base_url();?>human_resources/employee_forms/Employee_salaries/get_attachment",                data: {                    mosayer_rkm_fk:<?=$mosayer_rkm_fk?>                }, beforeSend: function () {                    $('#load_pop_attachment').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');                },                success: function (d) {                    $('#load_pop_attachment').html(d);                }            });        }        function save_attachment() {            var all_inputs = $(' #form_attechment [data-validation="required"]');            var valid = 1;            var text_valid = "";            all_inputs.each(function (index, elem) {                console.log(elem.id + $(elem).val());                if ($(elem).val().length >= 1) {                    // valid=1;                    $(elem).css("border", "2px solid #5cb85c");                } else {                    valid = 0;                    $(elem).css("border", "2px solid #ff0000");                }            });            var files = $('#morfaq')[0].files;            var title = $('#title').val();            var error = '';            var form_data = new FormData();            for (var count = 0; count < files.length; count++) {                var name = files[count].name;                var extension = name.split('.').pop().toLowerCase();                if (jQuery.inArray(extension, ['gif', 'png', 'jpg', 'PNG', 'jpeg', 'pdf', 'PDF', 'xls', 'xlsx', ',doc', 'docx', 'txt']) == -1) {                    text_valid = "برجاء اختيار صورة او ملف pdf"                } else {                    form_data.append("files", files[count]);                    form_data.append("title", title);                    form_data.append("mosayer_rkm_fk", <?=$mosayer_rkm_fk?>);                }            }            $.ajax({                type: 'post',                url: "<?php echo base_url();?>human_resources/employee_forms/Employee_salaries/save_attachment",                method: "POST",                data: form_data,                contentType: false,                cache: false,                processData: false,                beforeSend: function (xhr) {                    if (valid == 0) {                        swal({                            title: 'من فضلك ادخل كل الحقول ',                            text: text_valid,                            type: 'error',                            confirmButtonText: 'تم'                        });                        xhr.abort();                    } else if (valid == 1) {                        swal({                            title: "جاري الرفع ... ",                            text: "",                            imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                            showConfirmButton: false,                            allowOutsideClick: false                        });                    }                },                success: function (html) {                    swal({                        title: 'تم رفع المرفق  بنجاح',                        type: 'success',                        confirmButtonText: 'تم'                    });                    var all_inputs_set = $(' #form_attechment .form-control');                    all_inputs_set.each(function (index, elem) {                        console.log(elem.id + $(elem).val());                        $(elem).val('');                    });                    $('#load_pop_attachment').html(html);                }            });        }        function delete_morfaq(row_id) {            swal({                    title: "هل انت متأكد من الحذف ؟",                    text: "",                    type: "warning",                    showCancelButton: true,                    confirmButtonClass: "btn-danger",                    confirmButtonText: "حذف",                    cancelButtonText: "إلغاء",                    closeOnConfirm: false                },                function () {                    $.ajax({                        type: 'post',                        url: '<?php echo base_url()?>human_resources/employee_forms/Employee_salaries/delete_morfaq',                        data: {row_id: row_id, mosayer_rkm_fk:<?=$mosayer_rkm_fk?>},                        dataType: 'html',                        cache: false,                        beforeSend: function (xhr) {                            swal({                                title: "جاري الحذف ... ",                                text: "",                                imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                                showConfirmButton: false,                                allowOutsideClick: false                            });                        },                        success: function (html) {                            swal({                                title: 'تم  الحذف بنجاح',                                type: 'success',                                confirmButtonText: 'تم'                            });                            $('#load_pop_attachment').html(html);                        }                    });                });        }    </script>    <!-- نهاية المرفقات --->  