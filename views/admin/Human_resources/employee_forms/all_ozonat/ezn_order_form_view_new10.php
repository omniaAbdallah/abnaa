<div class="col-xs-12 no-padding">    <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable ">        <div class="panel-heading">            <h3 class="panel-title"><?php echo $title; ?></h3>        </div>        <div class="panel-body">            <?php            if (!isset($_POST['from_profile'])) { ?>            <div class="col-sm-10 no-padding">                <?php }else { ?>                <div class="col-sm-12 no-padding ">                    <?php } ?>                    <?php                    if (isset($get_ezn) && !empty($get_ezn)) {                        echo form_open_multipart('human_resources/employee_forms/all_ozonat/Ezn_order/Upadte_ezn/' . $get_ezn->id);                        $no3_ezn = $get_ezn->no3_ezn;                        $emp_id_fk = $get_ezn->emp_id_fk;                        $emp_code_fk = $get_ezn->emp_code_fk;                        $emp_name = $get_ezn->emp_name;                        $edara_id_fk = $get_ezn->edara_id_fk;                        $edara_n = $get_ezn->edara_n;                        $qsm_id_fk = $get_ezn->qsm_id_fk;                        $qsm_n = $get_ezn->qsm_n;                        $job_title = $get_ezn->job_title;                        $ezn_date = $get_ezn->ezn_date_ar;                        $fatra_fk = $get_ezn->fatra_fk;                        $from_hour = $get_ezn->from_hour;                        $to_hour = $get_ezn->to_hour;                        $total_hours = $get_ezn->total_hours;                        $remain_hours = $get_ezn->remain_hours;                        $remain_num = $get_ezn->remain_num;                        $reason = $get_ezn->reason;                        /*26-10-20-om*/                        $geha_name = $get_ezn->geha_name;                        $visit_goal = $get_ezn->visit_goal;                        $visit_sub = $get_ezn->visit_sub;                        $visit_type = $get_ezn->visit_type;                        $visit_detailes = $get_ezn->visit_detailes;                        $update = 1;                    } else {                        echo form_open_multipart('human_resources/employee_forms/all_ozonat/Ezn_order');                        $no3_ezn = '';                        $emp_id_fk = '';                        $emp_code_fk = '';                        $emp_name = '';                        $edara_id_fk = '';                        $edara_n = '';                        $qsm_id_fk = '';                        $qsm_n = '';                        $job_title = '';                        $ezn_date = date('Y-m-d');                        $fatra_fk = '';                        $from_hour = '';                        $to_hour = '';                        $total_hours = '';                        $remain_hours = '';                        $remain_num = '';                        $reason = '';                        /*26-10-20-om*/                        $geha_name = $visit_goal = $visit_sub = $visit_type = $visit_detailes = "";                        $update = 0;                    }                    $type_visit = array(1 => 'ميداني', 2 => ' تواصل');                    ?>                    <input type="hidden" id="emp_id_fk" name="emp_id_fk"                           value="<?php if (!empty($emp_data->id)) {                               echo $emp_data->id;                           } else {                               echo $emp_id_fk;                           } ?>">                    <input type="hidden" id="edara_id_fk" name="edara_id_fk"                           value="<?php if (!empty($emp_data->administration)) {                               echo $emp_data->administration;                           } else {                               echo $edara_id_fk;                           } ?>">                    <input type="hidden" id="qsm_id_fk" name="qsm_id_fk"                           value="<?php if (!empty($emp_data->department)) {                               echo $emp_data->department;                           } else {                               echo $qsm_id_fk;                           } ?>">                    <?php                    if (isset($_POST['from_profile']) && (!empty($_POST['from_profile']))) { ?>                        <input type="hidden" name="from_profile" value="1"/>                    <?php } ?>                    <input type="hidden" name="update" id="update" value="<?= $update ?>"/>                    <div class="col-xs-12 no-padding">                        <div class="form-group col-md-2  padding-4">                            <label class="label ">نوع الاذن</label>                            <?php $permits = array(1 => 'استئذان شخصي', 2 => 'استئذان للعمل');                            $work_types = array("1" => "فترة", "2" => "فترتين");                            ?>                            <select name="no3_ezn" id="no3_ezn"                                    onchange="check_setting($('#emp_id_fk').val());get_available(); "                                    data-validation="required" class="form-control  ">                                <option value=" " selected="">اختر</option>                                <?php foreach ($permits as $key => $value) { ?>                                    <option value="<?php echo $key; ?>" <?php if ($no3_ezn == $key) {                                        echo 'selected';                                    } ?> > <?php echo $value; ?></option>                                <?php } ?>                            </select>                        </div>                        <div class="form-group col-md-4 col-sm-6 col-xs-6 padding-4">                            <label class="label ">اسم الموظف</label>                            <input name="emp_name" id="emp_name" class="form-control"                                   style="width:84%; float: right;" readonly                                   value="<?php if (!empty($emp_data->employee)) {                                       echo $emp_data->employee;                                   } else {                                       echo $emp_name;                                   } ?>">                            <button type="button" data-toggle="modal" data-target="#myModal_emps"                                    class="btn btn-success btn-next" id="but"                                    onclick="GetDiv_emps('myDiv_emp')" <?php if (!empty($emp_data->employee)) {                                echo 'disabled';                            } ?>                            >                                <i class="fa fa-plus"></i></button>                        </div>                        <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                            <label class="label "> الرقم الوظيفي</label>                            <input name="emp_code_fk" id="emp_code" class="form-control"                                   value="<?php if (!empty($emp_data->emp_code)) {                                       echo $emp_data->emp_code;                                   } else {                                       echo $emp_code_fk;                                   } ?>" readonly>                        </div>                        <div class="form-group col-md-4 col-sm-6 col-xs-6 padding-4">                            <label class="label "> المسمى الوظيفي</label>                            <input name="job_title" id="job_title" class="form-control"                                   value="<?php if (!empty($emp_data->mosma_wazefy_n)) {                                       echo $emp_data->mosma_wazefy_n;                                   } else {                                       echo $job_title;                                   } ?>" readonly>                        </div>                        <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">                            <label class="label "> الأدارة </label>                            <input name="edara_n" id="edara_n" class="form-control"                                   value="<?php if (!empty($emp_data->edara_n)) {                                       echo $emp_data->edara_n;                                   } else {                                       echo $edara_n;                                   } ?>" readonly>                        </div>                        <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">                            <label class="label "> القسم</label>                            <input name="qsm_n" id="qsm_n" class="form-control"                                   value="<?php if (!empty($emp_data->qsm_n)) {                                       echo $emp_data->qsm_n;                                   } else {                                       echo $qsm_n;                                   } ?>" readonly>                        </div>                        <div class="form-group col-md-2  padding-4">                            <label class="label ">تاريخ الاذن</label>                            <input type="date" name="ezn_date" id="start_date" value="<?= $ezn_date; ?>"                                   class="form-control  " data-validation="required"                                   onchange="check_setting($('#emp_id_fk').val());get_available();check_setting_time($('#emp_id_fk').val()) "                                   data-validation-has-keyup-event="true">                        </div>                        <!-- yaraa22-9 -->                        <div class=" form-group col-md-2  padding-4">                            <label class="label ">الفتره</label>                            <select name="fatra_fk" id="fatra_fk"                                    data-validation="required" class="form-control  ">                                <option value=" " selected="">اختر</option>                                <?php foreach ($work_types as $key => $value) { ?>                                    <option value="<?php echo $key; ?>" <?php if ($fatra_fk == $key) {                                        echo 'selected';                                    } ?>><?php echo $value; ?></option>                                <?php } ?>                            </select>                        </div>                        <!-- yaraa22-9 -->                        <div class="form-group col-md-2  padding-4">                            <label class="label ">بداية الإذن</label>                            <input type="time" name="from_hour" onchange="get_time();" id="from_time"                                   value="<?= $from_hour ?>" class="form-control  " data-validation="required"                                   data-validation-has-keyup-event="true">                        </div>                        <div class="form-group col-md-2  padding-4">                            <label class="label ">نهاية الإذن</label>                            <input type="time" name="to_hour" onchange="get_time();" id="to_time"                                   value="<?= $to_hour ?>" class="form-control  " data-validation="required"                                   data-validation-has-keyup-event="true">                        </div>                        <!-- yaraa22-9 -->                        <div class="form-group col-md-1  padding-4">                            <label class="label ">المده</label>                            <input type="text" readonly name="total_hours" id="num_hours"                                   value="<?= $total_hours ?>"                                   class="form-control  ">                        </div>                        <div id="no3_ezn1" style="display: none">                            <div class="form-group col-md-1  padding-4">                                <label class="label "> المدة المتبقية </label>                                <input type="text" readonly name="total_hours" id="remain_hours"                                       value="<?= $remain_hours ?>" class="form-control  ">                            </div>                            <div class="form-group col-md-2  padding-4">                                <label class="label "> عدد الاذونات المتبقية </label>                                <input type="text" readonly name="total_hours" id="remain_num"                                       value="<?= $remain_num ?>"                                       class="form-control  ">                            </div>                        </div>                        <div class="form-group col-md-3  padding-4">                            <label class="label ">السبب</label>                            <input class="form-control" id="reason" name="reason" value="<?= $reason ?>"/>                            <!--<textarea id="reason" name="reason" class="form-control"></textarea>-->                        </div>                        <div id="no3_ezn2" style="display: none">                            <div class=" form-group col-md-3 col-sm-6 padding-4 ">                                <label class="label ">جهة الزيارة</label>                                <input type="text" class="form-control  "                                       id="geha_name" name="geha_name" value="<?= $geha_name ?>" readonly="readonly"                                       onclick="change_type_setting(4,' جهة  الزيارة','geha_name','geha');load_settigs();"                                       style="cursor:pointer;border: white;color: black;width:80%;float: right;"                                       data-validation="required">                                <button type="button"                                        onclick="change_type_setting(4,' جهة  الزيارة','geha_name','geha');load_settigs();"                                        class="btn btn-success btn-next">                                    <i class="fa fa-plus"></i>                                </button>                            </div>                            <div class=" form-group col-md-2 col-sm-6  padding-4 ">                                <label class=" label">نوع الزيارة</label>                                <select id="visit_type" class="form-control "                                        name="visit_type">                                    <option value="">أختر</option>                                    <?php                                    foreach ($type_visit as $key => $value) {                                        ?>                                        <option value="<?php echo $key; ?>"                                            <?php                                            if (!empty($visit_type)) {                                                if ($key == $visit_type) {                                                    echo 'selected';                                                }                                            } ?>> <?php echo $value; ?></option>                                    <?php } ?>                                </select>                            </div>                            <div class=" form-group col-md-3 col-sm-6 padding-4 ">                                <label class=" label kafel">موضوع الزيارة </label>                                <input type="text" class="form-control  "                                       id="visit_sub" name="visit_sub" value="<?= $visit_sub ?>" readonly="readonly"                                       onclick="change_type_setting(3,'موضوع الزيارة ','visit_sub','subject');load_settigs();"                                       style="cursor:pointer;border: white;color: black;width:80%;float: right;"                                       data-validation="required">                                <button type="button"                                        onclick="change_type_setting(3,'موضوع الزيارة ','visit_sub','subject');load_settigs();"                                        class="btn btn-success btn-next">                                    <i class="fa fa-plus"></i>                                </button>                            </div>                            <div class=" form-group col-md-3 col-sm-6 padding-4 ">                                <label class=" label kafel">الغرض من الزيارة </label>                                <input type="hidden" id="type_setting" data-id="" data-title="" data-title_fk=""                                       data-title_n="" data-fe2a_type="">                                <input type="text" class="form-control  "                                       id="visit_goal" name="visit_goal" value="<?= $visit_goal ?>" readonly="readonly"                                       onclick="change_type_setting(1,'الغرض من الزيارة','visit_goal','purpose');load_settigs();"                                       style="cursor:pointer;border: white;color: black;width:80%;float: right;"                                       data-validation="required">                                <button type="button"                                        onclick="change_type_setting(1,'الغرض من الزيارة','visit_goal','purpose');load_settigs();"                                        class="btn btn-success btn-next">                                    <i class="fa fa-plus"></i>                                </button>                            </div>                            <div class="form-group col-md-3  padding-4">                                <label class="label ">تفاصيل الزيارة</label>                                <textarea id="visit_detailes" name="visit_detailes"                                          class="form-control"><?= $visit_detailes ?></textarea>                            </div>                        </div>                        <div class="form-group col-md-3 text-center">                            <span style="color: red" id="span_id"></span><br>                            <!-- yaraa22-9 -->                            <?php                            $disabled = "";                            $span = "";                            ?>                            <button type="submit" class="btn btn-labeled btn-success " name="add_ezn"                                    value="add_ezn" id="add_ezn"                                <?= $disabled ?>                                    style="background-color: #3c990b;border-color: #12891b;padding-top: 0;padding-bottom: 0;border-radius:2px; ">                                <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                            </button>                            <span class="label label-danger"><?= $span ?></span>                            <!-- yaraa22-9 -->                        </div>                    </div>                    <?php                    echo form_close();                    ?>                </div>                <?php                if (!isset($_POST['from_profile'])) {                    ?>                    <div class="col-sm-2 padding-4">                        <div id="sidebar_emp"></div>                    </div>                <?php } ?>            </div>        </div>    </div>    <div class="modal fade" id="myModal_emps" tabindex="-1" role="dialog"         aria-labelledby="myModalLabel">        <div class="modal-dialog" role="document" style="width: 80%">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" id="myModalLabel"></h4>                </div>                <div class="modal-body">                    <div id="myDiv_emp"></div>                </div>                <div class="modal-footer" style="display: inline-block;width: 100%">                    <button type="button" class="btn btn-danger"                            style="float: left;" onclick="$('#myModal_emps').modal('hide')">إغلاق                    </button>                </div>            </div>        </div>    </div>    <!--26-10-20-om-->    <!-- settingModal  -->    <div class="modal fade" id="settingModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog" role="document" style="width: 80%">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal">&times;</button>                    <h4 class="modal-title title_setting "></h4>                </div>                <div class="modal-body">                    <div class="container-fluid" id="">                        <div class="col-sm-12 form-group">                            <div class="col-sm-12 form-group">                                <div class="col-sm-3  col-md-3 padding-4 ">                                    <button type="button" class="btn btn-labeled btn-success "                                            onclick="$('#add_input').show(); "                                            style="border-top-left-radius: 14px;border-bottom-right-radius: 14px;">                                        <span class="btn-label"><i class="glyphicon glyphicon-plus"></i></span>إضافة                                    </button>                                </div>                            </div>                            <div class="col-sm-12 no-padding form-group">                                <div id="add_input" style="display: none">                                    <div class="col-sm-3  col-md-5 padding-2 ">                                        <label class="label title_setting  "> </label>                                        <input type="text" onfocus="$('.add_title').hide();" name="name" id="add_title"                                               value=""                                               class="form-control">                                        <input type="hidden" name="row_setting_id" id="row_setting_id" value="">                                        <span class="add_title"                                              style="color: red; display: none;">هذا الحقل مطلوب</span>                                    </div>                                    <div class="col-sm-3  col-md-2 padding-4" id="div_add">                                        <button type="button"                                                onclick="add_setting($('#add_title').val(),'add_title','output'); "                                                style="    margin-top: 27px;"                                                class="btn btn-labeled btn-success" name="save" value="save">                                            <span class="btn-label"><i                                                        class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                                        </button>                                    </div>                                </div>                            </div>                            <br>                            <br>                        </div>                        <div id="setting_output">                        </div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">إغلاق</button>                </div>            </div>        </div>    </div>    <!-- settingModal  -->    <script>        function show_ezn_div(no3_ezn) {            if (no3_ezn == 1) {                $('#no3_ezn1').show('slow');                $('#no3_ezn2').hide('slow');            } else if (no3_ezn == 2) {                $('#no3_ezn2').show('slow');                $('#no3_ezn1').hide('slow');            }        }    </script>    <script>        function change_type_setting(id, title, title_fk, title_n) {            var edara_n = $('#edara_n').val();            $('.title_setting').text(title);            $('#type_setting').data('id', id);            $('#type_setting').data('title', title);            $('#type_setting').data('title_fk', title_fk);            $('#type_setting').data('title_n', title_n);            $('#type_setting').data('edara_n', edara_n);        }        function add_setting(value, title, div) {            var type = $('#type_setting').data("id");            var type_name = $('#type_setting').data("title");            var row_id = $('#row_setting_id').val();            var edara_id_fk = $('#edara_id_fk').val();            var edara_n = $('#edara_n').val();            if (value != 0 && value != '') {                $.ajax({                    type: 'post',                    url: '<?php echo base_url()?>human_resources/employee_forms/zeyara_report/Zeyara_report/add_setting',                    data: {                        value: value,                        type: type,                        type_name: type_name,                        row_id: row_id,                        edara_id_fk: edara_id_fk,                        edara_n: edara_n                    },                    dataType: 'html',                    cache: false,                    beforeSend: function (xhr) {                        swal({                            title: "جاري الحفظ ... ",                            text: "",                            imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                            showConfirmButton: false,                            allowOutsideClick: false                        });                    },                    success: function (html) {                        swal({                            title: 'تم الحفظ بنجاح',                            type: 'success',                            confirmButtonText: 'تم'                        });                        $('#' + title).val(' ');                        $('#row_setting_id').val('');                        $('#setting_output').html(html);                        // load_settigs();                    }                });            } else {                swal({                    title: 'من فضلك تأكد من الحقول الناقصه !',                    type: 'warning',                    confirmButtonText: 'تم'                });            }        }        function load_settigs() {            var type = $('#type_setting').data("id");            var type_name = $('#type_setting').data("title");            var edara_n = $('#edara_n').val();            var edara_id_fk = $('#edara_id_fk').val();            if (edara_n != '') {                $('#settingModal').modal('show');                $.ajax({                    type: 'post',                    url: '<?php echo base_url()?>human_resources/employee_forms/zeyara_report/Zeyara_report/load_settigs',                    data: {type: type, type_name: type_name, edara_n: edara_n, edara_id_fk: edara_id_fk},                    dataType: 'html',                    cache: false,                    beforeSend: function () {                        $('#setting_output').html(                            '<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>'                        );                    },                    success: function (html) {                        $('#setting_output').html(html);                    }                });            } else {                swal({                    title: 'من فضلك حدد الموظف اولا !',                    type: 'warning',                    confirmButtonText: 'تم'                });            }        }        function GetName(id, name) {            var title_fk = $('#type_setting').data("title_fk");            var title_n = $('#type_setting').data("title_n");            $('#' + title_fk).val(name);            $('#settingModal').modal('hide');        }    </script>    <!--<script type="text/javascript" src="-->    <?php //echo base_url() ?><!--asisst/admin_asset/js/jquery-1.10.1.min.js"></script>-->    <?php    if (isset($_POST['from_profile']) && (!empty($_POST['from_profile']))) { ?>        <script src="<?php echo base_url(); ?>asisst/admin_asset/js/mdtimepicker.js"></script>        <script src="<?php echo base_url() ?>asisst/admin_asset/js/tables/jquery.dataTables.min.js"></script>        <script src="<?php echo base_url() ?>asisst/admin_asset/js/jquery.form-validator.js"></script>    <?php } ?>    <script>        function GetDiv_emps(div) {            html = '<div class="col-md-12 no-padding"><table id="js_table_members2" class="table table-striped table-bordered dt-responsive nowrap " >' +                '<thead><tr class="info"><th style="width: 50px;">#</th><th style="width: 50px;"> أسم الموظف  </th>' +                '<th style="width: 170px;" >الأدارة   </th>' +                '<th style="width: 170px;" >القسم</th>' +                '</tr></thead><table><div id="dataMember"></div></div>';            $("#" + div).html(html);            $('#js_table_members2').show();            var oTable_usergroup = $('#js_table_members2').DataTable({                dom: 'Bfrtip',                "ajax": '<?php echo base_url(); ?>human_resources/employee_forms/all_ozonat/Ezn_order/getConnection_emp/',                aoColumns: [                    {"bSortable": true},                    {"bSortable": true},                    {"bSortable": true},                    {"bSortable": true}                ],                buttons: [                    'pageLength',                    'copy',                    'excelHtml5',                    {                        extend: "pdfHtml5",                        orientation: 'landscape'                    },                    {                        extend: 'print',                        exportOptions: {columns: ':visible'},                        orientation: 'landscape'                    },                    'colvis'                ],                colReorder: true,                destroy: true            });        }        //8-6-om        function Get_emp_Name(obj) {            console.log(' obj :' + obj.dataset.name + ': ');            var name = obj.dataset.name;            var emp_code = obj.dataset.emp_code;            var edara_id = obj.dataset.edara_id;            var edara_n = obj.dataset.edara_n;            var job_title = obj.dataset.job_title;            var qsm_id = obj.dataset.qsm_id;            var qsm_n = obj.dataset.qsm_n;            document.getElementById('emp_name').value = name;            document.getElementById('emp_id_fk').value = obj.value;            document.getElementById('emp_code').value = emp_code;            $('#emp_id_fk').val(obj.value);            check_ezn(obj.value);            get_emp_sidebar();            check_setting_time($('#emp_id_fk').val());            check_setting($('#emp_id_fk').val());            get_available();            document.getElementById('edara_n').value = edara_n;            document.getElementById('edara_id_fk').value = edara_id;            document.getElementById('job_title').value = job_title;            document.getElementById('qsm_n').value = qsm_n;            document.getElementById('qsm_id_fk').value = qsm_id;            $("#myModal_emps .close").click();        }    </script>    <script>        function check_ezn(emp_id) {            if (emp_id && !isNaN(emp_id)) {                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/all_ozonat/Ezn_order/check_ezn",                    data: {emp_id: emp_id},                    success: function (msg) {                        if (msg == 0) {                            console.warn("msg :: " + msg);                            swal({                                title: "تنبيه هام !  ",                                text: "يوجد لديك إذن سابق لم يتم إعتماده ",                                type: 'warning',                                confirmButtonText: "تم",                            }, function (is_confirm) {                                var update = $('#update').val();                                console.log(update);                                if (update == 0) {                                    // $('#add_ezn').attr('disabled', 'disabled');                                } else if (update == 1) {                                    $('#add_ezn').removeAttr('disabled');                                    $('#but').attr('disabled', 'disabled');                                }                            });                        } else if (msg == 1) {                            console.warn("msg :: " + msg);                            $('#add_ezn').removeAttr('disabled');                        } else {                            console.warn("msg :: " + msg);                            var obj = JSON.parse(msg);                            $('#vacation_start').val(obj.agaza_from_date_m);                            $('#vacation_end').val(obj.agaza_to_date_m);                            $('#add_ezn').removeAttr('disabled');                        }                    }                });            }        }    </script>    <script>        function get_emp_sidebar() {            var emp_id = $('#emp_id_fk').val();            if (emp_id && !isNaN(emp_id)) {                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/all_agazat/all_orders/Vacation/get_emp_data",                    data: {emp_id: emp_id},                    success: function (d) {                        $('#sidebar_emp').html(d);                    }                });            }        }        function get_available() {            var emp_id = $('#emp_id_fk').val();            var no3_ezn = $('#no3_ezn').val();            if (emp_id && !isNaN(emp_id) && no3_ezn == 1) {                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/all_ozonat/Ezn_order/get_available",                    data: {emp_id: emp_id},                    success: function (d) {                        var data = JSON.parse(d);                        $('#remain_hours').val(data.remain_hours);                        $('#remain_num').val(data.remain_num);                    }                });            }        }        window.addEventListener('load', function () {            console.log('document ready');            show_ezn_div();            get_emp_sidebar();            console.log('document ready');            check_ezn($('#emp_id_fk').val());            get_available();        });    </script>    <?php    if (!isset($_POST['from_profile'])) { ?>        <script>            window.addEventListener('load', function () {                /*                                $('#from_time').mdtimepicker(); //Initializes the time picker                */            });        </script>        <script>            window.addEventListener('load', function () {                /*                                $('#to_time').mdtimepicker(); //Initializes the time picker                */            });        </script>    <?php } ?>    <script>        function get_time() {            var start = $('#from_time').val();            var end = $('#to_time').val();            //  alert(start);            //  return;            if (start != '' && end != '') {                start = start.split(':');                end = end.split(':');                var startDate = new Date(0, 0, 0, start[0], start[1], start[2] ? start[2] : 0, 0);                var endDate = new Date(0, 0, 0, end[0], end[1], end[2] ? end[2] : 0, 0);                //for calculation to work if endtime cross over next day. Eg. 11pm to 2am                if (endDate.getTime() < startDate.getTime()) {                    endDate.setDate(endDate.getDate() + 1);                }                var diff = endDate.getTime() - startDate.getTime();                /*          var hours = Math.floor(diff / 1000 / 60 / 60);                          diff -= hours * 1000 * 60 * 60;              */                var minutes = Math.floor(diff / 1000 / 60);                /*              diff -= minutes * 1000 * 60;                              var seconds = Math.floor(diff / 1000);                              diff_munites= (hours < 9 ? "0" : "") + hours + ":" + (minutes < 9 ? "0" : "") + minutes + ":" + (seconds < 9 ? "0" : "") + seconds;              */                diff_munites = minutes;                // diff_munites = (diff * 60);                $('#num_hours').val(diff_munites);                if (diff_munites <= 0) {                    $('#num_hours').val(0);                    document.getElementById("add_ezn").disabled = true;                    document.getElementById("span_id").style.display = 'block';                    document.getElementById("span_id").innerText = 'من فضلك ادخل فترة زمنية صحيحة';                } else {                    document.getElementById("add_ezn").disabled = false;                    document.getElementById("span_id").style.display = 'none';                    check_setting_time($('#emp_id_fk').val());                }            }        }    </script>    <!-- yaraa22-9 -->    <!-- yarrraa script-->    <script>        var notify_no3_ezn;        function check_setting(emp_id) {            var no3_ezn = $('#no3_ezn').val();            var ezn_date = $('#ezn_date').val();            show_ezn_div(no3_ezn);            if (emp_id && !isNaN(emp_id) && no3_ezn == 1) {                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/all_ozonat/Ezn_order/check_setting",                    data: {emp_id: emp_id, no3_ezn: no3_ezn, ezn_date: ezn_date},                    beforeSend: function () {                        notify_no3_ezn = $.notify('<strong>جاري</strong> التحقق من عدد الاذونات...', {                            placement: {                                from: "top",                                align: "center"                            },                            offset: 20,                            spacing: 10,                            delay: 1000 * 15,                            z_index: 1031,                            allow_dismiss: false,                            showProgressbar: true                        });                    },                    success: function (msg) {                        if (msg >= 1) {                            console.warn("msg :: " + msg);                            notify_no3_ezn.update({                                'type': 'danger',                                'message': '<strong> تم تحقق </strong> لا يمكنك عمل طلب اذن نظرا لتجاوز عدد الاذونات عن الحد الاقص ',                                'progress': 80                            });                            // notify_no3_ezn.close();                            swal({                                title: " لا يمكنك عمل طلب اذن ",                                text: "  نظرا لتجاوز عدد الاذونات عن الحد الاقصي",                                type: 'warning',                                confirmButtonText: "تم",                            }, function (is_confirm) {                                $('#add_ezn').attr('disabled', 'disabled');                            });                        } else {                            console.warn("msg :: " + msg);                            notify_no3_ezn.update({                                'type': 'success',                                'message': '<strong> تم تحقق </strong>  من عدد الاذونات يمكنك عمل اذن ',                                'progress': 80                            });                            $('#add_ezn').removeAttr('disabled');                        }                    }                });            }        }    </script>    <!-- check_setting_time -->    <script>        var notify_time;        function check_setting_time(emp_id) {            var from_hour = $('#from_time').val();            var to_hour = $('#to_time').val();            var no3_ezn = $('#no3_ezn').val();            var ezn_date = $('#ezn_date').val();            if (emp_id && !isNaN(emp_id) && to_hour != '' && from_hour != '' && no3_ezn == 1) {                var num_hour = $('#num_hours').val();                // alert(num_hour);                $.ajax({                    type: 'post',                    url: "<?php echo base_url();?>human_resources/employee_forms/all_ozonat/Ezn_order/check_setting_time",                    data: {emp_id: emp_id, num_hours: num_hour, ezn_date: ezn_date},                    beforeSend: function () {                        notify_time = $.notify('<strong>جاري</strong> التحقق من  مدة الاذن...', {                            placement: {                                from: "top",                                align: "center"                            },                            offset: 20,                            spacing: 10,                            delay: 1000 * 15,                            z_index: 1031,                            allow_dismiss: false,                            showProgressbar: true                        });                    },                    success: function (msg) {                        if (parseInt(msg) >= 1) {                            console.warn("msg :: " + msg);                            notify_time.update({                                'type': 'danger',                                'message': '<strong> تم تحقق </strong> لا يمكنك عمل طلب اذن نظرا لتجاوز مدة الاذن عن الحد الاقصي للمدة المتاحه ',                                'progress': 80                            });                            swal({                                title: " لا يمكنك عمل طلب اذن ",                                text: "    نظرا لتجاوز مدة الاذن عن الحد الاقصي للمدة المتاحه ",                                type: 'warning',                                confirmButtonText: "تم",                            }, function (is_confirm) {                                $('#add_ezn').attr('disabled', 'disabled');                            });                        } else {                            notify_time.update({                                'type': 'success',                                'message': '<strong> تم تحقق </strong>  من مدة الاذن يمكنك عمل اذن ',                                'progress': 80                            });                            $('#add_ezn').removeAttr('disabled');                        }                    }                });            }        }    </script>    <!-- yaraa22-9 -->