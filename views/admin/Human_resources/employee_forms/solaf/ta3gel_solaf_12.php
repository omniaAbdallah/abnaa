<style type="text/css">    .print_forma {        /*border:1px solid #73b300;*/        padding: 15px;    }    .piece-box {        margin-bottom: 12px;        border: 1px solid #73b300;        display: inline-block;        width: 100%;    }    .piece-heading {        background-color: #9bbb59;        display: inline-block;        float: right;        width: 100%;    }    .piece-body {        width: 100%;        float: right;    }    .bordered-bottom {        border-bottom: 4px solid #9bbb59;    }    .piece-footer {        display: inline-block;        float: right;        width: 100%;        border-top: 1px solid #73b300;    }    .piece-heading h5 {        margin: 4px 0;        color: #fff;    }    .piece-box table {        margin-bottom: 0    }    .piece-box table th,    .piece-box table td {        padding: 2px 8px !important;    }    .piece-box h6 {        font-size: 16px;        margin-bottom: 5px;        margin-top: 5px;    }    .print_forma table th {        text-align: right;    }    .print_forma table tr th {        vertical-align: middle;    }    .no-padding {        padding: 0;    }    .header p {        margin: 0;    }    .header img {        height: 120px;        width: 100%    }    .main-title {        display: table;        text-align: center;        position: relative;        height: 120px;        width: 100%;    }    .main-title h4 {        display: table-cell;        vertical-align: bottom;        text-align: center;        width: 100%;    }    .print_forma hr {        border-top: 1px solid #73b300;        margin-top: 7px;        margin-bottom: 7px;    }    .no-border {        border: 0 !important;    }    .gray_background {        background-color: #eee;    }    @page {        size: A4;        margin: 20px 0 0;    }    .open_green {        background-color: #e6eed5;    }    .closed_green {        background-color: #cdddac;    }    .table-bordered > thead > tr > th,    .table-bordered > tbody > tr > th,    .table-bordered > tfoot > tr > th,    .table-bordered > thead > tr > td,    .table-bordered > tbody > tr > td,    .table-bordered > tfoot > tr > td {        border: 1px solid #abc572;        vertical-align: middle;    }    .under-line {        border-top: 1px solid #abc572;        padding-left: 0;        padding-right: 0;    }    span.valu {        padding-right: 10px;        font-weight: 600;        font-family: sans-serif;    }    .under-line .col-xs-3,    .under-line .col-xs-4,    .under-line .col-xs-6,    .under-line .col-xs-8 {        border-left: 1px solid #abc572;    }    .nonactive {        pointer-events: none;        cursor: not-allowed;    }    label {        margin-bottom: 5px !important;        color: #002542 !important;        display: block !important;        text-align: right !important;        font-size: 16px !important;        padding: 0 !important;        height: auto;    }    .right-calendar-icon {        width: 23px;        float: right;        position: absolute;        right: 10px;        top: 1px;    }    .left-calendar-icon {        width: 23px;        float: right;        position: absolute;        left: 10px;        top: 1px;    }    .personel-img {        position: relative;        overflow: hidden;        height: 200px;    }    .personel-img .front {        border: 2px solid #eee;        border-radius: 5px;    }    .personel-img .front img {        width: 100%;        height: 200px;    }    .personel-img .back {        position: absolute;        bottom: -200px;        opacity: 0;        background: rgba(0, 0, 0, 0.7);        width: 100%;        height: 100%;        transition: 0.3s all ease-in;        -webkit-transition: 0.3s all ease-in;        border: 2px solid #fcb632;    }    .personel-img:hover .back {        opacity: 1;        bottom: 0;    }    .personel-img .back i {        background-color: #fcb632;        color: #fff;        padding: 7px;        font-size: 34px;        border-radius: 50%;        margin: 47% 35%;    }    .personel-img .show-da {        position: relative;    }    .bond-heading {        background-color: #00713e;        color: #fff;        padding: 10px;        border-radius: 3px;    }    .bond-heading .bond-title {        margin: 0;    }    .bond-body {        padding: 10px;        border: 2px solid #ccc;        display: inline-block;        width: 100%;    }    .table-bordered.table-details tbody > tr > td {        font-size: 13px !important;        white-space: pre-line;    }    .check-style input[type=checkbox] + label {        line-height: 20px;    }    .box-register {        display: inline-block;        text-align: center;        border: 2px solid #999;        background-color: #fff;        border-radius: 13px;        box-shadow: 2px 2px 8px #eee;        min-width: 210px;        padding: 5px;    }    .box-register img {        width: 40px;        height: 40px;        float: right;        -webkit-transition: 0.3s all ease-in;        -moz-transition: 0.3s all ease-in;        transition: 0.3s all ease-in;    }    .box-register h5 {        font-family: h1;        font-size: 16px;        font-weight: bold;    }    .box-register:hover img {        -webkit-transform: rotate(360deg);        -moz-transform: rotate(360deg);        transform: rotate(360deg);    }    td .fa-print {        padding: 2px 7px;        background-color: white;        color: #080808;        border-radius: 11px;    }    td .fa-list {        padding: 3px 4px;    }</style><div class="col-md-12 no-padding">    <div class="col-md-12 col-sm-11 no-padding">        <div class="col-xs-12 padding-4">            <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable ">                <div class="panel-heading">                    <h3 class="panel-title">طلب تعجيل سلفة</h3>                </div>                <div id="dealies"></div>                <?php                /*                echo '<pre>';                print_r($rows);*/                /* if (isset($rows) && !empty($rows)) {                     $x = 1;                     foreach ($rows as $row) { ?>             <table class="table table-bordered " style="table-layout: fixed">                     <tbody>                     <tr>                         <td style="width: 105px;">                             <strong>رقم الطلب: </strong>                         </td>                         <td style="width: 10px;"><strong>:</strong></td>                         <td><?php echo $row->t_rkm; ?></td>                         <td style="width: 135px;"><strong> تاريخ الطلب</strong></td>                         <td style="width: 10px;"><strong>:</strong></td>                         <td><?php echo $row->t_rkm_date_m; ?></td>                         <td style="width: 150px;"><strong>اسم الموظف</strong></td>                         <td style="width: 10px;"><strong>:</strong></td>                         <td><?php echo $row->emp_name; ?></td>                     </tr>                     <tr>                         <td><strong>الرقم الوظيفي </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->emp_code_fk; ?></td>                         <td><strong>المسمى الوظيفي </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->mosma_wazefy_n; ?></td>                         <td><strong>الأدارة </strong></td>                         <td><strong>:</strong></td>                         <td><?= $row->edara_n;?></td>                     </tr>                     <tr>                         <td><strong>  القسم </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->qsm_n; ?></td>                         <td><strong>قيمه السلفه </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->qemt_solaf; ?></td>                         <td><strong> تاريخ بدايه الخصم</strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->khsm_form_date_m; ?></td>                     </tr>                     <tr>                         <td><strong>  عدد الاقساط </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->qst_num; ?></td>                         <td><strong>قيمه القسط </strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->qemt_solaf /$row->qst_num; ?></td>                         <td><strong> حد السلفة</strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->hd_solfa; ?></td>                     </tr>                     <tr>                         <td><strong> طريقه سداد السلفه </strong></td>                         <td><strong>:</strong></td>                         <td><?php if($row->sadad_solfa==1){echo 'دفع نقدا';}elseif($row->sadad_solfa==2){echo ' تخصم مره واحده علي الراتب';}                                 elseif($row->sadad_solfa==3){echo 'تخصم شهريا علي الراتب';}                                 ?>                         </td>                         <td><strong> تاريخ اخر سلفه</strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->previous_request_date_m; ?></td>                         <td><strong>سبب السلفه</strong></td>                         <td><strong>:</strong></td>                         <td><?php echo $row->solaf_reason; ?></td>                     </tr>                     </tbody>                 </table>                 <?php }                 } */ ?>            </div>        </div>        <div class="roundedBox">            <?php if ($_SESSION['role_id_fk'] == 1 || $_SESSION['role_id_fk'] == 3) { ?>            <div class="col-sm-12 no-padding ">                <?php                if (isset($items) && !empty($items)) {                    $rkm = $items->t_rkm;                    $t_rkm_date_m = $items->t_rkm_date_m;                    $fe2a_ta3gel = $items->fe2a_ta3gel;                    if ($fe2a_ta3gel == 2) {                        $from_bank_id_fk = $items->from_bank_id_fk;                        $from_bank_code = $items->from_bank_code;                        $from_bank_account_num = $items->from_bank_account_num;                        $to_bank_id_fk = $items->to_bank_id_fk;                        $to_bank_code = $items->to_bank_code;                        $to_bank_account_num = $items->to_bank_account_num;                    }                    $ta3gel_reason = $items->ta3gel_reason;                    $for_month = $items->for_month;                    $quest_val = $items->qemt_qst;                    $emp_id_fk = $items->emp_id_fk;                    $emp_code_fk = $items->emp_code_fk;                    $edara_id_fk = $items->edara_id_fk;                    $edara_n = $items->edara_n;                    $qsm_id_fk = $items->qsm_id_fk;                    $qsm_n = $items->qsm_n;                    $job_title = $items->job_title;                } else {                    $rkm = $last_rkm;                    $t_rkm_date_m = date('Y-m-d');                    $fe2a_ta3gel = '';                    //                    $from_bank_id_fk = '';                    $from_bank_code = '';                    $from_bank_account_num = '';                    $to_bank_id_fk = '';                    $to_bank_code = '';                    $to_bank_account_num = '';                    //                    $for_month = '';                    $ta3gel_reason = '';                    $emp_id_fk = '';                    $emp_name = '';                    $emp_id_fk = '';                    $emp_code_fk = '';                    $edara_id_fk = '';                    $edara_n = '';                    $qsm_id_fk = '';                    $qsm_n = '';                    $job_title = '';                    $quest_val = 0;                }                ?>                <div class="col-sm-12 no-padding">                    <?php                    /*                    echo '<pre>';                    print_r($items);*/                    if (isset($items) && !empty($items)){                    ?>                    <form action="<?php echo base_url() . 'human_resources/employee_forms/solaf/Solaf/edit_ta3gel_solaf/' . $items->id . '/' . $items->solfa_rkm; ?>"                          method="post" id="form1">                        <?php } else{ ?>                        <form action="<?php echo base_url(); ?>human_resources/employee_forms/solaf/Solaf/ta3gel_solaf"                              method="post" id="form1">                            <?php } ?>                            <input type="hidden" id="emp_id_fk" name="emp_id_fk"                                   value="<?php if (!empty($emp_data->id)) {                                       echo $emp_data->id;                                   } else {                                       echo $item->emp_id_fk;                                   } ?> ">                            <!--4-11-20-om-->                            <input type="hidden" id="solfa_rkm" name="solfa_rkm" value="<?php echo $item->t_rkm; ?> ">                            <!--4-11-20-om-->                            <input type="hidden" id="solfa_id" name="solfa_id" value="<?php echo $item->id; ?> ">                            <input type="hidden" id="edara_id_fk" name="edara_id_fk"                                   value="<?php if (!empty($emp_data->administration)) {                                       echo $emp_data->edara_n;                                   } else {                                       echo $item->edara_id_fk;                                   } ?>  ">                            <input type="hidden" id="qsm_id_fk" name="qsm_id_fk"                                   value="<?php if (!empty($emp_data->department)) {                                       echo $emp_data->qsm_n;                                   } else {                                       echo $item->qsm_id_fk;                                   } ?>  ">                            <?php $role = $_SESSION['role_id_fk']; ?>                            <div class="col-md-12 no-padding">                                <div class="form-group col-md-1 col-sm-6 col-xs-6 padding-4">                                    <label class="label "> رقم الطلب </label>                                    <input type="text" readonly="" name="t_rkm" id="t_rkm" value="<?= $rkm ?>"                                           data-validation="required" onkeypress="validate_number(event);"                                           class="form-control " onkeypress="validate_number(event);"                                           data-validation-has-keyup-event="true">                                </div>                                <div class="col-md-2  padding-4">                                    <label class="label ">تاريخ الطلب</label>                                    <input type="date" name="t_rkm_date_m" id="t_rkm_date_m"                                           value="<?= $t_rkm_date_m; ?>" class="form-control  "                                           data-validation="required" data-validation-has-keyup-event="true">                                </div>                                <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">                                    <label class="label ">اسم الموظف</label>                                    <input name="emp_name" id="emp_name" class="form-control"                                           style="width:86%; float: right;" readonly                                           value="<?php if (!empty($emp_data->employee)) {                                               echo $emp_data->employee;                                           } else {                                               echo $item->emp_name;                                           } ?>">                                    <button type="button" data-toggle="modal" data-target="#myModal_emps"                                            disabled class="btn btn-success btn-next" style="float: right;"                                            onclick="GetDiv_emps('myDiv_emp')" <?php if (!empty($emp_data->employee)) {                                        echo 'disabled';                                    } ?>>                                        <i class="fa fa-plus"></i></button>                                </div>                                <div class="form-group col-md-1 col-sm-6 col-xs-6 padding-4">                                    <label class="label "> الرقم الوظيفي</label>                                    <input name="emp_code_fk" id="emp_code" class="form-control"                                           value="<?php if (!empty($emp_data->emp_code)) {                                               echo $emp_data->emp_code;                                           } else {                                               echo $item->emp_code_fk;                                           } ?>" readonly>                                </div>                                <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">                                    <label class="label "> المسمى الوظيفي</label>                                    <input name="job_title" id="job_title" class="form-control"                                           value="<?php if (!empty($emp_data->job_title)) {                                               echo $emp_data->job_title;                                           } else {                                               echo $item->job_title;                                           }                                           ?>" readonly>                                </div>                                <div class="form-group col-md-2 col-sm-6 col-xs-6 padding-4">                                    <label class="label "> الأدارة </label>                                    <input style="padding-right: 0px !important;" name="edara_n" id="edara_n"                                           class="form-control"                                           value="<?php if (!empty($emp_data->administration_name)) {                                               echo $emp_data->administration_name;                                           } else {                                               echo $item->edara_n;                                           } ?>" readonly>                                </div>                                <div class="form-group col-md-3 col-sm-6 col-xs-6 padding-4">                                    <label class="label "> القسم</label>                                    <input name="qsm_n" id="qsm_n" class="form-control"                                           value="<?php if (!empty($emp_data->departments_name)) {                                               echo $emp_data->departments_name;                                           } else {                                               echo $item->qsm_n;                                           } ?>" readonly>                                </div>                                <div class="modal fade" id="myModal_emps" tabindex="-1" role="dialog"                                     aria-labelledby="myModalLabel">                                    <div class="modal-dialog" role="document" style="width: 80%">                                        <div class="modal-content">                                            <div class="modal-header">                                                <button type="button" class="close" data-dismiss="modal"                                                        aria-label="Close"><span aria-hidden="true">&times;</span>                                                </button>                                                <h4 class="modal-title" id="myModalLabel"></h4>                                            </div>                                            <div class="modal-body">                                                <div id="myDiv_emp"></div>                                            </div>                                            <div class="modal-footer" style="display: inline-block;width: 100%">                                                <button type="button" class="btn btn-danger" style="float: left;"                                                        data-dismiss="modal">إغلاق                                                </button>                                            </div>                                        </div>                                    </div>                                </div>                                <?php $arr = array(1 => 'نقدي   ', 2 => '  تحويل', 3 => '   خصم من الراتب'); ?>                                <div class="form-group col-md-3 col-sm-6 padding-4">                                    <label class="label "> طريقة السداد </label>                                    <select id="fe2a_ta3gel" name="fe2a_ta3gel" data-validation="required"                                            onchange="get_type(<?= $item->emp_id_fk ?>);"                                            class="form-control">                                        <option value="">إختر</option>                                        <?php                                        foreach ($arr as $key => $value) {                                            $select = '';                                            if ($fe2a_ta3gel != '') {                                                if ($key == $fe2a_ta3gel) {                                                    $select = 'selected';                                                }                                            } ?>                                            <option value="<?php echo $key; ?>" <?= $select ?>> <?php echo $value; ?>                                            </option>                                            <?php                                        }                                        ?>                                    </select>                                </div>                                <!-- <div class="form-group col-md-3 col-sm-6 padding-4">                                    <label class="label ">  عن شهر  </label>                                    <select id="for_month" name="for_month"   data-validation="required"                                            class="form-control">                                         <option value="">إختر</option>                                        <?php                                foreach ($quests as $record) {                                    $select = '';                                    if ($for_month != '') {                                        if ($record['month'] == $for_month) {                                            $select = 'selected';                                        }                                    } ?>                                            <option value="<?php echo $record['month'] ?>" <?= $select ?>> <?php echo $record['month'] ?>                                            </option>                                            <?php                                }                                ?>                                    </select>                                </div> -->                                <div class="form-group col-md-2 col-sm-6 padding-4">                                    <label class="label "> عن شهر </label>                                    <select id="for_month" name="for_month[]" multiple                                            data-validation="required"                                            title="يمكنك إختيار أكثر من شهر "                                            class="form-control selectpicker"                                            data-show-subtext="true"                                            onchange="get_qemt_qst(); get_value_sadad(<?php echo $item->qemt_solaf / $item->qst_num; ?>);"                                            data-live-search="true">                                        <?php                                        if (isset($quests) && (!empty($quests))) {                                            foreach ($quests as $key) {                                                $select = '';                                                $allFields = unserialize($for_month);                                                if (isset($allFields) && (!empty($allFields))) {                                                    if (in_array($key['id'], $allFields)) {                                                        $select = 'selected';                                                    }                                                }                                                ?>                                                <option value="<?php echo $key['id']; ?>" <?= $select ?>> <?php echo $key['month'].'-'.$key['year']; ?></option>                                            <?php }                                        } ?>                                    </select>                                </div>                                <div class="form-group col-md-2  col-sm-6 col-xs-6  padding-4">                                    <label class="label "> قيمه السداد </label>                                    <input type="number" name="qemt_qst" id="quest_val"                                           readonly                                           value="<?= $quest_val; ?>" class="form-control " data-validation="required"                                           onkeypress="validate_number(event);" data-validation-has-keyup-event="true">                                </div>                                <div class="form-group col-md-5  col-sm-6 col-xs-6  padding-4">                                    <label class="label "> سبب التعجيل </label>                                    <input type="text" id="ta3gel_reason" name="ta3gel_reason"                                           data-validation="required"                                           value="<?= $ta3gel_reason; ?>" class="form-control "                                           data-validation-has-keyup-event="true">                                </div>                            </div>                            <!-- fe2a_ta3gell -->                            <div class="col-xs-12 " id="fe2a_ta3gell">                            </div>                            <!-- fe2a_ta3gell -->                            <?php                            if ($fe2a_ta3gel == 2) {                                ?>                                <table class=" table table-bordered table-striped" style="table-layout: fixed">                                    <thead>                                    <tr class="open_green">                                        <th colspan="3" class="text-center">من</th>                                        <th colspan="3" class="text-center">الي</th>                                    </tr>                                    <tr>                                        <th rowspan="2">اسم البنك</th>                                        <th rowspan="2">كود البنك</th>                                        <th rowspan="2">رقم الحساب</th>                                        <th rowspan="2">اسم البنك</th>                                        <th rowspan="2">كود البنك</th>                                        <th rowspan="2">رقم الحساب</th>                                    </tr>                                    </thead>                                    <tbody>                                    <tr>                                        <!-- total -->                                        <!-- num1 -->                                        <td>                                            <select name="from_bank_id_fk" id="from_bank_id_fk"                                                    data-validation="required" aria-required="true" disabled                                                    class="form-control ">                                                <option value="">إختر</option>                                                <?php                                                if (isset($banks) && $banks != null) {                                                    foreach ($banks as $bank) {                                                        $select = '';                                                        if ($bank->id == $from_bank_id_fk) {                                                            $select = 'selected';                                                        }                                                        ?>                                                        <option bank_code='<?= $bank->bank_code ?>'                                                                value="<?= $bank->id ?>" <?= $select ?>><?= $bank->ar_name ?></option>                                                        <?php                                                    }                                                }                                                ?>                                            </select>                                        </td>                                        <td>                                            <input type="text" class="form-control  " name="from_bank_code"                                                   id="from_bank_code" value="<?= $from_bank_code ?>" readonly/>                                        </td>                                        <td>                                            <input type="text" class="form-control  " maxlength="24" minlength="24"                                                   class="form-control bottom-input" name="from_bank_account_num"                                                   id="from_bank_account_num" data-validation="required"                                                   readonly                                                   value="<?= $from_bank_account_num ?>"/>                                        </td>                                        <!-- num1 -->                                        <!-- num2 -->                                        <td>                                            <select name="to_bank_id_fk" id="to_bank_id_fk"                                                    data-validation="required" aria-required="true"                                                    onchange="$('#to_bank_code').val($(this).find('option:selected').attr('bank_code'))"                                                    class="form-control ">                                                <option value="">إختر</option>                                                <?php                                                if (isset($banks) && $banks != null) {                                                    foreach ($banks as $bank) {                                                        $select = '';                                                        if ($bank->id == $to_bank_id_fk) {                                                            $select = 'selected';                                                        }                                                        ?>                                                        <option bank_code='<?= $bank->bank_code ?>'                                                                value="<?= $bank->id ?>" <?= $select ?>><?= $bank->ar_name ?></option>                                                        <?php                                                    }                                                }                                                ?>                                            </select>                                        </td>                                        <td>                                            <input type="text" class="form-control  " name="to_bank_code"                                                   id="to_bank_code" value="<?= $to_bank_code ?>" readonly/>                                        </td>                                        <td>                                            <input type="text" class="form-control  " maxlength="24" minlength="24"                                                   class="form-control bottom-input" name="to_bank_account_num"                                                   id="to_bank_account_num" data-validation="required"                                                   onfocusout="checkLength($(this).val());"                                                   value="<?= $to_bank_account_num ?>"/>                                        </td>                                        <!-- num2 -->                                    </tr>                                    </tbody>                                    <tfoot class="open_green">                                    </tfoot>                                </table>                            <?php }                            ?>                            <div class="col-xs-12 text-center" style="margin-top: 15px">                                <input type="hidden" name="add" value="add">                                <button type="submit" class="btn btn-labeled btn-success " id="reg" name="add"                                        value="حفظ"                                        style="background-color: #3c990b;border-color: #12891b;padding-top: 0;padding-bottom: 0;border-radius:2px; ">                                    <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                                </button>                                <div id="reggi_">                                </div>                            </div>                        </form>                </div>                <div class="col-sm-2 padding-4">                    <div id="sidebar_emp"></div>                </div>            </div>        </div>    </div></div><?php// echo '<pre>';//  print_r($records);if (isset($records) && !empty($records) && $records != '') {    ?>    <div class="col-sm-12 no-padding ">        <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable ">            <div class="panel-heading">                <h3 class="panel-title"><?php echo $title; ?></h3>            </div>            <table id="example" class=" display table table-bordered   responsive nowrap" cellspacing="0" width="100%">                <thead>                <tr class="greentd">                    <th style="width: 25px;">م</th>                    <th style="width: 60px;">رقم الطلب</th>                    <th style="width: 85px;">تاريخ الطلب</th>                    <th style="width: 200px;">إسم الموظف</th>                    <th style="width: 140px;">                        طريقة السداد                    </th>                    <th style="width: 75px;"> التعجيل لشهر</th>                    <th> الاجراء</th>                    <th> حالة الطلب</th>                </tr>                </thead>                <tbody>                <?php                if (isset($records) && !empty($record)) {                    $x = 1;                    foreach ($records as $row) {                        $link_update = 'window.location="' . base_url() . 'human_resources/employee_forms/solaf/Solaf/edit_ta3gel_solaf/' . $row->id . '/' . $row->solfa_rkm . '";';                        $link_delete = 0;                        if ($row->suspend == 0) {                            $halet_eltalab = 'جاري ';                            $halet_eltalab_class = 'warning';                        } elseif ($row->suspend == 1) {                            $halet_eltalab = 'تم قبول الطلب ';                            $halet_eltalab_class = 'success';                        } elseif ($row->suspend == 2) {                            $halet_eltalab = 'تم رفض الطلب ';                            $halet_eltalab_class = 'danger';                        } else {                            $halet_eltalab = 'غير محدد ';                            $halet_eltalab_class = 'danger';                        }                        // echo '<pre>'; print_r($row->t_rkm);                        ?>                        <tr>                            <td><?php echo $x; ?></td>                            <td><?php echo $row->t_rkm; ?></td>                            <td><?php echo $row->t_rkm_date_m; ?></td>                            <td><?php echo $row->emp_name; ?></td>                            <td><?php if ($row->fe2a_ta3gel == 1) {                                    echo ' نقدي ';                                } elseif ($row->fe2a_ta3gel == 2) {                                    echo '  تحويل';                                } elseif ($row->fe2a_ta3gel == 3) {                                    echo 'خصم من الراتب';                                }                                ?></td>                            <td>                                <?php                                /*echo  '<pre>';                                print_r($quests);                                echo '</pre>';                                echo  '<pre>';                                print_r(unserialize($row->for_month));                                echo '</pre>';*/                                if (isset($quests) && (!empty($quests))) {                                    foreach ($quests as $key) {                                        $allFields = unserialize($row->for_month);                                        if (isset($allFields) && (!empty($allFields))) {                                            if (in_array($key['id'], $allFields)) {                                                echo $key['month'].'-'.$key['year'];                                                echo ',';                                            }                                        }                                    }                                }                                ?>                            </td>                            <td>                                <a class="option_td<?= $row->id ?>" onclick='swal({                                        title: "هل انت متأكد من التعديل ؟",                                        text: "",                                        type: "warning",                                        showCancelButton: true,                                        confirmButtonClass: "btn-warning",                                        confirmButtonText: "تعديل",                                        cancelButtonText: "إلغاء",                                        closeOnConfirm: true                                        },                                        function(){                                <?= $link_update ?>                                        });'>                                    <i class="fa fa-pencil"> </i></a>                                <a class="option_td<?= $row->id ?>" onclick=' swal({                                        title: "هل انت متأكد من الحذف ؟",                                        text: "",                                        type: "warning",                                        showCancelButton: true,                                        confirmButtonClass: "btn-danger",                                        confirmButtonText: "حذف",                                        cancelButtonText: "إلغاء",                                        closeOnConfirm: false                                        },                                        function(){                                        swal("تم الحذف!", "", "success");                                        setTimeout(function(){window.location="<?= base_url() . 'human_resources/employee_forms/solaf/Solaf/delete_ta3gel_solfa/' . $row->id . '/' . $row->solfa_rkm ?>";}, 500);                                        });'>                                    <i class="fa fa-trash"> </i></a>                                <!-- <?php if (!empty($row->suspend)) {                                    $text_trans = 'تم تحويل الطلب';                                    $trans_diapled = 'none';                                } else {                                    $text_trans = ' أعتماد الطلب';                                    $trans_diapled = '';                                } ?>                                        <a onclick="make_transformation_direct(<?= $row->solfa_rkm ?>,<?= $row->fe2a_ta3gel ?>,<?= $row->for_month ?>,<?= $row->qemt_qst ?>,<?= $row->emp_code_fk ?>)"                                       class="btn btn-warning option_td<?= $row->id ?> "                                       id="transform_direct<?= $row->id ?>" style="display:<?= $trans_diapled ?>">                                        <?= $text_trans ?></a> -->                            </td>                            <td>                        <span class="label label-<?php echo $halet_eltalab_class ?>" style="min-width: 140px;">                            <?php echo $halet_eltalab; ?>                        </span>                            </td>                        </tr>                        <?php                        $x++;                    }                }                ?>                </tbody>            </table>        </div>    </div><?php } ?><!--------------------------------------------------------modal------------------------------------><?php } ?><script type="text/javascript" src="<?php echo base_url() ?>asisst/admin_asset/js/jquery-1.10.1.min.js"></script><?php if (!empty($emp_data)) { ?>    <script>        $(document).ready(function () {            get_had_solfa( <?= $emp_data->id ?> );            get_num_solf( <?= $emp_data->id ?> );            get_suspend_solf( <?= $emp_data->id ?> );        });    </script><?php } ?><script>    function report_order(row_id) {        var request = $.ajax({            // print_resrv -- print_contract            url: "<?=base_url() . 'human_resources/employee_forms/solaf/Solaf/get_solfa_order'?>",            type: "POST",            data: {                rkm: row_id            },        });        request.done(function (msg) {            var WinPrint = window.open('', '', 'width=800,height=700,toolbar=0,scrollbars=0,status=0');            WinPrint.document.write(msg);            WinPrint.document.close();            WinPrint.focus();            /*  WinPrint.print();             WinPrint.close();*/        });        request.fail(function (jqXHR, textStatus) {            console.log("Request failed: " + textStatus);        });    }</script><script>    function GetDiv_emps(div) {        html =            '<div class="col-md-12 no-padding"><table id="js_table_members2" class="table table-striped table-bordered dt-responsive nowrap " >' +            '<thead><tr class="info"><th style="width: 50px;">#</th><th style="width: 50px;"> أسم الموظف  </th>' +            '<th style="width: 170px;" >الأدارة   </th>' +            '<th style="width: 170px;" >القسم</th>' +            '</tr></thead><table><div id="dataMember"></div></div>';        $("#" + div).html(html);        $('#js_table_members2').show();        var oTable_usergroup = $('#js_table_members2').DataTable({            dom: 'Bfrtip',            "ajax": '<?php echo base_url(); ?>human_resources/employee_forms/solaf/Solaf/getConnection_emp/',            aoColumns: [{                "bSortable": true            },                {                    "bSortable": true                },                {                    "bSortable": true                },                {                    "bSortable": true                }            ],            buttons: [                'pageLength',                'copy',                'excelHtml5',                {                    extend: "pdfHtml5",                    orientation: 'landscape'                },                {                    extend: 'print',                    exportOptions: {                        columns: ':visible'                    },                    orientation: 'landscape'                },                'colvis'            ],            colReorder: true,            destroy: true        });    }    //8-6-om    function Get_emp_Name(obj) {        console.log(' obj :' + obj.dataset.name + ': ');        var name = obj.dataset.name;        var emp_code = obj.dataset.emp_code;        var edara_id = obj.dataset.edara_id;        var edara_n = obj.dataset.edara_n;        var job_title = obj.dataset.job_title;        var qsm_id = obj.dataset.qsm_id;        var qsm_n = obj.dataset.qsm_n;        var id = obj.dataset.id;        get_had_solfa_new(id);        document.getElementById('emp_name').value = name;        document.getElementById('emp_id_fk').value = obj.value;        document.getElementById('emp_code').value = emp_code;        $('#emp_id_fk').val(obj.value);        get_had_solfa(obj.value);        get_num_solf(obj.value);        get_suspend_solf(obj.value);        document.getElementById('edara_n').value = edara_n;        document.getElementById('edara_id_fk').value = edara_id;        document.getElementById('job_title').value = job_title;        document.getElementById('qsm_n').value = qsm_n;        document.getElementById('qsm_id_fk').value = qsm_id;        $("#myModal_emps .close").click();    }</script><script>    function get_suspend_solf(emp_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_suspend_solf",            data: {                emp_id: emp_id            },            success: function (msg) {                var obj = JSON.parse(msg);                if (obj == 1) {                  //  document.getElementById("reg").setAttribute("disabled", "disabled");                    $("#reggi").append("<span  class='label-danger'> عذرا...  لا يمكنك  طلب سلفه نظرا  لوجود سلفه لم يتم انتهاء اقساطها         </span>");                } else if (obj == 0) {                    document.getElementById("reg").removeAttribute("disabled", "disabled");                    $("#reggi").html('');                }            }        });    }    function get_num_solf(emp_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_num_solf",            data: {                emp_id: emp_id            },            success: function (msg) {                var obj = JSON.parse(msg);                $('#num_previous_requests').val(obj.num_solf);                $('#previous_request_date_m').val(obj.last_date);            }        });    }    function get_had_solfa(emp_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_had_solfa",            data: {                emp_id: emp_id            },            success: function (d) {                //  $('#hd_solfa').val(d);            }        });    }    function make_transformation_direct(solf_id, fe2a, month, qemt_qst, emp_code_fk) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/make_ta3gel_transformation_direct",            data: {                solf_id: solf_id,                fe2a: fe2a,                month: month,                qemt_qst: qemt_qst,                emp_code_fk: emp_code_fk            },            beforeSend: function () {                swal({                    title: "جاري التحويل",                    text: "",                    imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                    confirmButtonText: "تم"                });            },            success: function (d) {                if (d == 1) {                    swal({                        title: "تم التحويل",                        text: "",                        type: "success",                        confirmButtonText: "تم"                    });                    $('#transform_direct' + solf_id).text('تم التحويل');                    $(".option_td" + solf_id).hide();                }            }        });    }</script><script>    function get_solfa_details(valu) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_solaf_details",            data: {                rkm: valu            },            success: function (d) {                $('#details').html(d);            }        });    }</script><script>    function print_order(row_id) {        var request = $.ajax({            // print_resrv -- print_contract            url: "<?=base_url() . 'human_resources/employee_forms/solaf/Solaf/get_solfa_print'?>",            type: "POST",            data: {                rkm: row_id            },        });        request.done(function (msg) {            var WinPrint = window.open('', '', 'width=800,height=700,toolbar=0,scrollbars=0,status=0');            WinPrint.document.write(msg);            WinPrint.document.close();            WinPrint.focus();            /*  WinPrint.print();             WinPrint.close();*/        });        request.fail(function (jqXHR, textStatus) {            console.log("Request failed: " + textStatus);        });    }</script><script>    function GetType() {        var valu = $('#sadad_solfa').val();        console.log(valu);        if (valu) {            if (valu == 1) {                document.getElementById("qst_num").value = 1;                document.getElementById("qst_num").setAttribute("readonly", "readonly");                document.getElementById("quest_val").value = document.getElementById("qemt_solaf").value;                document.getElementById("quest_val").removeAttribute("readonly", "readonly");                var today = new Date();                Getdate(today);            } else if (valu == 2) {                document.getElementById("qst_num").value = 1;                document.getElementById("qst_num").setAttribute("readonly", "readonly");                document.getElementById("quest_val").value = document.getElementById("qemt_solaf").value;                document.getElementById("quest_val").setAttribute("readonly", "readonly");                var today = new Date();                Getdate(today);            } else {                document.getElementById("qst_num").value = '';                document.getElementById("qst_num").removeAttribute("readonly", "readonly");                document.getElementById("quest_val").removeAttribute("readonly", "readonly");            }        }    }</script><script>    function Getdiv() {        if (document.getElementById("qst_num").value) {            console.log(document.getElementById("qemt_solaf").value);            console.log(document.getElementById("qst_num").value);            document.getElementById("quest_val").removeAttribute("readonly", "readonly");            document.getElementById("quest_val").value = Math.round((document.getElementById("qemt_solaf").value / document                .getElementById("qst_num").value) * 100) / 100;            document.getElementById("quest_val").setAttribute("readonly", "readonly");            var today = new Date();            Getdate(today);        }    }</script><script>    function Getdate(valu) {        console.warn('valu :: ' + valu);        var y = document.getElementById("qst_num").value;        console.log('qst_num : ' + y);        y = parseInt(y);        var d = new Date(valu);        console.log('new Date ::' + d.toLocaleDateString());        d.setMonth(d.getMonth() + y);        console.log('new Date 2  ::' + d.toLocaleDateString());        // var str = $.datepicker.formatDate('yy-mm-dd', d.toLocaleDateString());        var date = d.toLocaleDateString();        function formatDate(date) {            var d = new Date(date),                month = '' + (d.getMonth() + 1),                day = '' + d.getDate(),                year = d.getFullYear();            if (month.length < 2) month = '0' + month;            if (day.length < 2) day = '0' + day;            return [year, month, day].join('-');        }        date = formatDate(date);        console.warn('date :: ' + date);        document.getElementById("khsm_to_date_m").value = date;        //document.getElementById("khsm_to_date_m").setAttribute("disabled", "disabled");    }</script><script>    function get_details() {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_details",            success: function (d) {                $('#details').html(d);            }        });    }</script><script>    function get_details_dbt() {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_details_dbt",            success: function (d) {                $('#details_dbt').html(d);            }        });    }</script><script>    function get_details_doc() {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_details_doc",            success: function (d) {                $('#details_doc').html(d);            }        });    }</script><script>    function get_details_exp() {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_details_exp",            success: function (d) {                $('#details_exp').html(d);            }        });    }</script><script>    function Getdiv_quest(had_quest) {        console.log(had_quest);        console.log(document.getElementById("qst_num").value);        if (document.getElementById("qst_num").value <= had_quest) {            console.log(document.getElementById("qemt_solaf").value);            console.log(document.getElementById("qst_num").value);            document.getElementById("quest_val").removeAttribute("readonly", "readonly");            var new_value = Math.round((document.getElementById("qemt_solaf").value / document                .getElementById("qst_num").value) * 100) / 100;            if (!isNaN(parseInt(document.getElementById("qst_num").value))) {                document.getElementById("quest_val").value = new_value;            } else {                document.getElementById("quest_val").value = '';            }            document.getElementById("quest_val").setAttribute("readonly", "readonly");            var today = new Date();            Getdate(today);        } else {            swal({                title: "   يجب ان يكون عدد الاقساط اقل من  	أقصي مدة سداد! ",                type: "warning",                confirmButtonClass: "btn-warning",                closeOnConfirm: false            });            document.getElementById("quest_val").value = '';            document.getElementById("qst_num").value = '';        }    }</script><?phpif (isset($_POST['from_profile']) && (!empty($_POST['from_profile']))) { ?>    <script src="<?php echo base_url() ?>asisst/admin_asset/js/tables/jquery.dataTables.min.js"></script>    <script src="<?php echo base_url() ?>asisst/admin_asset/js/jquery.form-validator.js"></script>    <script>        $('#example').DataTable({            dom: 'Bfrtip',            buttons: [                'pageLength',                'copy',                'csv',                'excelHtml5',                {                    extend: "pdfHtml5",                    orientation: 'landscape'                },                {                    extend: 'print',                    exportOptions: {                        columns: ':visible'                    },                    orientation: 'landscape'                },                'colvis'            ],            colReorder: true,        });    </script><?php } ?><script>    function get_had_solfa_new(emp_id) {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_had_solfa_new",            data: {                emp_id: emp_id            },            success: function (d) {                $('#hd_solfa').val(d);            }        });    }</script><script>    function get_type(emp_id) {        var fe2a_ta3gel = $('#fe2a_ta3gel').val();        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_fe2a_ta3gel",            data: {                fe2a_ta3gel: fe2a_ta3gel,                emp_id: emp_id            },            success: function (d) {                $('#fe2a_ta3gell').html(d);            }        });    }</script><script>    $('.selectpicker').selectpicker("refresh");</script><script>    var notify;    function get_qemt_qst() {        var solfa_rkm = $('#solfa_rkm').val();        var month=$('#for_month').val();        if (month) {            $.ajax({                type: 'post',                url: '<?php echo base_url() ?>human_resources/employee_forms/solaf/Solaf/get_many_qemt_qst',                data: {solfa_rkm: solfa_rkm, month: month},                dataType: 'html',                cache: false,                beforeSend: function () {                    $.notifyClose();                    notify = $.notify('<strong>جاري</strong> التحقق من قيمة القسط...', {                        placement: {                            from: "top",                            align: "center"                        },                        offset: 20,                        spacing: 10,                        delay: 1000 * 15,                        z_index: 1031,                        allow_dismiss: false,                        showProgressbar: true                    });                },                success: function (html) {                    var qemt_qst = JSON.parse(html).qemt_qst;                    $('#quest_val').val(qemt_qst);                    notify.update({                        'type': 'success',                        'message': '<strong> تم تحقق </strong>  من قيمة القسط ',                        'progress': 80                    });                }            });        }    }    function get_value_sadad(value) {       /* var x = $('#quest_val').val();        if ((x == 0) || (x == value)) {            console.log("x:" + x);            console.log("value:" + value);            var res = parseInt(x) + parseInt(value);            $('#quest_val').val(res);        } else {            console.log("x:" + x);            console.log("value:" + value);            var res = x - value;            $('#quest_val').val(res);            console.log("res:" + res);        }*/    }</script><!--4-11-om--><script>    function get_all_detailes_solfa() {        var solfa_rkm=$('#solfa_rkm').val();        $.ajax({            type: 'post',            url: "<?php echo base_url();?>human_resources/employee_forms/solaf/Solaf/get_all_detailes_solfa",            data: {rkm_solfa: solfa_rkm, type_detailes: 1},            beforeSend: function () {                $('#dealies').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#dealies').html(d);            }        });    }    document.addEventListener('DOMContentLoaded', function () {        get_all_detailes_solfa();    });</script>