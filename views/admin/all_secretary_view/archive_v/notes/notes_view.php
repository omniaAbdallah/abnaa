<?php if (isset($from_profile) && ($from_profile == 0)) { ?><div class="col-xs-12 col-md-12">    <div class="panel panel-bd">        <!-- Nav tabs -->        <ul class="nav nav-tabs" role="tablist">            <li role="presentation" class="active"><a href="#add_notes" aria-controls="main-detailsfa" role="tab"                                                      data-toggle="tab">                    <i class="fa fa-clock-o" style=""></i>                    اضافة حدث او ملاحظة </a></li>            <li role="presentation"><a href="#notes" aria-controls="general-detailsfa" role="tab" data-toggle="tab"> <i                            class="fa fa-check-square-o" style=""></i> الأحداث والملاحظات</a></li>            <li role="presentation"><a href="#my_notes" aria-controls="general-detailsfa" role="tab" data-toggle="tab">                    <i class="fa fa-check-square-o" style=""></i> الأحداث والملاحظات القادمه </a></li>        </ul>        <!-- Tab panes -->        <div class="tab-content">            <div role="tabpanel" class="tab-pane fade in active" id="add_notes">                <?php } ?>                <div class="col-xs-12">                    <?php                    echo form_open_multipart('all_secretary/archive/notes/Notes/insert_notes');                    $config = array();                    $config['zoom'] = "auto";                    $marker = array();                    $marker['draggable'] = true;                    $marker['ondragend'] = '$("#lat").val(event.latLng.lat());$("#lng").val(event.latLng.lng());';                    $config['onboundschanged'] = '  if (!centreGot) {                                                var mapCentre = map.getCenter();                                                marker_0.setOptions({                                                    position: new google.maps.LatLng(mapCentre.lat(), mapCentre.lng())                                                });                                                $("#lat").val(mapCentre.lat());                                                $("#lng").val(mapCentre.lng());                                            }                                            centreGot = true;';                    $config['geocodeCaching'] = TRUE;                    $center = '27.517571447136426,41.71273613027347';                    $config['center'] = $center;                    $this->google_maps->initialize($config);                    $this->google_maps->add_marker($marker);                    $data['maps'] = $this->google_maps->create_map();                    ?> <?php if (isset($_POST['from_profile']) && (!empty($_POST['from_profile']))) { ?>                        <input type="hidden" name="from_profile" value="1"/>                    <?php } ?>                    <div class="form-group col-md-4 col-sm-2 col-xs-12 padding-4">                        <input type="hidden" id="row_id" name="row_id" value="">                        <label class="label"> النوع </label>                        <div class="radio-content">                            <input type="radio" id="type_sarf1" name="type" class="sarf_types" value="1" data-validation="required">                            <label for="type_sarf1" class="radio-label  " style="color: #ffc751;">ملاحظة </label>                        </div>                        <div class="radio-content">                            <input type="radio" id="type_sarf2" name="type" class="sarf_types" value="2" data-validation="required">                            <label for="type_sarf2" class="radio-label" style="color: #50ab20;">موعد </label>                        </div>                        <div class="radio-content">                            <input type="radio" id="type_sarf3" name="type" class="sarf_types" value="3" data-validation="required">                            <label for="type_sarf3" class="radio-label" style="color: #E5343D;"> حدث</label>                        </div>                        <div class="radio-content">                            <input type="radio" data-validation="required" id="type_sarf4" name="type" class="sarf_types" value="4">                            <label for="type_sarf4" class="radio-label" style="color: #3a87ad">مهمة</label>                        </div>                    </div>                    <div class="form-group col-md-3 col-sm-2 col-xs-12 padding-4">                        <label class="label"> التصنيف </label>                        <input type="text" class="form-control  testButton inputclass" name="tasnef_n" id="tasnef_n" readonly="readonly"                               onclick="$('#tasnefModal').modal('show');get_details_tasnef();" style="cursor:pointer;border: white;color: black;width: 80%;float: right;" data-validation="required" value="">                        <input type="hidden" name="tasnef" id="tasnef" value="">                        <button type="button" onclick="$('#tasnefModal').modal('show');get_details_tasnef();" class="btn btn-success btn-next">                            <i class="fa fa-plus"></i></button>                    </div>                    <div class="form-group col-md-3 col-sm-2 col-xs-12 padding-4">                        <label class="label"> التاريخ (من , إلى ) </label>                        <input type="date" id="from_date" name="from_date" data-validation="required" style="width: 50%;float: right" value="<?= date('Y-m-d') ?>" class="form-control">                        <input type="date" id="to_date" name="to_date" data-validation="required" style="width: 50%" class="form-control" value="<?php $tomorrow = new DateTime('tomorrow'); echo $tomorrow->format('Y-m-d'); ?>">                    </div>                    <div class="form-group col-md-2 col-sm-2 col-xs-12 padding-4">                        <label class="label"> الوقت (من , إلى ) </label>                        <input type="text" id="from_time" name="from_time" style="width: 50%;float: right"                               data-validation="required" value="" class="form-control">                        <input type="text" id="to_time" name="to_time" style="width: 50%" data-validation="required"                               value="" class="form-control">                    </div>                    <div class="form-group col-md-1 col-sm-2 col-xs-12 padding-4">                        <label class="label"> التكرار </label>                        <?php $repetition_type = array('1' => 'لا', '2' => 'يوميا' ,"3"=>"أسبوعا","4"=>"شهريا","5"=>"سنوية"); ?>                        <select class="form-control" name="repetition_type" data-validation="required" id="repetition_type"                                onchange="get_disable();">                            <?php foreach ($repetition_type as $key => $value) { ?>                                <option value="<?= $key ?>"><?= $value ?></option>                            <?php } ?>                        </select>                    </div>                    <div class="form-group col-md-1 col-sm-2 col-xs-12 padding-4">                        <label class="label">  التذكير </label>                        <?php $alarm_arr = array('1' => 'بدون', '2' => 'وقت البدء', '3' => 'قبل 5 دقائق',"4"=>"قبل 10 دقائق","5"=>"قبل 15 دقائق","6"=>"قبل 30 دقائق","7"=>"قبل ساعة ","8"=>"قبل 2 ساعة ","9"=>"قبل يوم ","10"=>"قبل 2 يوم ","11"=>"قبل اسوع "); ?>                        <select class="form-control" name="alarm_period" data-validation="required" id="alarm_period">                            <?php foreach ($alarm_arr as $key => $value) { ?>                                <option value="<?= $key ?>-<?= $value ?>"><?= $value ?></option>                            <?php } ?>                        </select>                    </div>                    <div class="form-group col-md-1 col-sm-2 col-xs-12 padding-4">                        <label class="label">  الفئة </label>                        <?php $fa2_arr = array('1' => 'عام', '2' => 'خاص'); ?>                        <select class="form-control" name="fa2" data-validation="required" id="fa2">                            <?php foreach ($fa2_arr as $key => $value) { ?>                                <option value="<?= $key ?>"><?= $value ?></option>                            <?php } ?>                        </select>                    </div>                    <div class="form-group col-md-5 col-sm-2 col-xs-12 padding-4">                        <label class="label"> التفاصيل </label>                        <input name="details" class="form-control" data-validation="required" id="details" >                    </div>                    <div class="form-group col-md-3 col-sm-2 col-xs-12 padding-4">                        <label class="label"> المرفق </label>                        <input type="file" name="note_file" accept="application/pdf, image/*" class="form-control"  id="note_file">                    </div>                    <div class="col-md-12">                        <button class="btn btn-labeled btn-warning" role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample" style="color: #000;">                            <span class="btn-label"><i class=" glyphicon glyphicon-map-marker"></i></span> الموقع على                            الخريطة                        </button>                        <div class="collapse" id="collapseExample">                            <input type="hidden" name="map_google_lng" id="lng" value=""/>                            <input type="hidden" name="map_google_lat" id="lat" value=""/>                            <div id="div_map">                                <?php echo $maps['html']; ?>                            </div>                        </div>                    </div>                    <div class="  text-center col-md-12">                        <button type="submit" name="add" value="add" style="margin-top: 25px;"                                class="btn btn-labeled btn-success ">                            <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                        </button>                    </div>                    <?php                    echo form_close();                    ?>                </div>                <?php if (isset($from_profile) && ($from_profile == 0)) { ?>            </div>            <div role="tabpanel" class="tab-pane fade " id="notes">                <div class="col-xs-12">                    <div class="space"></div>                    <div id="calendar"></div>                </div>            </div>            <div role="tabpanel" class="tab-pane fade " id="my_notes">                <?php                if (isset($my_notes) && !empty($my_notes)) {                    $x = 1;                    ?>                    <table id="examplee" class="table example table-bordered table-striped table-hover">                        <thead>                        <tr class="greentd">                            <th>م</th>                            <th> النوع</th>                            <th> التاريخ</th>                            <th> التصنيف</th>                            <th> التذكير </th>                            <th> التكرار </th>                            <th> التفاصيل</th>                            <th> الاجراء</th>                        </tr>                        </thead>                        <tbody>                        <?php                        foreach ($my_notes as $note) {                            ?>                            <tr>                                <td><?= $x; ?> </td>                                <?php                                if ($note->type == 1) {                                    $type_n = 'ملاحظة';                                    $className = 'btn-warning';                                    $color = '#ffc751';                                } elseif ($note->type == 2) {                                    $type_n = 'موعد';                                    $className = 'btn-success';                                    $color = '#50ab20';                                } elseif ($note->type == 3) {                                    $type_n = 'حدث';                                    $className = 'btn-danger';                                    $color = '#E5343D';                                } elseif ($note->type == 4) {                                    $type_n = 'مهمة';                                    $className = 'btn-info';                                    $color = '#3a87ad';                                }                                ?>                                <td>                                    <label class=" label " style="color: <?= $color ?>"><?= $type_n ?></label>                                </td>                                <td><?php                                    $empty=0;                                    if (!empty($note->from_date)) {                                        $time_text= $note->from_date;                                    } else {                                        $empty++;                                    }                                    if (!empty($note->to_date)) {                                        $time_text=$time_text. '-' . $note->to_date;                                    } else {                                        $empty++;                                    }                                    if ($empty == 2){                                        echo 'غير محدد';                                    }else{                                        echo $time_text;                                    }                                    ?></td>                                <td><?php                                    if (!empty($note->tasnef_n)) {                                        echo $note->tasnef_n;                                    } else {                                        echo 'غير محدد';                                    }                                    ?></td>                                <td><?php                                    if (!empty($note->alarm_period_n)) {                                        echo $note->alarm_period_n;                                    } else {                                        echo 'غير محدد';                                    }                                    ?></td>                                <td> <?php  if (key_exists($note->repetition_type,$repetition_type)) {                                    echo $repetition_type[$note->repetition_type];                                    }else{                                    echo 'غير محدد';                                    }?> </td>                                <td>                                    <a onclick="notes_details(<?= $note->id ?>)" aria-hidden="true" data-toggle="modal"                                       data-target="#notes_detailsModal"><i class="fa fa-search" aria-hidden="true"></i></a></i>                                </td>                                <td>                                    <?php                                    if (isset($note->seen) && !empty($note->seen) && $note->seen == 1) {                                        ?>                                        <label class=" label " style="color:#50ab20"> تمت المشاهده</label>                                    <?php } else {                                        ?>                                        <label class=" label " style="color:#e5343d"> لم تتم المشاهده</label>                                    <?php } ?>                                </td>                            </tr>                            <?php                            $x++;                        }                        ?>                        </tbody>                    </table>                    <?php                } else {                    ?>                    <?php                }                ?>            </div>        </div>    </div></div>    <div class="modal fade" id="myModal-view-"         tabindex="-1"         role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog modal-lg" role="document">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span>                    </button>                    <h4 class="modal-title" id="myModalLabel">الصورة</h4>                </div>                <div class="modal-body" id="myModal-view-body">                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">إغلاق</button>                </div>            </div>        </div>    </div><!--  details-->    <div class="modal fade" id="notes_detailsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">        <div class="modal-dialog" role="document" style="width: 80%;">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">                        <span aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" style="text-align: center;">التفاصيل</h4>                </div>                <div class="modal-body" style="padding: 10px 0" id="result_notes">                </div>                <div class="modal-footer" style="display: inline-block;width: 100%;">                    <button type="button" class="btn btn-labeled btn-danger " data-dismiss="modal">                        <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>إغلاق                    </button>                </div>            </div>        </div>    </div><!-- details --><!-- tasnefModal Modal --><?php } ?><!-- tasnefModal Modal --><div class="modal fade" id="tasnefModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">    <div class="modal-dialog" role="document" style="width: 80%">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h4 class="modal-title title "> التصنيف </h4>            </div>            <div class="modal-body">                <div id="tasnef_show">                    <div class="col-sm-12 form-group">                        <div class="col-sm-12 form-group">                            <div class="col-sm-3  col-md-3 padding-4 ">                                <button type="button" class="btn btn-labeled btn-success "                                        onclick="$('#tasnef_input').show();"                                        style="border-top-left-radius: 14px;border-bottom-right-radius: 14px;">                                    <span class="btn-label"><i class="glyphicon glyphicon-plus"></i></span>                                    اضافه التصنيف                                </button>                            </div>                        </div>                        <div class="col-sm-12 no-padding form-group">                            <div id="tasnef_input" style="display: none">                                <div class="col-sm-3  col-md-5 padding-2 ">                                    <label class="label   ">التصنيف </label>                                    <input type="text" name="tasnef_name" id="tasnef_name"                                           data-validation="required"                                           value=""                                           class="form-control ">                                    <input type="hidden" class="form-control" id="s_id" value="">                                </div>                                <div class="col-sm-3  col-md-2 padding-4" id="div_add_tasnef"                                     style="display: block;">                                    <button type="button" onclick="add_tasnef();"                                            style="    margin-top: 27px;"                                            class="btn btn-labeled btn-success">                                            <span class="btn-label"><i                                                        class="glyphicon glyphicon-floppy-disk"></i></span>حفظ                                    </button>                                </div>                                <div class="col-sm-3  col-md-3 padding-4" id="div_update_tasnef"                                     style="display: none;">                                    <button type="button"                                            class="btn btn-labeled btn-success " id="update_tasnef">                                            <span class="btn-label"><i                                                        class="glyphicon glyphicon-floppy-disk"></i></span>تعديل                                    </button>                                </div>                            </div>                        </div>                        <br>                        <br>                    </div>                    <div id="myDiv_tasnef"><br><br>                    </div>                </div>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-danger" data-dismiss="modal">اغلاق</button>            </div>        </div>    </div></div><script>    function GetName(id, name) {        $('#qsm_id_fk').val(id);        $('#qsm_n').val(name);        $('#departModal').modal('hide');    }</script><script>    function GetTasnefName(id, name) {        $('#tasnef').val(id);        $('#tasnef_n').val(name);        $('#tasnefModal').modal('hide');    }</script><?php if (isset($from_profile) && ($from_profile == 0)) { ?>    <script type="text/javascript" src="<?php echo base_url(); ?>asisst/admin_asset/js/jquery-1.10.1.min.js"></script>    <script src="<?php echo base_url() ?>asisst/admin_asset/js/jquery.form-validator.js"></script>    <script>        $(function () {            // setup validate            $.validate({                validateHiddenInputs: true // for live search required            });        });    </script>    <script src="<?php echo base_url(); ?>asisst/admin_asset/js/mdtimepicker.js"></script>    <script>        $(document).ready(function () {            $('#from_time').mdtimepicker(); //Initializes the time picker            $('#to_time').mdtimepicker(); //Initializes the time picker        });    </script>    <script>        function notes_details(id) {            $.ajax({                type: 'post',                url: "<?php echo base_url();?>all_secretary/archive/notes/Notes/load_details",                data: {row_id: id},                beforeSend: function () {                    $('#result_notes').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');                },                success: function (d) {                    $('#result_notes').html(d);                }            });        }    </script>    <?php $this->load->view($footer_calender) ?><?php } ?><!-- tasneef_script//yara26-2-2020 --><script>    function get_details_tasnef() {        $.ajax({            type: 'post',            url: "<?php echo base_url();?>all_secretary/archive/notes/Notes/load_tasnef",            beforeSend: function () {                $('#myDiv_tasnef').html('<div class=\'loader-img\'><div class=\'bar1\'></div><div class=\'bar2\'></div><div class=\'bar3\'></div><div class=\'bar4\'></div><div class=\'bar5\'></div><div class=\'bar6\'></div></div>');            },            success: function (d) {                $('#myDiv_tasnef').html(d);            }        });    }</script><script>    function GetTasnefName(id, name) {        $('#tasnef').val(id);        $('#tasnef_n').val(name);        $('#tasnefModal').modal('hide');    }</script><script>    function add_tasnef() {        var value = $('#tasnef_name').val();        $('#div_update_tasnef').hide();        $('#div_add_tasnef').show();        //  alert(value);        if (value != 0 && value != '') {            var dataString = 'tasnef=' + value;            $.ajax({                type: 'post',                url: '<?php echo base_url() ?>all_secretary/archive/notes/Notes/add_tasnef',                data: dataString,                dataType: 'html',                cache: false,                beforeSend: function () {                    swal({                        title: "جاري الحفظ ... ",                        text: "",                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                        showConfirmButton: false,                        allowOutsideClick: false                    });                },                success: function (html) {                    $('#tasnef_name').val('');                    swal({                            title: "تم الاضافه بنجاح!",                        }                    );                    get_details_tasnef();                }            });        }    }</script><script>    function update_tasnef(id) {        var id = id;        $('#tasnef_input').show();        $('#div_add_tasnef').hide();        $('#div_update_tasnef').show();        $.ajax({            url: "<?php echo base_url() ?>all_secretary/archive/notes/Notes/getById_tasnef",            type: "Post",            dataType: "html",            data: {id: id},            success: function (data) {                var obj = JSON.parse(data);                //console.log(obj);                console.log(obj.title);                $('#tasnef_name').val(obj.title);            }        });        $('#update_tasnef').on('click', function () {            var tasnef = $('#tasnef_name').val();            $.ajax({                url: "<?php echo base_url() ?>all_secretary/archive/notes/Notes/update_tasnef",                type: "Post",                dataType: "html",                data: {tasnef: tasnef, id: id},                beforeSend: function () {                    swal({                        title: "جاري التعديل ... ",                        text: "",                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                        showConfirmButton: false,                        allowOutsideClick: false                    });                },                success: function (html) {                    //  alert('hh');                    $('#tasnef_name').val('');                    $('#div_update_tasnef').hide();                    $('#div_add_tasnef').show();                    // $('#Modal_esdar').modal('hide');                    swal({                            title: "تم التعديل بنجاح!",                        }                    );                    get_details_tasnef();                }            });        });    }</script><script>    function delete_tasnef(id) {        swal({                title: "هل انت متاكد من الحذف?",                type: "warning",                showCancelButton: true,                confirmButtonClass: "btn-danger",                confirmButtonText: "نعم",                cancelButtonText: "لا",                closeOnConfirm: false,                closeOnCancel: false            },            function (isConfirm) {                if (isConfirm) {                    $.ajax({                        type: 'post',                        url: '<?php echo base_url() ?>all_secretary/archive/notes/Notes/delete_tasnef',                        data: {id: id},                        dataType: 'html',                        cache: false,                        beforeSend: function () {                            swal({                                title: "جاري الحذف ... ",                                text: "",                                imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',                                showConfirmButton: false,                                allowOutsideClick: false                            });                        },                        success: function (html) {                            //   alert(html);                            $('#tasnef').val('');                            // $('#Modal_esdar').modal('hide');                            swal({                                    title: "تم الحذف!",                                }                            );                            get_details_tasnef();                        }                    });                } else {                    swal("تم الالغاء", "", "error");                }            });    }</script><script>    function get_disable() {        val = $('#alarm_type').val();        console.log(val);        if (val == 1) {            $('#qsm_n').attr("disabled", "disabled");            $('#btn_depart').attr("disabled", "disabled");        } else {            $('#qsm_n').removeAttr("disabled", "disabled");            $('#btn_depart').removeAttr("disabled", "disabled");        }    }</script><script>    function check_time() {        console.log('check_time');        var valid = 1;        var text_valid = "";        var start = $('#from_time').val();        var end = $('#to_time').val();        var from_date = new Date($('#from_date').val());        var to_date = new Date($('#to_date').val());        console.log('from_time ::' +start);        console.log('to_time ::' +end);        console.log('from_date ::' +from_date);        console.log('to_date ::' +to_date);        if ((from_date - to_date) > 0) {            valid = 0;            text_valid += '(التاريخ)';            $('#from_date').css("border-color", "2px solid #ff0000");            $('#to_date').css("border-color", "2px solid #ff0000");        }else {            $('#from_date').css("border-color", "2px solid #5cb85c");            $('#to_date').css("border-color", "2px solid #5cb85c");        }        console.log('valid ::' +valid);        console.log('text_valid ::' +text_valid);        //  alert(start);        //  return;        if (start != '' && end != '') {            s = start.split(':');            e = end.split(':');            var ss = s[s.length - 1].split(' ');            var ee = e[e.length - 1].split(' ');            if (ss[ss.length - 1] === 'PM') {                if (parseInt(s[0]) === 12) {                } else {                    s[0] = parseInt(s[0]) + 12;                }            }            if (ee[ee.length - 1] === 'PM') {                if (parseInt(e[0]) === 12) {                } else {                    e[0] = parseInt(e[0]) + 12;                }            }            min = parseInt(e[1]) - parseInt(s[1]);            console.log('min :' + min + " e[1] :" + e[1] + " s[1] :" + s[1]);            hour_carry = 0;            if (min < 0) {                min += 60;                hour_carry += 1;            }            console.log('min :' + min);            hour = e[0] - s[0] - hour_carry;            diff = hour + "." + min;            console.log('min :' + min + " hours :" + hour + " diff :" + diff);            /* $('#num_hours').val(diff);*/            if (diff <= 0) {                valid = 0;                text_valid += ' (الوقت)';                $('#from_time').css("border-color", "2px solid #ff0000");                $('#to_time').css("border-color", "2px solid #ff0000");            }else {                $('#from_time').css("border-color", "2px solid #5cb85c");                $('#to_time').css("border-color", "2px solid #5cb85c");            }        }        if (valid == 0) {            /*$('#num_hours').val(0);*/            $('button[type="submit"]').attr("disabled", "disabled");            document.getElementById("span_id").style.display = 'block';            document.getElementById("span_id").innerText ='من فضلك ادخل فترة زمنية صحيحة ' +text_valid;            swal({                title: 'من فضلك ادخل فترة زمنية صحيحة ',                text: text_valid,                type: 'error',                confirmButtonText: 'تم'            });        } else {            $('button[type="submit"]').removeAttr("disabled");            document.getElementById("span_id").style.display = 'none';        }    }</script><script>    function check_date() {        var from_date = new Date($('#from_date').val());        var to_date = new Date($('#to_date').val());        if ((from_date - to_date) > 0) {            valid = 0;            text_valid += 'من فضلك ادخل فترة زمنية صحيحة';            $('button[type="submit"]').attr("disabled", "disabled");            document.getElementById("span_id").style.display = 'block';            document.getElementById("span_id").innerText = 'من فضلك ادخل فترة زمنية صحيحة';        }else {            $('button[type="submit"]').removeAttr("disabled");            document.getElementById("span_id").style.display = 'none';        }    }</script>