<style type="text/css">
    .btn-group > .btn,
    .btn-group > .btn + .btn,
    .btn-group > .btn:first-child,
    .fc .fc-button-group > * {
        height: 34px !important;
        border-radius: 4px !important;
        margin: 0 !important;
    }

    .bootstrap-select.btn-group .dropdown-toggle .caret {
        right: 92% !important;
    }

    .btn-label {
        left: 12px;
    }

    input, select {
        font-weight: 600 !important;
        color: #002c52 !important;
        font-size: 16px !important;
    }

    .top-label {
        font-size: 13px;
        background-color: #428bca !important;
        border: 2px solid #428bca !important;
        text-shadow: none !important;
        font-weight: 500 !important;
    }

    .myspan {
        color: rgb(255, 0, 0);
        font-size: 12px;
        position: absolute;
        bottom: -16px;
        right: 20px;
    }

    .no-padding {
        padding-left: 0px !important;
        padding-right: 0px !important;
    }

    .print_forma {
        padding: 15px;
    }

    .piece-box {
        margin-bottom: 12px;
        border: 1px solid #73b300;
        display: inline-block;
        width: 100%;
    }

    .piece-heading {
        background-color: #9bbb59;
        display: inline-block;
        float: right;
        width: 100%;
    }

    .piece-body {
        width: 100%;
        float: right;
    }

    .bordered-bottom {
        border-bottom: 4px solid #9bbb59;
    }

    .piece-footer {
        display: inline-block;
        float: right;
        width: 100%;
        border-top: 1px solid #73b300;
    }

    .piece-heading h5 {
        margin: 4px 0;
    }

    .piece-box table {
        margin-bottom: 0
    }

    .piece-box table th,
    .piece-box table td {
        padding: 2px 8px !important;
    }

    h6 {
        font-size: 16px;
        margin-bottom: 3px;
        margin-top: 3px;
    }

    .print_forma table th {
        text-align: right;
    }

    .print_forma table tr th {
        vertical-align: middle;
    }

    .no-padding {
        padding: 0;
    }

    .header p {
        margin: 0;
    }

    .header img {
        height: 120px;
        width: 100%
    }

    .main-title {
        display: table;
        text-align: center;
        position: relative;
        height: 120px;
        width: 100%;
    }

    .main-title h4 {
        display: table-cell;
        vertical-align: bottom;
        text-align: center;
        width: 100%;
    }

    .print_forma hr {
        border-top: 1px solid #73b300;
        margin-top: 7px;
        margin-bottom: 7px;
    }

    .no-border {
        border: 0 !important;
    }

    .gray_background {
        background-color: #eee;
    }

    @media print {
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    }

    .footer img {
        width: 100%;
        height: 120px;
    }

    @page {
        size: A4;
        margin: 20px 0 0;
    }

    .open_green {
        background-color: #e6eed5;
    }

    .closed_green {
        background-color: #cdddac !important;
    }

    .table-bordered > thead > tr > th,
    .table-bordered > tbody > tr > th,
    .table-bordered > tfoot > tr > th,
    .table-bordered > thead > tr > td,
    .table-bordered > tbody > tr > td,
    .table-bordered > tfoot > tr > td {
        font-size: 14px;
    }

    .btn-close-model,
    btn-close-model:hover,
    btn-close-model:focus {
        background-color: #8a9e5f;
        color: #fff;
        margin-top: -20px;
    }

    .my_style {
        color: #222;
        font-size: 15px;
        font-weight: 500;
    }

    .one_three {
        width: 43% !important;
        float: right;
    }

    .two_three {
        width: 57% !important;
        float: right;
    }

    @media (min-width: 992px) {
        .col_md_10 {
            width: 10%;
            float: right;
        }

        .col_md_15 {
            width: 15%;
            float: right;
        }

        .col_md_20 {
            width: 20%;
            float: right;
        }

        .col_md_25 {
            width: 25%;
            float: right;
        }

        .col_md_30 {
            width: 30%;
            float: right;
        }

        .col_md_35 {
            width: 35%;
            float: right;
        }

        .col_md_40 {
            width: 40%;
            float: right;
        }

        .col_md_45 {
            width: 45%;
            float: right;
        }

        .col_md_50 {
            width: 50%;
            float: right;
        }

        .col_md_55 {
            width: 55%;
            float: right;
        }

        .col_md_60 {
            width: 60%;
            float: right;
        }

        .col_md_65 {
            width: 65%;
            float: right;
        }

        .col_md_70 {
            width: 70%;
            float: right;
        }

        .col_md_75 {
            width: 75%;
            float: right;
        }

        .col_md_80 {
            width: 80%;
            float: right;
        }

        .col_md_85 {
            width: 85%;
            float: right;
        }

        .col_md_90 {
            width: 90%;
            float: right;
        }

        .col_md_95 {
            width: 95%;
            float: right;
        }

        .col_md_100 {
            width: 100%;
            float: right;
        }
    }

    .label_title_2 {
        width: 100%;
        color: #000;
        height: auto;
        margin: 0;
        font-family: 'hl';
        padding-right: 0px;
        font-size: 16px;
        margin-bottom: 5px;
        margin-top: 5px;
        display: inline-block;
    }

    .input-style {
        border-radius: 0px;
        border-right: 1px solid #ccc;
    }

    .input_style_2 {
        border-radius: 0px;
        border-right: 1px solid #ccc;
        width: 100%;
    }

    .label-blue {
        background-color: #003665;
        border: 1px solid #003665;
        height: 34px;
        line-height: 25px !important;
        font-size: 13px !important;
        font-weight: 500 !important;
        text-align: right !important;
    }

    #cheq, #eda3, #shabka, #mosatadem {
        padding-top: 5px !important;
        padding-bottom: 5px !important;
    }

    .table_style {
        font-size: 11px !important;
        color: darkred !important;
        font-weight: bold !important;
        line-height: 17px !important;
        margin: 1px;
    }

    button[type=submit] {
        padding: 0px 12px;
    }

    .btn-label {
        right: -14px;
    }

    .list::-webkit-calendar-picker-indicator {
        display: none;
    }

    input[type=date]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        display: none;
    }

    input[type=date]::-webkit-clear-button {
        display: none;
        -webkit-appearance: none;
    }

    .tree ul {
        margin-right: 10px;
        position: relative;
        margin-left: 0;
    }

    .tree ul li {
        padding-left: 0;
    }

    .tree ul ul {
        margin-left: 0;
    }

    ul span {
        display: inline !important;
    }

    .fa-plus.sspan {
        padding: 2px 7px;
        font-size: 13px;
        line-height: 1.5;
        background-color: #5b69bc;
        color: #fff;
        border-radius: 2px;
    }

    .bond-header {
        height: 55px;
        margin-bottom: 15px;
    }

    .bond-header .right-img img,
    .bond-header .left-img img {
        width: 100%;
        height: 55px;
    }

    .border-box {
        border: 2px solid #5c9842;
        background-color: #fff;
        border-radius: 5px;
        font-size: 15px;
        padding: 2px 6px;
        display: inline-block;
        min-width: 70px;
        height: 29px;
        line-height: 23px;
        text-align: center;
    }

    .border-box-h {
        padding: 3px 20px;
        border: 2px solid #222;
        border-radius: 29px;
    }

    .main-bond-title {
        display: table;
        height: 55px;
        text-align: center;
        width: 100%;
    }

    .main-bond-title h3 {
        display: table-cell;
        vertical-align: middle;
        font-size: 12px;
    }

    .bond-body {
        position: relative;
        padding: 10px;
        border: 2px solid #5c9842;
        display: inline-block;
        width: 100%;
    }

    .bond-body h5 {
        font-size: 12px;
    }

    .bond-body h6 {
        font-size: 11px;
    }

    .pad-2 {
        padding-left: 2px;
        padding-right: 2px;
    }

    .bond-footer {
        margin-top: 15px;
    }

    .bond-footer h6 {
        font-size: 11px;
    }

    .title-fe {
        position: absolute;
        top: -17px;
        right: 35%;
        border: 2px solid #5c9842;
        background-color: #fff;
        border-radius: 5px;
        font-size: 14px;
        padding: 2px 8px;
    }

    .table > caption + thead > tr:first-child > th,
    .table > colgroup + thead > tr:first-child > th,
    .table > thead:first-child > tr:first-child > th,
    .table > caption + thead > tr:first-child > td,
    .table > colgroup + thead > tr:first-child > td,
    .table > thead:first-child > tr:first-child > td {
        border-top: 1px solid #000;
    }

    .bond-body .table-bordered > thead > tr > th,
    .bond-body .table-bordered > tbody > tr > th,
    .bond-body .table-bordered > tfoot > tr > th,
    .bond-body .table-bordered > thead > tr > td,
    .bond-body .table-bordered > tbody > tr > td,
    .bond-body .table-bordered > tfoot > tr > td {
        border: 1px solid #000;
        text-align: center;
        vertical-align: middle;
        font-size: 10px;
        padding: 5px;
    }

    .mblgh-tb tbody td, .mblgh-tb tfoot td {
        padding: 0 !important;
        text-align: center !important;
    }

    .mblgh-tb thead th {
        text-align: center !important;
    }

    .fa-money {
        padding: 1px 5px;
        font-size: 12px;
        line-height: 1.5;
        background-color: #ffb61e;
        color: #fff;
        /*border-radius: 2px;*/
        border-radius: 11px;
    }

    .red-color {
        color: #ff0000;
    }

    td input[type=radio] {
        height: 18px;
        width: 18px;
    }
</style>
<div class="col-sm-12 no-padding">
    <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable">
        <!--<div class="panel-heading">
                <h3 class="panel-title"><?= $title ?></h3>
            </div>-->
        <div class="panel-body">
            <div class="col-sm-11 padding-4">
                <?php
                /*
                echo '<pre>';
                print_r($result);*/
                $submitEdit = 'button';
                $submitSave = 'button';

                $submitSave = '';
                $rqm_sanad = $last_id;
                $date_sanad = date('Y-m-d');
                $pay_method = 4;
                $type_paid = 4;
                $about = 'تحويل بين الحسابات ';
                $note = '';
                $sheek_num = '';
                $sheek_date = '';
                $bank_id_fk = '';
                $bank_name = '';
                $total_value = $total_value;
                $person_name = "مصرف الراجحي";
                $type = "";
                $mother_national_num = "";
                $person_id_fk = "";
                $mob = "";
                $box_rqm_hesab = '';
                $box_name = '';
                if (isset($box_date) && !empty($box_date)) {
                    $box_rqm_hesab = $box_date['rqm_hesab'];
                    $box_name = $box_date['name_hesab'];
                }
                $arabicValue = 'مبلغا وقدره : ' . $arabicNum . ' ريال فقط لا غير.';
                $sheek_bank_id = 19;
                $bank_account_id_fk = 2;
                $bank_account_num = 'مصرف الراجحي-فرع السادة- ح/العام 510000';
                $sheek_bank_name = '';
                $sheek_rqm_hesab = '1110100101';
                $sheek_num_bank = '';
                echo form_open_multipart('finance_accounting/box/vouch_sarf/Vouch_sarf/add_tahwel', array('id' => 'fromVouchSarf'));

                ?>
                <input type="hidden" name="process_rkm" value="<?=$process_rkm?>" />
                <div class="col-md-12 no-padding">
                    <div class="col_md_45 col-sm-6 padding-4">
                        <h6 class="label_title_2 ">نوع السند </h6>
                        <div class="radio-content">
                            <input type="radio" name="pay_method_sarf"
                                   onclick="$('#pay_method_value').val($(this).val()); $('.divBankInput').removeAttr('data-validation');"
                                   data-name="نقددي"
                                   style="margin-right: 8px; width: 20px; height: 20px;  font-size: 14px !important;" <?php if (!empty($pay_method) && $pay_method == 1) {
                                echo 'checked';
                            } ?> data-rqamHesab="<?= ($box != null) ? $box['نقدي']->rqm_hesab : '' ?>"
                                   data-hesabName="<?= ($box != null) ? $box['نقدي']->name_hesab : '' ?>"
                                   data-validation="required" value="1" checked="" id="pay_method_sarf1">
                            <label class="radio-label pay_method_sarf" for="pay_method_sarf1"> نقدي</label>
                        </div>
                        <div class="radio-content">
                            <input type="radio" name="pay_method_sarf" onclick="$('#pay_method_value').val($(this).val());
                                $('.divBankInput').attr('data-validation','required');" data-name="شيك من الصندوق"
                                   style="width: 20px; height: 20px;  font-size: 14px !important;" <?php if (!empty($pay_method) && $pay_method == 2) {
                                echo 'checked';
                            } ?> data-rqamHesab="<?= ($box != null) ? $box['شيك']->rqm_hesab : '' ?>"
                                   data-hesabName="<?= ($box != null) ? $box['شيك']->name_hesab : '' ?>"
                                   data-validation="required" value="2" id="pay_method_sarf2">
                            <label class="radio-label pay_method_sarf" for="pay_method_sarf2">شيك من الصندوق</label>
                        </div>
                        <div class="radio-content">
                            <input type="radio" name="pay_method_sarf"
                                   onclick="$('#pay_method_value').val($(this).val()); $('.divBankInput').removeAttr('data-validation');"
                                   data-name="شيك من البنك"
                                   style="width: 20px; height: 20px;  font-size: 14px !important;" <?php if (!empty($pay_method) && $pay_method == 3) {
                                echo 'checked';
                            } ?> data-rqamHesab="<?= ($box != null) ? $box['شيك']->rqm_hesab : '' ?>"
                                   data-hesabName="<?= ($box != null) ? $box['شيك']->name_hesab : '' ?>"
                                   data-validation="required" value="3" id="pay_method_sarf3">
                            <label class="radio-label pay_method_sarf" for="pay_method_sarf3">شيك من البنك</label>
                        </div>
                        <div class="radio-content">
                            <input type="radio" name="pay_method_sarf"
                                   data-name="تحويل بنكي"
                                   style="width: 20px; height: 20px; font-size: 14px !important;" <?php if (!empty($pay_method) && $pay_method == 4) {
                                echo 'checked';
                            } ?> data-rqamHesab="<?= ($box != null) ? $box['شيك']->rqm_hesab : '' ?>"
                                   data-hesabName="<?= ($box != null) ? $box['شيك']->name_hesab : '' ?>"
                                   data-validation="required" value="4" id="pay_method_sarf4">
                            <label class="radio-label pay_method_sarf" for="pay_method_sarf4">معاملات بنكية </label>
                        </div
                        <input type="hidden" name="pay_method_value" id="pay_method_value"
                               value="<?= $pay_method ?>">
                    </div>
                    <div class="col_md_20 col-sm-6 padding-4" id="type_paid_div"
                        <?php if ($pay_method != 4) { ?>
                            style="display: none" <?php } ?>>
                        <h6 class=" label_title_2">نوع العملية</h6>
                        <select name="type_paid" id="type_paid" class="form-control input_style_2    "
                                data aria-required="true">
                            <option value="">إختر</option>
                            <?php
                            $type_paid_array = array(1 => 'تحويل بنكي', 2 => 'سداد مدفوعات حكومية', 3 => 'سداد فواتير', 4 => 'تحويل بين الحسابات');
                            if (!empty($type_paid_array)) {
                                foreach ($type_paid_array as $key => $value) { ?>
                                    <option value="<?php echo $key; ?>"
                                        <?php if (!empty($type_paid)) {
                                            if ($type_paid == $key) {
                                                echo 'selected';
                                            }
                                        } ?>><?= $value ?></option>
                                <?php }
                            } ?>
                        </select>
                    </div>
                    <div class="col_md_10   padding-4">
                        <h6 class="label_title_2 ">رقم السند </h6>
                        <input type="text" name="rqm_sanad" value="<?= $rqm_sanad ?>"
                               class="form-control input_style_2" readonly=""
                               data-validation-has-keyup-event="true">
                    </div>
                    <div class="col_md_15 col-sm-6 padding-4">
                        <h6 class="label_title_2">تاريخ السند </h6>
                        <input type="date" name="date_sanad" data-validation="required" id="date_sanad"
                               value="<?= $date_sanad ?>"
                               pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])/(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])/(?:30))|(?:(?:0[13578]|1[02])-31))"
                               class="form-control input_style_2" data-validation-has-keyup-event="true">
                    </div>
                    <div class="col_md_10 col-sm-6 padding-4">
                        <h6 class="label_title_2">رقم القيد </h6>
                        <input type="text" name="value" id="value" data-validation="required"
                               class="form-control input_style_2 error" value=""
                               data-validation-has-keyup-event="true" disabled="">
                    </div>
                </div>
                <div class="col-md-12 no-padding bank_dd" <?= ($pay_method == 3) ? 'style="display: block"' : 'style="display: none"'; ?>>

                    <div class="col-md-12 no-padding">
                        <div class="col_md_25 col-sm-6 padding-4">

                            <h6 class="label_title_2">البنك </h6>

                            <select id="sheek_bank_id" name="sheek_bank_id"
                                    onchange="getBankSetting(this.value,this)" class="form-control input_style_2 "
                                    data-validation="" aria-required="true">
                                <option value="">إختر</option>
                                <?php if (isset($banks_setting) && !empty($banks_setting)) {
                                    foreach ($banks_setting as $bank) {
                                        $select = '';
                                        if ($sheek_bank_id == $bank['bank_id']) {
                                            $select = 'selected';
                                        }
                                        ?>
                                        <option data-code="<?= $bank['code_account_id'] ?>" <?= $select ?>
                                                value="<?= $bank['bank_id'] ?>"><?= $bank['bank_title'] ?></option>
                                    <?php }
                                } ?>
                            </select>

                        </div>
                        <div class="col_md_40 col-sm-6 padding-4">

                            <h6 class="label_title_2">اسم الحساب</h6>

                            <input type="text" placeholder="اسم الحساب" readonly="" name="sheek_bank_name"
                                   id="sheek_bank_name" class="form-control input_style_2 "
                                   value="<?= $sheek_bank_name ?>" data-validation-has-keyup-event="true">

                        </div>
                        <div class="col_md_15 col-sm-6 padding-4">

                            <h6 class="label_title_2">كود الحساب</h6>

                            <input type="text" placeholder="كود الحساب" readonly="" name="sheek_rqm_hesab"
                                   id="sheek_rqm_hesab" class="form-control input_style_2"
                                   value="<?= ($box != null) ? $box['نقدي']->rqm_hesab : $box_rqm_hesab ?>"
                                   data-validation="required" data-validation-has-keyup-event="true">

                        </div>

                        <div class="col_md_20 col-sm-6 padding-4">

                            <h6 class="label_title_2">رقم الشيك</h6>

                            <input type="text" placeholder="رقم الشيك" readonly="readonly" name="sheek_num_bank"
                                   id="sheek_num_bank" class="form-control input_style_2"
                                   value="<?= $sheek_num_bank ?>" data-validation-has-keyup-event="true">

                        </div>


                    </div>

                    <div class="col-md-12 no-padding">

                    </div>
                </div>

                <div id="tahweel_banky" <?php //if($pay_method != 4){ echo'style="display: none"'; }
                ?>>
                    <?php if (!empty($pay_method)) {
                        if ($pay_method == 4) { ?>
                            <div class="col-md-12 no-padding">
                                <div class=" col-md-3 col-sm-6 padding-4">
                                    <h6 class="red-color_"> البنك </h6>
                                    <select name="sheek_bank_id" id="bank_id_fk_eda3"
                                            class="form-control   bank_id_fk empty"
                                            onchange="GetByArray(this.value,'getAccount','eda3');" aria-required="true">
                                        <option value="">إختر</option>
                                        <?php if (!empty($all_banks)) {
                                            foreach ($all_banks as $bank) { ?>
                                                <option value="<?php echo $bank->bank_id_fk; ?>"
                                                    <?php if (!empty($sheek_bank_id)) {
                                                        if ($sheek_bank_id == $bank->bank_id_fk) {
                                                            echo 'selected';
                                                        }
                                                    } ?>
                                                ><?= $bank->title ?></option>
                                            <?php }
                                        } ?>
                                    </select>
                                </div>
                                <div class="col-md-2 col-sm-6 padding-4">
                                    <h6 class="red-color_">وصف الحساب</h6>
                                    <select name="bank_account_id_fk" id="bank_account_id_eda3"
                                            class="form-control   branch_id_fk empty"
                                            onchange="GetByArray(this.value,'getAccountNum','eda3')"
                                            aria-required="true">
                                        <option value="">إختر الحساب</option>
                                        <?php if (!empty($bank_accounts_arr)) {
                                            foreach ($bank_accounts_arr as $row) { ?>
                                                <option value="<?php echo $row->account_id_fk; ?>"
                                                    <?php if (!empty($bank_account_id_fk)) {
                                                        if ($bank_account_id_fk == $row->account_id_fk) {
                                                            echo 'selected';
                                                        }
                                                    } ?>><?= $row->AccountName ?></option>
                                            <?php }
                                        } ?>
                                    </select>
                                </div>
                                <div class="col-md-4 col-sm-6 padding-4">
                                    <h6 class="red-color_"> إسم الحساب </h6>
                                    <select name="bank_account_num" id="bank_account_num_eda3"
                                            onchange="GetByArray(this.value,'GetAccountCode','eda3');"
                                            class="form-control   accoun_num_id_fk empty "
                                            aria-required="true">
                                        <option value="">إسم الحساب</option>
                                        <?php if (!empty($hesab_data)) {
                                            foreach ($hesab_data as $row) { ?>
                                                <option value="<?php echo $row->name_hesab; ?>"
                                                    <?php if (!empty($bank_account_num)) {
                                                        if ($bank_account_num == $row->name_hesab) {
                                                            echo 'selected';
                                                        }
                                                    } ?>><?= $row->name_hesab ?></option>
                                            <?php }
                                        } ?>
                                    </select>
                                </div>
                                <div class="col-md-3 col-sm-6 padding-4">
                                    <h6 class="red-color_"> كود الحساب </h6>
                                    <select name="sheek_rqm_hesab" id="bank_account_code_eda3"
                                            class="form-control   empty"
                                            aria-required="true">
                                        <option value="">إختر</option>
                                        <?php if (!empty($hesab_data)) {
                                            foreach ($hesab_data as $row) { ?>
                                                <option value="<?php echo $row->rqm_hesab; ?>"
                                                    <?php if (!empty($sheek_rqm_hesab)) {
                                                        if ($sheek_rqm_hesab == $row->rqm_hesab) {
                                                            echo 'selected';
                                                        }
                                                    } ?>
                                                ><?= $row->rqm_hesab ?></option>
                                            <?php }
                                        } ?>>
                                    </select>
                                </div>
                            </div>
                        <?php }
                    } ?>
                </div>
                <div class="col-md-12 no-padding">
                    <div class="col-md-5 col-sm-6 padding-4">
                        <h6 class="label_title_2">إدفعوا لأمر </h6>
                        <input list="pepople_arr" autocomplete="off" style="width:90%; float: right;" type="text"
                               name="person_name" id="person_name" class="form-control input_style_2 list"
                               value="<?= $person_name ?>" data-validation-has-keyup-event="true"
                               onkeyup="$('#person_name_div').html($(this).val());GetByan();"
                               data-validation="required"/>
                        <input type="hidden" name="mother_national_num" id="mother_national_num"
                               value="<?= $mother_national_num ?>">
                        <input type="hidden" name="type" id="type" value="<?= $type ?>">
                        <input type="hidden" name="person_id_fk" id="person_id_fk"
                               value="<?= $person_id_fk ?>">
                        <!-- <button type="button" data-toggle="modal" data-target="#myModalInfo"
                                class="btn btn-success btn-next" style=""><i class="fa fa-plus"></i></button>-->
                        <datalist id="pepople_arr">
                            <?php
                            if (!empty($people_arr)) {
                            foreach ($people_arr as $row){
                            ?>
                            <option value="<?= $row['title'] ?>">
                                <?php
                                }
                                }
                                ?>
                        </datalist>
                    </div>
                    <div class="col-md-2 col-sm-6 padding-4">
                        <h6 class="label_title_2 ">الجوال </h6>
                        <input style="font-weight: 600 !important;" type="text" onkeypress="validate_number(event)"
                               name="person_mob" id="person_mob" value="<?php echo $mob; ?>"
                               class="form-control input_style_2"/>
                    </div>
                    <div class="col-md-5 col-sm-6 padding-4">
                        <h6 class="label_title_2">عبارة عن</h6>
                        <input type="text" id="about" name="about" class="form-control input_style_2"
                               data-validation="required" data-validation-has-keyup-event="true" onkeyup="GetByan()"
                               value="<?= $about ?>">
                    </div>
                </div>
                <div class="col-md-12 no-padding">
                    <table class="table table-striped table-bordered mblgh-tb" style="table-layout: fixed;margin-top:15px;
                    " id="mytable">
                        <thead>
                        <tr class="redblacktd">
                            <th style="width: 80px;">المبلغ</th>
                            <th style="width: 80px;">رقم الحساب</th>
                            <th style="width: 18%;">إسم الحساب</th>
                            <th style="width: 260px;">البيان</th>
                            <th style="width: 7%;">الإجراء</th>
                        </tr>
                        </thead>
                        <tbody id="resultTable">
                        <!--  <pre>
                            <?php /*print_r($result_details) */ ?>
                        </pre>-->
                        <?php
                        $counter = 1;
                        if (!empty($result_details)) {
                            foreach ($result_details as $row_detail) {
                                ?>
                                <!--                                24-3-om -->
                                <tr id="<?= $row_detail->id ?>">
                                    <td>
                                        <input type="text" value="<?= $row_detail->value ?>"
                                               onkeypress="return validate_number(event);"
                                               class="form-control accountValue" step="any" id="value<?= $counter ?>"
                                               name="value[]"
                                               data-validation="required" aria-required="true" onkeyup="getSum();"
                                               onfocusout="check_val_sheek(this,<?= $counter ?>)">
                                    </td>
                                    <td>
                                        <input type="text" value="<?= $row_detail->from_rkm_hesab ?>"
                                               class="form-control testButton" name="rqm_hesab[]"
                                               id="account_num<?= $row_detail->id ?>" data-validation="required"
                                               aria-required="true" readonly=""
                                               onclick="$('#modalID').val(<?= $row_detail->id ?>); $(this).removeAttr('readonly');"
                                               ondblclick="$(this).attr('readonly','readonly'); $('#myModal').modal('show');"
                                               style="cursor:pointer;" autocomplete="off"
                                               onkeypress="return isNumberKey(event);"
                                               onblur="$(this).attr('readonly','readonly')"
                                               onkeyup="getAccountName($(this).val(),<?= $row_detail->id ?>);">
                                    </td>
                                    <td>
                                        <input type="text" value="<?= $row_detail->from_rkm_hesab_name ?>"
                                               class="form-control"
                                               name="name_hesab[]" id="account<?= $row_detail->id ?>"
                                               data-validation="required" aria-required="true" readonly="">
                                    </td>
                                    <td>
                                        <input type="text" value="" id="byan1"
                                               class="form-control byan_title"
                                               name="byan[]" data-validation="required" aria-required="true">
                                    </td>
                                    <td id="TD<?= $row_detail->id ?>">
                                        <a href="#" <?php if ($counter < sizeof($result_details)) { ?> style="display: none;" <?php } ?>
                                           onclick="addRow(); $(this).remove(); $('#deleteRow<?= $row_detail->id ?>').show();"><i
                                                    class="fa fa-plus sspan"></i></a>
                                        <a id="deleteRow<?= $row_detail->id ?>" href="#"
                                           onclick=" $('#trcheque<?= $counter ?>').remove(); getSum();
                                                   addPlusButton(<?= $row_detail->id ?>)"><i
                                                    class="fa fa-trash" aria-hidden="true"></i>
                                        </a>
                                    </td>
                                </tr>
                                <?php
                                $counter++;
                            }
                        }
                        if ($counter <= 1) {
                            ?>
                            <tr id="<?= $counter ?>">
                                <td>
                                    <input type="text" onkeypress="return validate_number(event);"
                                           class="form-control accountValue" step="any" id="value<?= $counter ?>"
                                           name="value[]"
                                           data-validation="required" aria-required="true"
                                           onkeyup="getSum(); $('#view-count-value1').html($(this).val());"
                                           onfocusout="check_val_sheek(this,<?= $counter ?>)">
                                </td>
                                <td>
                                    <input type="text" class="form-control testButton" name="rqm_hesab[]"
                                           id="account_num<?= $counter ?>" data-validation="required"
                                           aria-required="true" readonly=""
                                           onclick="$('#modalID').val(<?= $counter ?>); $(this).removeAttr('readonly');"
                                           ondblclick="$(this).attr('readonly','readonly'); $('#myModal').modal('show');"
                                           style="cursor:pointer;" autocomplete="off"
                                           onkeypress="return isNumberKey(event);"
                                           onblur="$(this).attr('readonly','readonly')"
                                           onkeyup="getAccountName($(this).val(),<?= $counter ?>);">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="name_hesab[]"
                                           id="account<?= $counter ?>" data-validation="required" aria-required="true"
                                           readonly="">
                                </td>
                                <td>
                                    <input type="text" class="form-control byan_title" id="byan1" name="byan[]"
                                           data-validation="required"
                                           aria-required="true" value="">
                                </td>
                                <td id="TD<?= $counter ?>">
                                    <a href="#"
                                       onclick="addRow(); $(this).remove(); $('#deleteRow<?= $counter ?>').show();"><i
                                                class="fa fa-plus sspan"></i></a>
                                    <a style="display: none;" id="deleteRow<?= $counter ?>" href="#"
                                       onclick=" $('#trcheque<?= $counter ?>').remove(); getSum(); addPlusButton(<?= $counter ?>)"><i
                                                class="fa fa-trash" aria-hidden="true"></i>
                                    </a>
                                </td>
                            </tr>
                        <?php } ?>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td>
                                <input type="text" name="total_value" value="<?= $total_value ?>"
                                       class="form-control total" data-validation="required"
                                       data-validation-has-keyup-event="true" readonly>
                            </td>
                            <td colspan="4">
                                <input type="text" id="valueArabic" class="form-control" value="<?= $arabicValue ?>"
                                       data-validation-has-keyup-event="true" readonly>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>


                <div class="col-md-12 " id="AttachTableDiv"></div>

                <input type="hidden" id="all_N" value="<?php echo($all_qabd_naqdi - $all_sarf_naqdi); ?>"/>
                <input type="hidden" id="all_S" value="<?php echo($all_qabd_sheek - $all_sarf_sheek); ?>"/>
                <div class="col-xs-12 text-center">
                    <br>
                    <input type="hidden" name="modalID" id="modalID">
                    <button type="<?= $submitSave ?>" class="btn btn-labeled btn-success" name="save" value="save"
                            id="myBtn">
                        <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ
                    </button>
                    <!--<button type="button" class="btn btn-labeled btn-inverse " onclick="checkInputs()"
                            data-toggle="modal" data-target="#myModal_attach">
                        <span class="btn-label"><i class="glyphicon glyphicon-cloud-upload"></i></span>مرفقات
                    </button>-->
                </div>
            </div>
            <div class="col-sm-1 padding-4">
            </div>

        </div>
    </div>
</div>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 80%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">الدليل المحاسبي </h4>
            </div>
            <div class="modal-body">
                <table id="example" class="table table-bordered example" role="table">
                    <thead>
                    <tr class="info">
                        <th style="font-size: 15px; width:88px !important; ">م</th>
                        <th style="font-size: 15px;" class="text-left"> رقم الحساب الاب</th>
                        <th style="font-size: 15px;" class="text-left">إسم الحساب الاب</th>
                        <th style="font-size: 15px;" class="text-left">رقم الحساب</th>
                        <th style="font-size: 15px;" class="text-left">إسم الحساب</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php
                    if (isset($tree) && $tree != null) {
                        buildTreeTable($tree);
                    }
                    function buildTreeTable($tree, $count = 1)
                    {
                        $types = array(1 => 'رئيسي', 2 => 'فرعي');
                        $nature = array('', 'مدين', 'دائن');
                        $follow = array(1 => 'ميزانية', 2 => 'قائمة الأنشطة');
                        // $colorArray = array(1=>'#ec9732', 2=>'#c07852', 3=>'#75bf67', 4=>'#b6ab2d', 5=>'#145b5d', 6=>'#3088d8', 7=>'#4d92a7', 8=>'#ef6c02', 9=>'#a69fb9', 10=>'#67351b', 11=>'#b6ea47', 12=>'#e18091', 13=>'#f5f44d', 14=>'#a63daa', 15=>'#fb1f73', 16=>'#9b9a92', 17=>'#8f0e0b', 18=>'#397631', 19=>'#074183', 20=>'#cab11e');
                        $colorArray = array(1 => '#ec9732', 2 => '#c07852', 3 => '#75bf67', 4 => '#b6ab2d', 5 => '#09b6bb', 6 => '#3088d8', 7 => '#4d92a7', 8 => '#ef6c02', 9 => '#a69fb9', 10 => '#67351b', 11 => '#b6ea47', 12 => '#e18091', 13 => '#f5f44d', 14 => '#a63daa', 15 => '#fb1f73', 16 => '#9b9a92', 17 => '#8f0e0b', 18 => '#397631', 19 => '#074183', 20 => '#cab11e');
                        foreach ($tree as $record) {
                            $onclick = "alert('ليس حساب فرعي');";
                            if ($record->hesab_no3 == 2) {
                                $onclick = "$('#account_num'+$('#modalID').val()).val(" . $record->code . "); $('#account'+$('#modalID').val()).val('" . $record->name . "');
                                    $('#view-count-num'+$('#modalID').val()).html('" . $record->code . "');
                                    $('#view-count-name'+$('#modalID').val()).html('" . $record->name . "');
                                    $('#myModal').modal('hide');";
                                ?>
                                <tr style="background-color: <?= $colorArray[$record->level] ?>; cursor: pointer;"
                                    onclick="<?= $onclick ?>">
                                    <td class="forTd"><?= $count++ ?></td>
                                    <td class="forTd"><?= $record->acount_parent->code ?></td>
                                    <td class="forTd"><?= $record->acount_parent->name ?></td>
                                    <td class="forTd"><?= $record->code ?></td>
                                    <td class="forTd"><?= $record->name ?></td>
                                </tr>
                                <?php
                            }
                            ?>
                            <?php
                            if (isset($record->subs)) {
                                $count = buildTreeTable($record->subs, $count++);
                            }
                        }
                        return $count;
                    }

                    ?>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">إغلاق</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="myModal_attach" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 50%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">المرفقات</h4>
            </div>
            <?php echo form_open_multipart('all_Finance_resource/all_pills/AllPills/add_attach'); ?>
            <div class="modal-body">
                <button type="button" onclick="add_row_attached()" class="btn btn-success btn-next"/>
                <i class="fa fa-plus"></i> إضافة </button><br><br>
                <div class="AttachTable">
                    <table class="table table-striped table-bordered fixed-table mytable " style="display: none; ">
                        <thead>
                        <tr class="info">
                            <th class="text-center"> إسم المرفق</th>
                            <th class="text-center">المرفق</th>
                            <th class="text-center"> الإجراء</th>
                        </tr>
                        </thead>
                        <tbody class="resultTable"></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer" style="display: inline-block;width: 100%">
                <button type="button" class="btn btn-success" style="display: inline-block;padding: 6px 12px;"
                        onclick="GetAttachTable()" id="saves" data-dismiss="modal">حفظ
                </button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>
            </div>
            <?php echo form_close(); ?>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        GetByan();
    });
</script>
<script>
    function getBankSetting(valu, this_value) {
        var code = $('option:selected', this_value).attr("data-code");
        if (valu != 0 && valu != '') {
            var dataString = 'bank_id=' + valu + '&code=' + code;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/getBankSetting',
                data: dataString,
                cache: false,
                success: function (json_data) {
                    // return alert(json_data);
                    var JSONObject = JSON.parse(json_data);
                    $('#sheek_bank_name').val(JSONObject['hesab_name']);
                    $('#sheek_rqm_hesab').val(code);
                    if (JSONObject['cheek_num'] == 0) {
                        $('#sheek_num_bank').removeAttr('readonly', 'readonly');
                        $('#sheek_num_bank').val('');
                    }
                    if (JSONObject['cheek_num'] != 0) {
                        $('#sheek_num_bank').attr('readonly', 'readonly');
                        $('#sheek_num_bank').val(JSONObject['cheek_num']);
                    }
                    GetByan();
                }
            });
        }
    }
</script>
<script>
    function GetF2aTypeArr(valu) {
        $('#js_table_members').show();
        var F2aType = valu;
        var oTable_usergroup = $('#js_table_members').DataTable({
            dom: 'Bfrtip',
            "ajax": '<?php echo base_url(); ?>all_Finance_resource/all_pills/AllPills/getConnection/' + F2aType,
            aoColumns: [
                {"bSortable": true},
                {"bSortable": true},
                {"bSortable": true},
                {"bSortable": true}
            ],
            buttons: [
                'pageLength',
                'copy',
                'excelHtml5',
                {
                    extend: "pdfHtml5",
                    orientation: 'landscape'
                },
                {
                    extend: 'print',
                    exportOptions: {columns: ':visible'},
                    orientation: 'landscape'
                },
                'colvis'
            ],
            colReorder: true,
            destroy: true
        });
    }

</script>
<script>
    function add_row_attached() {
        $(".mytable").show();
        var len = $(".resultTable").length + 1;
        $(".resultTable").append('<tr id="' + len + '">' +
            '<td class="text-center"><input type="input" name="title[]" id="title"  class="form-control  " data-validation="reuqired"></td>' +
            '<td class="text-center"><input type="file" name="sarf_files[]" id="file"  class="form-control " data-validation="reuqired"></td>' +
            '<td class="text-center"><a href="#"  onclick="DeleteRow(' + len + ')"> <i class="fa fa-trash" ></i> </a></td>' +
            '</tr>');
    }

    function DeleteRow(valu) {
        $('#' + valu).remove();
        var len = $(".resultTable").length;
        if (len == 0) {
            $(".mytable").hide();
        }
    }
</script>
<script type="text/javascript" src="<?php echo base_url() ?>asisst/admin_asset/js/jquery-1.10.1.min.js"></script>
<script>
    $("input[name=pay_method_sarf]").click(function () {
        var val = $(this).val();
        $('.byan_title').val(' ');
        if ($(this).val() == 2) {
            $('.divBank').show();
            $('#type_paid_div').hide();
            $('.bank_dd').hide();
            $('.hesab_bo').show();
        }
        if ($(this).val() == 1) {
            $('.divBank').hide();
            $('.bank_dd').hide();
            $('#type_paid_div').hide();
            $('.hesab_bo').show();
            $("#rqm_hesab").attr('data-validation', 'required');
            $("#name_hesab").attr('data-validation', 'required');
        }
        if ($(this).val() == 3) {
            $('.divBank').hide();
            $('.bank_dd').show();
            $('#type_paid_div').hide();
            $('.hesab_bo').hide();
        }
        if ($(this).val() == 4) {
            $('.bank_dd').hide();
            $('.hesab_bo').hide();
            $('#type_paid_div').show();
            //rqm_hesab
            //name_hesab
            $("#rqm_hesab").removeAttr('data-validation');
            $("#name_hesab").removeAttr('data-validation');
            var dataString = 'value=' + $(this).val();
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/Get_tahweel_banky',
                data: dataString,
                dataType: 'html',
                cache: false,
                success: function (html) {
                    $("#tahweel_banky").html(html);
                }
            });
        } else {
            $("#tahweel_banky").html(' ');
        }
        if ($(this).val() != 3) {
            var postdata = 'hesab=' + val;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/get_hesab_data',
                data: postdata,
                cache: false,
                success: function (json_data) {
                    if (json_data) {
                        var JSONObject = JSON.parse(json_data);
                        $('#rqm_hesab').val(JSONObject['rqm_hesab']);
                        $("#name_hesab").val(JSONObject['name_hesab']);
                    }
                }
            });
        }
    });
    /*
        $("input[name=pay_method_sarf]").click(function () {
            var val = $(this).val();
            $('.byan_title').val(' ');
            if ($(this).val() == 2) {
                $('.divBank').show();
                $('.bank_dd').hide();
                $('.hesab_bo').show();
            }
            if ($(this).val() == 1) {
                $('.divBank').hide();
                $('.bank_dd').hide();
                $('.hesab_bo').show();
            }
            if ($(this).val() == 3) {
                $('.divBank').hide();
                $('.bank_dd').show();
                $('.hesab_bo').hide();
            }
            if ($(this).val() != 3) {
                var postdata = 'hesab=' + val;
                $.ajax({
                    type: 'post',
                    url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/get_hesab_data',
                data: postdata,
                cache: false,
                success: function (json_data) {
                    if (json_data) {
                        var JSONObject = JSON.parse(json_data);
                        $('#rqm_hesab').val(JSONObject['rqm_hesab']);
                        $("#name_hesab").val(JSONObject['name_hesab']);
                    }
                }
            });
        }
         if ($(this).val() == 4) {
            var dataString ='value='+ $(this).val();
            $.ajax({
                type:'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/Get_tahweel_banky',
                data:dataString,
                dataType: 'html',
                cache:false,
                success: function(html){
                    $("#tahweel_banky").html(html);
                }
            });
        }else{
            $("#tahweel_banky").html(' ');
        }
    });
*/
    function GetAttachTable() {
        $('#AttachTableDiv').html('');
        $(".AttachTable").clone().appendTo('#AttachTableDiv')
        $("#myModal_attach .close").click();
    }
</script>
<script>
    function GetSheekDetails(length) {
        //alert(length);
        var $this = $('#sheek_num' + length);
        var $selectedOption = $this.find('option:selected');
        var link = $selectedOption.data('link');
        var info = link.split("/");
        $('#sheek_date' + length).val(info[1]);
        $('#bank_id_fk' + length).val(info[2]);
        (this).data('link')
    }
</script>
<script>
    function searchResults() {
        $('.example').show();
        var select_search_id = $('#select_search_id').val();
        var array_search_id = $('#array_search_id').val();
        var input_search_id = $('#input_search_id').val();
        //input_search_id  select_search_id
        $.ajax({
            type: 'post',
            url: "<?php echo base_url();?>finance_accounting/box/vouch_sarf/Vouch_sarf/get_search_pills",
            data: {
                select_search_id: select_search_id,
                array_search_id: array_search_id,
                input_search_id: input_search_id
            },
            success: function (d) {
                $('.result_search_modal').html(d);
            }
        });
    }
</script>
<script>
    function check_val(valu) {
        $("th").remove(".myRow");
        $('.result_search_modal').html('   <tr >\n' +
            '                        <th colspan="6" class="myalert"><div style="color: red;"> لا توجد نتائج للبحث !!</div></th>\n' +
            '\n' +
            '                    </tr>');
        if (valu == 'rqm_sanad' || valu === 'person_name' || valu == 'about' || valu == 'total_value' || valu == 'byan' || valu == 'name_hesab' || valu == 'sheek_num') {
            if (valu == 'about') {
                $('.myTable').append(' <th class="text-center myRow myclass" >  عبارة عن </th>');
            } else if (valu == 'byan') {
                $('.myTable').append(' <th class="text-center myRow myclass" >  البيان </th>');
            } else if (valu == 'name_hesab') {
                $('.myTable').append(' <th class="text-center myRow myclass" >  إسم الحساب </th>');
            } else if (valu == 'sheek_num') {
                $('.myTable').append(' <th class="text-center myRow myclass" > رقم الشيك </th>');
            }
            $('.input_search_id').show();
            $('#input_search_id').attr('type', 'text');
            $('#input_search_id').val('');
            $('.input_search_id2').hide();
        }
        if (valu == 'pay_method') {
            $('.input_search_id2').show();
            $('.input_search_id').hide();
        }
        if (valu == 'date_sanad_ar') {
            $('.input_search_id').show();
            $('#input_search_id').attr('type', 'date');
            $('.input_search_id2').hide();
        }
    }
</script>
<script>
    function get_select_sheeks(name, id) {
        var values = [];
        var value_select = document.getElementsByName(name);
        for (var i = 0; i < value_select.length; i++) {
            values.push(value_select[i].value);
        }
        var request = $.ajax({
            url: "<?php echo base_url() . 'finance_accounting/box/vouch_sarf/Vouch_sarf/get_sheeks'?>",
            type: "POST",
            data: {values_sheeks: values, id: id},
        });
        request.done(function (msg) {
            $('#myDiv_sheeks').html(msg);
        });
        request.fail(function (jqXHR, textStatus) {
            console.log("Request failed: " + textStatus);
        });
    }

    function set_sheeks(id, date, bank_id, value, sheek_num, sheek_id, sheek_rkm_esal) {
        var in_valu_elem = document.getElementById('value' + id);
        var in_valu = parseFloat(in_valu_elem.value);
        $('#sheek_date' + id).val(date);
        $('#sheek_num' + id).val(sheek_num);
        $('#bank_id_fk' + id).val(bank_id);
        $('#rkm_esal' + id).val(sheek_rkm_esal);
        $('#sheek_id' + id).val(sheek_id);
        $('#sheek_value' + id).val(value);
        if (in_valu != (parseFloat(value))) {
            in_valu_elem.value = value;
        }
        $("#myModalInfo_sheeks .close").click();
        getSum();
    }

    function check_val_sheek(obj, row_id) {
        var pay_method = $('#pay_method_value').val();
        if (pay_method == 2) {
            var in_valu_elem = document.getElementsByName('sheek_value[]')[row_id - 1];
            var in_valu = parseFloat(in_valu_elem.value);
            if (obj.value != in_valu) {
                obj.value = in_valu;
            }
            getSum();
        }
    }
</script>
<script>
    function add_geha(value) {
        var geha_title = $('#geha_title').val();
        if (geha_title == '') {
            $('.geha_title').show();
            return;
        }
        $('#div_update').hide();
        $('#div_add').show();
        var mob = $('#mob').val();
        var address = $('#address').val();
        if (value != 0 && value != '') {
            var dataString = 'title=' + value + '&mob=' + mob + '&address=' + address;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/insert_geha_ajax',
                data: dataString,
                dataType: 'html',
                cache: false,
                success: function (html) {
                    $('#geha_title').val(' ');
                    $('#address').val(' ');
                    $('#mob').val(' ');
                    $("#myDiv_geha").html(html);
                }
            });
        }
    }
</script>
<script>
    function update_geha(id) {
        var id = id;
        $('#geha_input').show();
        $('#div_add').hide();
        $('#div_update').show();
        $.ajax({
            url: "<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/getById",
            type: "Post",
            dataType: "html",
            data: {id: id},
            success: function (data) {
                var obj = JSON.parse(data);
                $('#geha_title').val(obj.name);
                $('#mob').val(obj.mob);
                $('#address').val(obj.address);
                $('#s_id').val(obj.id);
            }
        });
        $('#update').on('click', function () {
            var geha_title = $('#geha_title').val();
            var address = $('#address').val();
            var mob = $('#mob').val();
            var s_id = $('#s_id').val();
            $.ajax({
                url: "<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/update_geha",
                type: "Post",
                dataType: "html",
                data: {geha_title: geha_title, address: address, mob: mob, id: s_id},
                success: function (html) {
                    //  alert('hh');
                    $('#geha_title').val(' ');
                    $('#address').val(' ');
                    $('#mob').val(' ');
                    $("#myDiv_geha").html(html);
                    $('#geha_input').hide();
                }
            });
        });
    }
</script>
<script>
    function delte_geha(id) {
        //  confirm('هل انت متأكد من عملية الحذف ؟');
        var r = confirm('هل انت متأكد من عملية الحذف ؟');
        if (r == true) {
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/delete_geha',
                data: {id: id},
                dataType: 'html',
                cache: false,
                success: function (html) {
                    //   alert(html);
                    $("#myDiv_geha").html(html);
                }
            });
        }
    }
</script>
<!-------------------------ahmed 2-7-2019-------------------------------->
<script type="text/javascript">
    function GetByan() {
        var pay_method = $('input[name=pay_method_sarf]:checked').val();
        if (parseInt(pay_method) != 1) {
            var about = $('#about').val();
            var person_name = $('#person_name').val();
            if (parseInt(pay_method) == 2) {
                var sheek_num_bank = $('#sheek_num1').val();
            } else {
                if ($('#sheek_num_bank').val() != '') {
                    var sheek_num_bank = $('#sheek_num_bank').val();
                } else {
                    var sheek_num_bank = '';
                }
            }
            if ($('#bank_id_fk_eda3').val() != '' && $('#bank_id_fk_eda3').val() > 0) {
                var hesab = $('option:selected', $('#bank_id_fk_eda3')).text();
            } else {
                var hesab = '';
            }
            if ($('#bank_account_id_eda3').val() != '' && $('#bank_account_id_eda3').val() > 0) {
                var hesab_wasf = $('option:selected', $('#bank_account_id_eda3')).text();
            } else {
                var hesab_wasf = '';
            }
            // var hesab = $('option:selected',$('#bank_id_fk_eda3')).text();
            //  var hesab_wasf = $('option:selected',$('#bank_account_id_eda3')).text();
            var byan = 'تحويل إلي حساب ' + hesab + '/' + hesab_wasf;
            var MyTitle = about + sheek_num_bank + ' ' + person_name;
            //var MyTitle =about +' / شيك رقم ' + sheek_num_bank +' '+ person_name;
            var type_paid = $('#type_paid').val();
            if (type_paid != 2 && type_paid != 3) {
                if (type_paid == 4) {
                    $('.byan_title').val(byan);
                } else {
                    $('.byan_title').val(MyTitle);
                }
            } else {
                $('.byan_title').val(person_name + ' سداد ف / ');
            }
        }
    }

    /*function GetByan(){
        var pay_method =$('input[name=pay_method_sarf]:checked').val();
        if (parseInt(pay_method) != 1) {
            var about =$('#about').val();
            var person_name =$('#person_name').val();
            if (parseInt(pay_method) == 2) {
                var sheek_num_bank =   $('#sheek_num1').val();
            }else{
                if($('#sheek_num_bank').val() !=''){
                    var sheek_num_bank =   $('#sheek_num_bank').val();
                }else {
                    var sheek_num_bank = '';
                }
            }
            var MyTitle =about + sheek_num_bank +' '+ person_name;
            //var MyTitle =about +' / شيك رقم ' + sheek_num_bank +' '+ person_name;
               var type_paid =$('#type_paid').val();
               if(type_paid != 2 && type_paid !=3){
                   $('.byan_title').val(MyTitle);
               }else{
                   $('.byan_title').val(person_name +' سداد ف / ');
               }
        }
    }*/
    /* function GetByan(){
         var pay_method =$('input[name=pay_method_sarf]:checked').val();
         if (parseInt(pay_method) != 1) {
             var about =$('#about').val();
             var person_name =$('#person_name').val();
             if (parseInt(pay_method) == 2) {
                 var sheek_num_bank =   $('#sheek_num1').val();
             }else{
                 if($('#sheek_num_bank').val() !=''){
                     var sheek_num_bank =   $('#sheek_num_bank').val();
                 }else {
                     var sheek_num_bank = '';
                 }
             }
             var MyTitle =about + sheek_num_bank +' '+ person_name;
             //var MyTitle =about +' / شيك رقم ' + sheek_num_bank +' '+ person_name;
             $('.byan_title').val(MyTitle);
         }
     }*/
</script>
<script>
    function change_condition(bank_id) {
        var dataString = 'bank_id=' + bank_id;
        $.ajax({
            type: 'post',
            url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/change_condition_text',
            data: dataString,
            cache: false,
            success: function (json_data) {
                var JSONObject = JSON.parse(json_data);
                // console.log(JSONObject);
                //  location.reload();
            }
        });
    }
</script>
<script>
    function printSanedSarf(row_id) {
        var request = $.ajax({
            // print_resrv -- print_contract
            url: "<?=base_url() . 'finance_accounting/box/vouch_sarf/Vouch_sarf/printSanedSarf'?>",
            type: "POST",
            data: {row_id: row_id},
        });
        request.done(function (msg) {
            var WinPrint = window.open('', '', 'width=800,height=700,toolbar=0,scrollbars=0,status=0');
            WinPrint.document.write(msg);
            WinPrint.document.close();
            WinPrint.focus();
            /*  WinPrint.print();
            WinPrint.close();*/
        });
        request.fail(function (jqXHR, textStatus) {
            console.log("Request failed: " + textStatus);
        });
    }

    function printSanedSarf_new(row_id, sarf_date) {
        var request = $.ajax({
            // print_resrv -- print_contract
            url: "<?=base_url() . 'finance_accounting/box/vouch_sarf/Vouch_sarf/printSanedSarf'?>",
            type: "POST",
            data: {
                row_id: row_id,
                sarf_date: sarf_date
            },
        });
        request.done(function (msg) {
            var WinPrint = window.open('', '', 'width=800,height=700,toolbar=0,scrollbars=0,status=0');
            WinPrint.document.write(msg);
            WinPrint.document.close();
            WinPrint.focus();
            /*  WinPrint.print();
            WinPrint.close();*/
        });
        request.fail(function (jqXHR, textStatus) {
            console.log("Request failed: " + textStatus);
        });
    }
</script>
<script>
    function GetByArray(valu, type, pay_type) {
        if (valu != '') {
            var bank_id = $('#bank_id_fk_' + pay_type).val();
            var bank_account_id = $('#bank_account_id_' + pay_type).val();
            var bank_account_num = $('#bank_account_num_' + pay_type).val();
            if (bank_id != 0 && bank_id != '') {
                var dataString = 'id=' + valu + '&type=' + type + '&bank_id=' + bank_id;
                if (type === 'GetAccountCode') {
                    var dataString = 'id=' + valu + '&type=' + type + '&bank_id=' + bank_id + '&bank_account_id=' + bank_account_id + '&bank_account_num=' + bank_account_num;
                }
            } else {
                var dataString = 'id=' + valu + '&type=' + type;
            }
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/vouch_sarf/Vouch_sarf/GetByArray',
                data: dataString,
                cache: false,
                success: function (json_data) {
                    var JSONObject = JSON.parse(json_data);
                    if (type === 'getAccount') {
                        $('#bank_account_num_' + pay_type).html("<option>إختر </option>");
                        $('#bank_account_code_' + pay_type).html("<option>إختر </option>");
                        var html = '<option>إختر </option>';
                        for (i = 0; i < JSONObject.length; i++) {
                            html += '<option value="' + JSONObject[i].account_id_fk + '"> ' + JSONObject[i].AccountName + '</option>';
                        }
                        $(".branch_id_fk").html(html);
                    } else if (type === 'getAccountNum') {
                        console.log(JSONObject);
                        // if(JSONObject.length > 1) {
                        var html = '';
                        // }
                        for (i = 0; i < JSONObject.length; i++) {
                            html += '<option value="' + JSONObject[i].name_hesab + '"> ' + JSONObject[i].name_hesab + '</option>';
                        }
                        $(".accoun_num_id_fk").html(html);
                        var bank_account_code_html = '';
                        for (i = 0; i < JSONObject.length; i++) {
                            bank_account_code_html += '<option value="' + JSONObject[i].name_hesab + '"> ' + JSONObject[i].name_hesab + '</option>';
                        }
                        $("#bank_account_code_eda3").html(bank_account_code_html);
                        var bank_account_code_html = '';
                        for (i = 0; i < JSONObject.length; i++) {
                            bank_account_code_html += '<option value="' + JSONObject[i].rqm_hesab + '"> ' + JSONObject[i].rqm_hesab + '</option>';
                        }
                        $("#bank_account_code_" + pay_type).html(bank_account_code_html);
                        if (pay_type === 'mosatadem') {
                            $(".mostadem_num_span").html(JSONObject[0].rqm_hesab);
                        }
                    }
                }
            });
        }
    }
</script>
<script>
    function GetByanByAppend(Num) {
        var x = Num + 1;
        var byanTitle = $('#byan' + Num).val();
        // alert(byanTitle);
        $('#byan' + x).val();
    }
</script>
<script>
    function cancel_sheek(sanad_id, rqm_quod) {
        $('#sanad_id').val(sanad_id);
        $('#rqm_quod').val(rqm_quod);
    }

    function make_cancel() {
        var valid = 1;
        var text_valid = "";
        var rqm_quod = $('#rqm_quod').val();
        var sanad_id = $('#sanad_id').val();
        var cancel_reason = $('#cancel_reason').val();
        var cancel = $("input[class='cancel']:checked").val();
        if (!cancel) {
            valid = 0;
            text_valid += "- ححد اذا كنت تريد إلغاء الشيك ";
        }
        if (!cancel_reason) {
            valid = 0;
            text_valid += "- سبب الغاء الشيك ";
        }
        $.ajax({
            type: 'post',
            url: "<?= base_url() . 'finance_accounting/box/vouch_sarf/Vouch_sarf/cancel_sheek' ?>",
            data: {sanad_id: sanad_id, rqm_quod: rqm_quod, cancel_reason: cancel_reason, cancel: cancel},
            cache: false,
            beforeSend: function (xhr) {
                if (valid == 0) {
                    swal({
                        title: 'من فضلك ادخل كل الحقول ',
                        text: text_valid,
                        type: 'error',
                        confirmButtonText: 'تم'
                    });
                    xhr.abort();
                } else if (valid == 1) {
                    swal({
                        title: "جاري الإلغاء ... ",
                        text: "",
                        imageUrl: '<?php echo base_url() . 'asisst/admin_asset/img/loader.png';?>',
                        showConfirmButton: false,
                        allowOutsideClick: false
                    });
                }
            },
            success: function (html) {
                swal({
                    title: 'تم إلغاء الشيك',
                    type: 'success',
                    confirmButtonText: 'تم'
                });
                $('#modal_cancel_sheek').modal('hide');
                location.reload();
            }
        });
    }
</script>
