<link href="<?php echo base_url() ?>asisst/admin_asset/plugins/bootstrap-toggle/bootstrap-toggle.min.css?<?php echo date('l jS \of F Y h:i:s A'); ?>"
      rel="stylesheet" type="text/css"/>
<style type="text/css">
    .btn-group > .btn, .btn-group > .btn + .btn, .btn-group > .btn:first-child, .fc .fc-button-group > * {
        height: 34px !important;
        border-radius: 4px !important;
        margin: 0 !important;
    }

    .bootstrap-select.btn-group .dropdown-toggle .caret {
        right: 92% !important;
    }

    .btn-label {
        left: 12px;
    }

    input, select {
        font-weight: 600 !important;
        color: #002c52 !important;
        font-size: 16px !important;
    }

    .top-label {
        font-size: 13px;
        background-color: #428bca !important;
        border: 2px solid #428bca !important;
        text-shadow: none !important;
        font-weight: 500 !important;
    }

    .myspan {
        color: rgb(255, 0, 0);
        font-size: 12px;
        position: absolute;
        bottom: -16px;
        right: 20px;
    }

    .no-padding {
        padding-left: 0px !important;
        padding-right: 0px !important;
    }

    .print_forma {
        padding: 15px;
    }

    .piece-box {
        margin-bottom: 12px;
        border: 1px solid #73b300;
        display: inline-block;
        width: 100%;
    }

    .piece-heading {
        background-color: #9bbb59;
        display: inline-block;
        float: right;
        width: 100%;
    }

    .piece-body {
        width: 100%;
        float: right;
    }

    .bordered-bottom {
        border-bottom: 4px solid #9bbb59;
    }

    .piece-footer {
        display: inline-block;
        float: right;
        width: 100%;
        border-top: 1px solid #73b300;
    }

    .piece-heading h5 {
        margin: 4px 0;
    }

    .piece-box table {
        margin-bottom: 0
    }

    .piece-box table th,
    .piece-box table td {
        padding: 2px 8px !important;
    }

    h6 {
        font-size: 16px;
        margin-bottom: 3px;
        margin-top: 3px;
    }

    .print_forma table th {
        text-align: right;
    }

    .print_forma table tr th {
        vertical-align: middle;
    }

    .no-padding {
        padding: 0;
    }

    .header p {
        margin: 0;
    }

    .header img {
        height: 120px;
        width: 100%
    }

    .main-title {
        display: table;
        text-align: center;
        position: relative;
        height: 120px;
        width: 100%;
    }

    .main-title h4 {
        display: table-cell;
        vertical-align: bottom;
        text-align: center;
        width: 100%;
    }

    .print_forma hr {
        border-top: 1px solid #73b300;
        margin-top: 7px;
        margin-bottom: 7px;
    }

    .no-border {
        border: 0 !important;
    }

    .gray_background {
        background-color: #eee;
    }

    @media print {
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    }

    .footer img {
        width: 100%;
        height: 120px;
    }

    @page {
        size: A4;
        margin: 20px 0 0;
    }

    .open_green {
        background-color: #e6eed5;
    }

    .closed_green {
        background-color: #cdddac !important;
    }

    .table-bordered > thead > tr > th,
    .table-bordered > tbody > tr > th,
    .table-bordered > tfoot > tr > th,
    .table-bordered > thead > tr > td,
    .table-bordered > tbody > tr > td,
    .table-bordered > tfoot > tr > td {
       /* border: 1px solid #abc572;*/
    }

    .btn-close-model,
    .btn-close-model:hover,
    .btn-close-model:focus {
        background-color: #8a9e5f;
        color: #fff;
        margin-top: -20px;
    }

    .my_style {
        color: #222;
        font-size: 15px;
        font-weight: 500;
    }

    .one_three {
        width: 43% !important;
        float: right;
    }

    .two_three {
        width: 57% !important;
        float: right;
    }

    @media (min-width: 992px) {
        .col_md_10 {
            width: 10%;
            float: right;
        }

        .col_md_15 {
            width: 15%;
            float: right;
        }

        .col_md_20 {
            width: 20%;
            float: right;
        }

        .col_md_25 {
            width: 25%;
            float: right;
        }

        .col_md_30 {
            width: 30%;
            float: right;
        }

        .col_md_35 {
            width: 35%;
            float: right;
        }

        .col_md_40 {
            width: 40%;
            float: right;
        }

        .col_md_45 {
            width: 45%;
            float: right;
        }

        .col_md_50 {
            width: 50%;
            float: right;
        }

        .col_md_60 {
            width: 60%;
            float: right;
        }

        .col_md_70 {
            width: 70%;
            float: right;
        }

        .col_md_75 {
            width: 75%;
            float: right;
        }

        .col_md_80 {
            width: 80%;
            float: right;
        }

        .col_md_85 {
            width: 85%;
            float: right;
        }

        .col_md_90 {
            width: 90%;
            float: right;
        }

        .col_md_95 {
            width: 95%;
            float: right;
        }

        .col_md_100 {
            width: 100%;
            float: right;
        }
    }

    .label_title_2 {
width: 100%;
    color: #222;
    font-weight: 600;
    background-color: #fcb632;
    border: 2px solid #fcb632;
    height: 34px;
    margin: 0;
    line-height: 32px;
    padding-right: 0px;
    font-size: 16px;
    margin-bottom: 5px;
    border-radius: 10px;
    text-align: center;
    }

    .input_style_2 {
        border-radius: 0px;
        border-right: transparent;
        width: 100%;
    }

    .label-blue {
        background-color: #003665;
        border: 1px solid #003665;

        height: 34px;
        line-height: 25px !important;
        font-size: 13px !important;
        font-weight: 500 !important;
        text-align: right !important;
    }

    .bond-header {
        height: 55px;
        margin-bottom: 15px;
    }

    .bond-header .right-img img,
    .bond-header .left-img img {
        width: 100%;
        height: 55px;
    }

    .border-box {
        padding: 5px 20px;
        border: 5px double #000 !important;
        border-radius: 29px;
        font-size: 14px !important;
        color: #002c57 !important;
        font-weight: bold !important;
    }

    .border-box-h {
        padding: 3px 20px;
        border: 2px solid #222;
        border-radius: 24px;
    }

    .main-bond-title {
        display: table;
        height: 55px;
        text-align: center;
        width: 100%;
    }

    .main-bond-title h3 {
        display: table-cell;
        vertical-align: bottom;
        font-size: 12px;
    }

    .bond-body {
        padding: 10px;
        border: 2px solid #222;
        display: inline-block;
        width: 100%;
        border-radius: 30px;
        background: url(<?php echo base_url() ?>asisst/admin_asset/img/pills/back2.jpg);
        background-position: center;
        background-size: 50% 100%;
        background-repeat: no-repeat;
    }

    .bond-body h6 {
        font-size: 11px !important;
        color: #002c57 !important;
        font-weight: bold !important;
        line-height: 17px;
    }

    .bond-body h6 span {
        color: darkred;
    }

    .pad-2 {
        padding-left: 2px;
        padding-right: 2px;
    }

    .bond-footer h6 {
        font-size: 13px !important;
        color: #002c57 !important;
        font-weight: bold !important;
        line-height: 17px;
    }

    #cheq, #eda3, #shabka, #mosatadem {
        padding-top: 5px !important;
        padding-bottom: 5px !important;
    }

    .table_style {
        font-size: 11px !important;
        color: darkred !important;
        font-weight: bold !important;
        line-height: 17px !important;
        margin: 1px;
    }

    button[type=submit] {
        padding: 0px 12px;
    }

    .btn-label {
        right: -14px;
    }

    .list::-webkit-calendar-picker-indicator {
        display: none;
    }

    input[type=date]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        display: none;
    }

    input[type=date]::-webkit-clear-button {
        display: none;
        -webkit-appearance: none;
    }

    .tree ul {
        margin-right: 10px;
        position: relative;
        margin-left: 0;
    }

    .tree ul li {
        padding-left: 0;
    }

    .tree ul ul {
        margin-left: 0;
    }

    ul span {
        display: inline !important;
    }

    .fa-plus.sspan {
        background-color: #5b69bc;
        padding: 3px 6px;
        color: #fff;
        border-radius: 5px;
    }

    #colspan4 {
        text-align: right;
        color: red

    }

    .forTd {
        color: black !important;
        font-family: tahoma !important;
        font-size: 15px !important;
        font-weight: 700 !important;
    }

    .tb-table tbody th, .tb-table tbody td {
        padding: 0px !important;
    }

    .tb-table td .form-control {
        width: 100% !important;
    }
 /********************************************/
/* 
    .tablegray.table>thead>tr>td.info,
    .tablegray.table>tbody>tr>td.info,
    .tablegray.table>tfoot>tr>td.info, 
    .tablegray.table>thead>tr>th.info,
    .tablegray.table>tbody>tr>th.info,
    .tablegray.table>tfoot>tr>th.info,
    .tablegray.table>thead>tr.info>td,
    .tablegray.table>tbody>tr.info>td,
    .tablegray.table>tfoot>tr.info>td,
    .tablegray.table>thead>tr.info>th,
    .tablegray.table>tbody>tr.info>th,
    .tablegray.table>tfoot>tr.info>th {
    background-color: #09704e !important;
    color: white !important;
    font-size: 16px !important;
}   
    
.tablegray.table-bordered > thead > tr > th,
 .tablegray.table-bordered > tbody > tr > th, 
 .tablegray.table-bordered > tfoot > tr > th, 
 .tablegray.table-bordered > thead > tr > td, 
 .tablegray.table-bordered > tbody > tr > td,
  .tablegray.table-bordered > tfoot > tr > td {
    border: 1px solid #ffffff !important;
 
   background: #e8e8e8  !important;
   
    
        border-radius: 7px !important;
        font-size: 17px !important;
        color: black !important;
}    
    
    */
    
    
 /*********************************************/   
    .classtd{
        background-color: orange !important;
    }
    
    td .fa-trash {
        border-radius: 7px !important;
    }
    .fa-plus.sspan {

    border-radius: 7px !important;
    font-size: 15px !important;
}





/*

.table-scroll {
	position: relative;
	max-width: 1280px;
	width:100%;
	margin: auto;
	display:table;
}
.table-wrap {
	width: 100%;
	display:block;
	height: 400px;
	overflow: auto;
	position:relative;
	z-index:1;
}
.table-scroll table {
	width: 100%;
	margin: auto;
	border-collapse: separate;
	border-spacing: 0;
}
.table-scroll th, .table-scroll td {
	padding: 5px 10px;
	border: 1px solid #000;
	background: #fff;
	vertical-align: top;
}
.faux-table table {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	pointer-events: none;
}
.faux-table table + table {
	top: auto;
	bottom: 0;
}
.faux-table table tbody, .faux-table  tfoot {
	visibility: hidden;
	border-color: transparent;
}
.faux-table table + table thead {
	visibility: hidden;
	border-color: transparent;
}
.faux-table table + table  tfoot{
	visibility:visible;
	border-color:#000;
}
.faux-table thead th, .faux-table tfoot th, .faux-table tfoot td {
	background: #ccc;
}
.faux-table {
	position:absolute;
	top:0;
	right:0;
	left:0;
	bottom:0;
	overflow-y:scroll;
}
.faux-table thead, .faux-table tfoot, .faux-table thead th, .faux-table tfoot th, .faux-table tfoot td {
	position:relative;
	z-index:2;
}
*/
</style>



<div class="col-sm-12 col-md-12 col-xs-12  " style="padding: 0;">
    <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable">
      
        <div class="panel-body">
            <div class="form-group col-sm-12 col-xs-12 no-padding">

                <!-- Nav tabs -->
              <!--  <ul class="nav nav-tabs">
                  
                    <li class="active"><a href="#tab2" data-toggle="tab"> قيود تمت المراجعة</a></li>
                </ul>
             -->
                <div class="tab-content">
                   <!-- <div class="tab-pane fade in active" id="tab1">
                        <div class="panel-body">
                            <?php

                            if (!empty($QuodsNotTransfered)) {
                                ?>
                                
                                
                                <table id="example" class="table tablegray table-bordered table-striped" role="table">
                                    <thead>
                                    <tr class="info">
                                        <th width="2%">م</th>
                                        <th class="text-left">نوع القيد</th>
                                        <th class="text-left">حالة القيد</th>
                                        <th class="text-left">رقم القيد</th>
                                        <th class="text-left">التاريخ</th>
                                        <th class="text-left">قيمة القيد</th>
                                        <th class="text-left">وقت القيد</th>
                                        <th class="text-left">القائم بالإدخال</th>
                                        <th class="text-left">الإجراء</th>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <?php

                                    if (isset($QuodsNotTransfered) && $QuodsNotTransfered != null) {
                                        $x = 1;
                                        foreach ($QuodsNotTransfered as $value) {
                                            ?>
                                            <tr>
                                                <td><?= $x++ ?></td>
                                                <td><?= $value->no3_qued_name ?></td>
                                                <td><?= $value->halet_qued_name ?></td>
                                                <td><?= $value->rkm ?></td>
                                                <td><?= $value->qued_date_ar ?></td>
                                                <td><?= number_format($value->total_value, 2) ?></td>
                                                <td><?= date('H:i:sa', $value->date_s) ?></td>
                                                <td><?= $value->publisher_name ?></td>
                                                <td>
                                                    <a title="عرض المرفق" href="#" data-toggle="modal"
                                                       data-target="#myModal_attach2<?php echo $value->id; ?>"> <i
                                                                class="fa fa-eye" aria-hidden="true"></i> </a>


<a href="<?= base_url() . "finance_accounting/box/quods/Quods/update_quods/" . $value->id ?>"
   title="تعديل"><i class="fa fa-pencil"></i></a>


<?php if( $_SESSION['user_id'] == 14){ ?>
   <a onclick="$('#adele').attr('href', '<?= base_url() . "finance_accounting/box/quods/Quods/deleteQuod/" . $value->rkm ?>');"
   data-toggle="modal" data-target="#modal-delete" title="حذف"><i
            class="fa fa-trash"></i></a>
<a type="button" onclick="getDetails(<?= $value->id ?>)"
   class="btn btn-sm btn-info" data-toggle="modal"
   data-target="#detailsModal"
   style="padding: 3px 5px;line-height: 1;">
    <i class="glyphicon glyphicon-list"></i> 
</a>
 
<?php } ?>



<a href="<?= base_url() . "finance_accounting/box/quods/Quods/print_qued/" . $value->rkm ?>"
   target="_blank" title="طباعه">
    <i class="fa fa-print"></i></a>


                                                    <?php
                                                    /*
                                                    if($value->deport==0){?>
                                                    <button style="color: black !important;" class="btn btn-sm btn-warning tarhel<?=$value->rkm ?>"
                                                     onclick="tarhel(<?=$value->rkm ?>);">
                                                    تأمين القيد
                                                     <i class="glyphicon glyphicon-backward"></i>
                                                    </button>
                                                    <?php } else {?>
                                                    <button class="btn btn-success" onclick="tarhel(<?=$value->rkm ?>);">تم تأمين القيد </button>
                                                    <?php }
                                                    */
                                                    ?>
                                                    <?php
                                                    if ($value->deport == 0) {
                                                        ?>
                                                        <button style="color: black !important;"
                                                                class="btn btn-sm btn-warning tarhel<?= $value->rkm ?>"
                                                                onclick="tarhel(<?= $value->rkm ?>,1);"> تأمين القيد
                                                            <i class="glyphicon glyphicon-backward"></i>
                                                        </button>
                                                    <?php } else { ?>
                                                        <button class="btn btn-success"
                                                                onclick="tarhel(<?= $value->rkm ?>);">تم تأمين القيد
                                                        </button>

                                                    <?php } ?>


                                                </td>


                                            </tr>
                                            <?php
                                        }
                                    }
                                    ?>
                                    </tbody>
                                </table>

                      
                                <?php $x = 0;
                                foreach ($QuodsNotTransfered as $row) {
                                    $x++; ?>

                                    <div class="modal fade" id="myModal_attach2<?php echo $row->id; ?>" tabindex="-1"
                                         role="dialog" aria-labelledby="myModalLabel">
                                        <div class="modal-dialog" role="document" style="width: 50%">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true">&times;</span></button>
                                                    <h4 class="modal-title" id="myModalLabel">المرفقات</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="">
                                                        <?php if (!empty($row->attaches)) { ?>
                                                            <table class="table table-striped table-bordered fixed-table mytable "
                                                                <?php if (empty($row->attaches)) { ?>  style="display: none; "  <?php } ?> >
                                                                <thead>
                                                                <tr class="info">
                                                                    <th class="text-center"> إسم المرفق</th>
                                                                    <th class="text-center">المرفق</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody class="attachTable">

                                                                <?php $a = 1;
                                                                foreach ($row->attaches as $row_img) { ?>
                                                                    <tr class="<?= $a ?>">
                                                                        <td><input type="input" name="" readonly
                                                                                   id="title"
                                                                                   value="<?= $row_img->title ?>"
                                                                                   class="form-control  " ">
                                                                        </td>
                                                                        <td><img id="img_view<?= $x ?>"
                                                                                 src="<?php echo base_url() . 'uploads/images/finance_accounting/box/quods/' . $row_img->file_attached ?>"
                                                                                 width="150px" height="150px"/></td>
                                                                    </tr>
                                                                    <?php $a++;
                                                                } ?>
                                                                </tbody>
                                                            </table>
                                                        <?php } else { ?>
                                                            <div class="alert alert-danger"> لا توجد مرفقات</div>

                                                        <?php } ?>
                                                    </div>
                                                </div>
                                                <div class="modal-footer" style="display: inline-block;width: 100%">
                                                    <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">إغلاق
                                                    </button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                <?php } ?>

                              


                            <?php } else { ?>
                                <div style="color: red; font-size: large;" class="col-sm-12">لم يتم إضافة قيود قيد
                                    المراجعة
                                    !!
                                </div>

                            <?php } ?>


                        </div>
                    </div>
                    -->
                    
                    
                    
                    
                    <div class="tab-pane fade in active" id="tab2">
                        <div class="panel-body">


                            <?php if (!empty($QuodsTransfered)) { ?>
                                <table id="" class="example table table-bordered table-striped" role="table">
                                    <thead>
                                    <tr class="info">
                                        <th width="2%">م</th>
                                        <th class="text-left">نوع القيد</th>
                                        <th class="text-left">حالة القيد</th>
                                        <th class="text-left">رقم القيد</th>
                                        <th class="text-left">تاريخ القيد</th>
                                          <th class="text-left">قيمة القيد</th>
                                        <th class="text-left">وقت القيد</th>
                                        <th class="text-left">القائم بالإدخال</th>
                                        <th class="text-left">القائم بالمراجعة</th>
                                         <th class="text-left">تاريخ المراجعة</th>
                                        
                                        <th class="text-left">الإجراء</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <?php

                                    if (isset($QuodsTransfered) && $QuodsTransfered != null) {
                                        $x = 1;
                                        foreach ($QuodsTransfered as $value) {
                                            ?>
                                            <tr>
                                                <td><?= $x++ ?></td>
                                                <td><?= $value->no3_qued_name ?></td>
                                                <td><?= $value->halet_qued_name ?></td>
                                                <td><?= $value->rkm ?></td>
                                                <td><?= $value->qued_date_ar ?></td>
                                                 <td><?= number_format($value->total_value, 2) ?></td>
                                                <td><?= date('H:i:sa', $value->date_s) ?></td>
                                                <td><?= $value->publisher_name ?></td>
                                                <td><?= $value->deport_publisher_name ?></td>
                                                <td><?= $value->deport_date_ar ?></td>
                                            
                                                
                                                
                                                <td>
                                                    <a title="عرض المرفق" href="#" data-toggle="modal"
                                                       data-target="#myModal_attach3<?php echo $value->id; ?>"> <i
                                                                class="fa fa-eye" aria-hidden="true"></i> </a>

          <!--  <a href="<?= base_url() . "finance_accounting/box/quods/Quods/update_quods/" . $value->id ?>"
               title="تعديل"><i class="fa fa-pencil"></i></a>

            <a onclick="$('#adele').attr('href', '<?= base_url() . "finance_accounting/box/quods/Quods/deleteQuod/" . $value->rkm ?>');"
               data-toggle="modal" data-target="#modal-delete" title="حذف"><i
                        class="fa fa-trash"></i></a>
                        -->
            <a type="button" onclick="getDetails(<?= $value->id ?>)"
               class="btn btn-sm btn-info" data-toggle="modal"
               data-target="#detailsModal"
               style="padding: 3px 5px;line-height: 1;">
                <i class="glyphicon glyphicon-list"></i> 
            </a>
                <a onclick="print_qued(<?= $value->rkm ?>)" title="طباعه"><i
                                            class="fa fa-print"></i></a>
            <!--
            <a href="<?= base_url() . "finance_accounting/box/quods/Quods/print_qued/" . $value->rkm ?>"
               target="_blank" title="طباعه"><i class="fa fa-print"></i></a>
               -->
               
     <?php
     
      if ($value->status == 0) {
    $diplay_div = 'contents';
} else {
    $diplay_div = 'none';
} ?>
     
 <div id="div_show<?= $value->rkm ?>"
     style="display: <?= $diplay_div ?>">
     
     
     
   
     
     
    
               
     <?php if($_SESSION['user_id'] == 14 || $_SESSION['user_id'] == 19) { ?>
                    <a href="<?= base_url() . "finance_accounting/box/quods/Quods/update_quods/" . $value->id ?>"
   title="تعديل"><i class="fa fa-pencil"></i></a>
     
      <?php } ?>          
<?php



if ($value->deport == 0) {
?>
<button class="btn btn-sm btn-danger tarhel<?= $value->rkm ?>"
onclick="tarhel(<?= $value->rkm ?>);"> مراجعة القيد

</button>
<?php } else { ?>
<button class="btn btn-sm btn-danger"
onclick="tarhel(<?= $value->rkm ?>,0);">الغاء مراجعة
القيد
<i class="glyphicon glyphicon-forward"></i>
</button>

<?php } ?>

  </div>    

<div class="toggle-example">
<input id="status_hidden<?= $value->rkm ?>" type="hidden" value="<?= $value->status ?>"/>
    <input id="checkbox_toggle" class="checkbox_toggle"
           type="checkbox" <?php if ($value->status == 0) {
        echo 'checked';
    } ?> data-toggle="toggle"
           onchange="change_status($('#status_hidden<?= $value->rkm ?>').val(),<?= $value->rkm ?>)"
           data-onstyle="success" data-offstyle="danger" data-size="mini">
</div>

                                                </td>
                                            </tr>
                                            <?php
                                        }
                                    }
                                    ?>
                                    </tbody>
                                </table>

                                <!----------------------------------------------------------->
                                <?php $a = 0;
                                foreach ($QuodsTransfered as $row) {
                                    ?>

                                    <div class="modal fade" id="myModal_attach3<?php echo $row->id; ?>" tabindex="-1"
                                         role="dialog" aria-labelledby="myModalLabel">
                                        <div class="modal-dialog" role="document" style="width: 50%">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true">&times;</span></button>
                                                    <h4 class="modal-title" id="myModalLabel">المرفقات</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="">
                                                        <?php if (!empty($row->attaches)) { ?>
                                                            <table class="table table-striped table-bordered fixed-table mytable "
                                                                <?php if (empty($row->attaches)) { ?>  style="display: none; "  <?php } ?> >
                                                                <thead>
                                                                <tr class="info">
                                                                    <th class="text-center"> إسم المرفق</th>
                                                                    <th class="text-center">المرفق</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody class="attachTable">

                                                                <?php $a = 1;
                                                                foreach ($row->attaches as $row_img) { ?>
                                                                    <tr class="<?= $a ?>">
                                                                        <td><input type="input" name="" readonly
                                                                                   id="title"
                                                                                   value="<?= $row_img->title ?>"
                                                                                   class="form-control  " ">
                                                                        </td>
                                                                        <td><img id="img_view<?= $a ?>"
                                                                                 src="<?php echo base_url() . 'uploads/images/finance_accounting/box/quods/' . $row_img->file_attached ?>"
                                                                                 width="150px" height="150px"/></td>
                                                                    </tr>
                                                                    <?php $a++;
                                                                } ?>
                                                                </tbody>
                                                            </table>

                                                        <?php } else { ?>
                                                            <div class=" alert alert-danger"> لا توجد مرفقات</div>

                                                        <?php } ?>
                                                    </div>
                                                </div>
                                                <div class="modal-footer" style="display: inline-block;width: 100%">

                                                    <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">إغلاق
                                                    </button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <?php $a++;
                                } ?>
                                <!----------------------------------------------------------->


                            <?php } else { ?>
                                <div style="color: red; font-size: large;" class="col-sm-12">لم يتم إضافة قيود تمت
                                    مراجعتها
                                    !!
                                </div>

                            <?php } ?>


                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>


<!------ modals --------------------------------------------->

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 70%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">الدليل المحاسبي </h4>
            </div>
            <div class="modal-body">
                <?php //if(!empty($tree)) {

                ?>
                <table id="" class="table table-bordered example" role="table">
                    <thead>
                    <tr class="info">
                        <th style="font-size: 15px; width:88px !important; ">م</th>
                        <th style="font-size: 15px;" class="text-left">رقم الحساب</th>
                        <th style="font-size: 15px;" class="text-left">إسم الحساب</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php
                    if (isset($tree) && $tree != null) {
                        buildTreeTable($tree);
                    }
                    function buildTreeTable($tree, $count = 1)
                    {
                        $types = array(1 => 'رئيسي', 2 => 'فرعي');
                        $nature = array('', 'مدين', 'دائن');
                        $follow = array(1 => 'ميزانية', 2 => 'قائمة الأنشطة');
                        //   $colorArray = array(1=>'#FFB61E', 2=>'#3c990b', 3=>'#5b69bc', 4=>'#E5343D', 5=>'#d9edf7');
                        $colorArray = array(1 => '#ec9732', 2 => '#c07852', 3 => '#75bf67', 4 => '#b6ab2d', 5 => '#09b6bb', 6 => '#3088d8', 7 => '#4d92a7', 8 => '#ef6c02', 9 => '#a69fb9', 10 => '#67351b', 11 => '#b6ea47', 12 => '#e18091', 13 => '#f5f44d', 14 => '#a63daa', 15 => '#fb1f73', 16 => '#9b9a92', 17 => '#8f0e0b', 18 => '#397631', 19 => '#074183', 20 => '#cab11e');


                        foreach ($tree as $record) {
                            $onclick = "alert('ليس حساب فرعي');";
                            if ($record->hesab_no3 == 2) {
                                $onclick = "$('#account_num'+$('#modalID').val()).val(" . $record->code . "); $('#account'+$('#modalID').val()).val('" . $record->name . "'); $('#myModal').modal('hide');";
                            }
                            ?>
                            <tr style="background-color: <?= $colorArray[$record->level] ?>; cursor: pointer;"
                                onclick="<?= $onclick ?>">
                                <td class="forTd"><?= $count++ ?></td>
                                <td class="forTd"><?= $record->code ?></td>
                                <td class="forTd"><?= $record->name ?></td>
                            </tr>
                            <?php
                            if (isset($record->subs)) {
                                $count = buildTreeTable($record->subs, $count++);
                            }
                        }
                        return $count;
                    }

                    ?>
                    </tbody>
                </table>
                <?php // } ?>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="detailsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 95%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">تفاصيل القيد </h4>
            </div>
            <div class="modal-body " id="optionearea1">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="myModal_attach" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 50%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">المرفقات</h4>
            </div>
            <div class="modal-body">
                <button type="button" onclick="add_row()" class="btn btn-success btn-next"/>
                <i class="fa fa-plus"></i> إضافة </button><br><br>
                <div class="AttachTable">


                    <table class="table table-striped table-bordered fixed-table mytable "
                        <?php if (empty($result->attaches)) { ?>  style="display: none; "  <?php } ?> >
                        <thead>
                        <tr class="info">
                            <th class="text-center"> إسم المرفق</th>
                            <th class="text-center">المرفق</th>
                            <th class="text-center"> الإجراء</th>
                        </tr>
                        </thead>
                        <tbody class="attachTable">
                        <?php if (!empty($result->attaches)) { ?>
                            <?php $x = 1;
                            foreach ($result->attaches as $row_img) { ?>
                                <tr class="<?= $x ?>">
                                    <td><input type="input" name="title[]" readonly id="title"
                                               value="<?= $row_img->title ?>" class="form-control  "
                                               data-validation="reuqired"></td>
                                    <td><img id="img_view<?= $x ?>"
                                             src="<?php echo base_url() . 'uploads/images/finance_accounting/box/quods/' . $row_img->file_attached ?>"
                                             width="150px" height="150px"/></td>
                                    <td>

                                        <a onclick="$('#adele').attr('href', '<?php echo base_url() . 'finance_accounting/box/quods/Quods/deleteQuodImg/' . $row_img->id . '/' . $row_img->qued_rkm_fk ?>');"
                                           data-toggle="modal" data-target="#modal-delete" title="حذف"><i
                                                    class="fa fa-trash"></i></a>


                                        <!--              <a href="<?php /*echo  base_url().'finance_accounting/box/quods/Quods/deleteQuodImg/'.$row_img->id.'/'.$row_img->qued_rkm_fk*/ ?>"  onclick="DeleteRowImg('<? /*=$x*/ ?>')"> <i class="fa fa-trash" ></i> </a></td>-->
                                </tr>
                                <?php $x++;
                            }
                        } ?>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer" style="display: inline-block;width: 100%">
                <!--<input type="hidden" name="id" id="id" >-->
                <button type="button" class="btn btn-success" style="display: inline-block;padding: 6px 12px;"
                        onclick="GetAttachTable()"
                        id="saves" data-dismiss="modal">حفظ
                </button>
                <button type="button" class="btn btn-danger"
                        data-dismiss="modal">إغلاق
                </button>

            </div>
        </div>
    </div>
</div>


<!--
        <div class="modal fade" id="myModal_search" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document" style="width: 80%">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">بحث</h4>
              </div>
              <div class="modal-body" id="div_search">

                <div class="col_md_3">


                  <div class="col_md_3  no-padding ">
                    <h6 class="label_title_2  ">بحث ب </h6>
                  </div>
                  <div class="col-md-2 col-sm-6  no-padding">
                    <?php
                        $array_search = array(
                            'no3_qued'=>'نوع القيد',
                            'halet_qued'=>'حالة القيد',
                             'rkm'=>'رقم القيد',
                             'qued_date'=>'تاريخ القيد',
                             'rkm_hesab'=>'رقم الحساب',
                             'hesab_name'=>'إسم الحساب',
                             'marg3'=>'المرجع',
                             'harka_id'=>'العملية',
                             'byan'=>'البيــــــــــان',
                        );
                        ?>
                    <select id="array_search_id" class="form-control  input_style_2 " aria-required="true" onchange="check_val($(this).val())">
                      <option value="">إختر</option>


                      <?php foreach ($array_search as $key=>$row_search){ ?>
                      <option value="<?=$key?>"><?=$row_search?> </option>
                      <?php } ?>
                    </select>

                  </div>

                </div>

                <div class="col_md_6 padding-4 input_search_id" style="display:none; margin-left: 0;">


                  <div class="col-md-4 col-sm-4  no-padding">

                    <input id="input_search_id" value="" class="form-control  input_style_2 " aria-required="true">


                  </div>

                </div>


                <button type="button" onclick="searchResults()" class="btn btn-success btn-next" /><i class="fa fa-search-plus"></i> بحث </button><br><br>


                <div class="search_div" >


                </div>

              </div>
              <div class="modal-footer" style="display: inline-block;width: 100%">

                <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>

              </div>
            </div>
          </div>
        </div>

-->





        <div class="modal fade" id="myModal_search" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document" style="width: 98%">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">بحث</h4>
              </div>
              <div class="modal-body" id="div_search">

                <div class="col_md_3">

                  <div class="col-md-2 col-sm-6  no-padding">
                    <?php
                        $array_search = array(
                            'no3_qued'=>'نوع القيد',
                            'halet_qued'=>'حالة القيد',
                             'rkm'=>'رقم القيد',
                             'qued_date'=>'تاريخ القيد',
                             'rkm_hesab'=>'رقم الحساب',
                             'hesab_name'=>'إسم الحساب',
                             'marg3'=>'المرجع',
                             'harka_id'=>'العملية',
                             'byan'=>'البيــــــــــان',
                        );
                        ?>
                    <select id="array_search_id" class="form-control  input_style_2 " aria-required="true" onchange="check_val($(this).val())">
                      <option value="">إختر</option>


                      <?php foreach ($array_search as $key=>$row_search){ ?>
                      <option value="<?=$key?>"><?=$row_search?> </option>
                      <?php } ?>
                    </select>

                  </div>

                </div>

                <div class="col_md_6 padding-4 input_search_id" style="display:none; margin-left: 0;">


                  <div class="col-md-4 col-sm-4  no-padding">

                    <input id="input_search_id" value="" class="form-control  input_style_2 " aria-required="true">
                    <select id="select_search_id" class="form-control  input_style_2 " aria-required="true" >
                     <option value="">إختر</option>
                      <?php foreach ($no3_qued_arr as $key => $value) { ?>
                      <option value="<?php echo $key; ?>"><?= $value ?></option>
                      <?php } ?>
                    </select>
                    <?php $halet_arr = array(1 => 'تمت المراجعة', 2 => 'قيد المراجعة'); ?>
                    <select id="select_search_id2" class="form-control  input_style_2 " aria-required="true" >
                      <option value="">إختر</option>
                      <?php foreach ($halet_arr as $key => $value) { ?>
                      <option value="<?php echo $key ; ?>"><?= $value ?></option>
                      <?php } ?>
                    </select>
                  <div id="date_search_id">

                    <div class="form-group col-md-6 col-sm-6 ">
                      <!--  <label class="label "> الفترة من </label>-->
                        <input type="date" name="from_date" id="from_date" value="<?php echo date('Y-m-d'); ?>" class="form-control ">
                    </div>


                    <div class="form-group col-md-6 col-sm-6 ">
                      <!--  <label class="label "> الفترة إلي </label>-->
                        <input type="date" name="to_date" id="to_date" value="<?php echo date('Y-m-d'); ?>"  class="form-control ">
                    </div>
                    </div>
                  </div>

                </div>


                <button type="button" onclick="searchResults()" class="btn btn-success btn-next" /><i class="fa fa-search-plus"></i> بحث </button><br><br>


                <div class="search_div" >


                </div>

              </div>
              <div class="modal-footer" style="display: inline-block;width: 100%">

                <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>

              </div>
            </div>
          </div>
        </div>


        <div class="modal fade" id="detailsModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >
          <div class="modal-dialog" role="document" style="width: 95%">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">تفاصيل القيد</h4>
              </div>
              <div class="modal-body" id="detailsModal_div" style="height:500px;overflow-y:scroll">

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" >إغلاق</button>
              </div>
            </div>
          </div>
        </div>

<!------ modals --------------------------------------------->


<script src="<?php echo base_url() ?>asisst/admin_asset/js/jquery-1.10.1.min.js" type="text/javascript"></script>


<script src="<?php echo base_url() ?>asisst/admin_asset/plugins/bootstrap-toggle/bootstrap-toggle.min.js"
        type="text/javascript"></script>
 <script>

    $('.checkbox_toggle').bootstrapToggle({
      on: 'نشط',
      off: 'غير نشط'
    });

</script>



<script>

   function change_status(valu, id) {
        $.ajax({
            type: 'post',
            url: "<?php echo base_url();?>finance_accounting/box/quods/Quods/change_status",
            data: {valu: valu, id: id},
            success: function (msg) {
                var obj = JSON.parse(msg);
                var status = obj.status;
                console.log('status  ::'+status);
                $('#status_hidden'+id).val(status);
                  if (status == 0) {
                    $('#div_show' + id).show();
                } else {
                    $('#div_show' + id).hide();

                }
                
            }

        });
    }


</script>




<script>


    function addEditRow(div) {

        var x = document.getElementById('QuodresultTable');
        var id = x.rows.length + 1;
        var html = `<tr id="` + id + `">\
                        <td>\
                        <input type="text"   onkeypress="return validate_number(event);" class="form-control accountmaden all_total" id="accountdayen` + id + `" step="any" name="maden_value[]" data-validation="required" aria-required="true"  onkeyup="getTableSum();GetZeroFunction('accountmaden` + id + `');">\
                        </td>\
                        <td>\
                        <input type="text"  onkeypress="return validate_number(event);" class="form-control accountdayen all_total"  id="accountmaden` + id + `" step="any" name="dayen_value[]" data-validation="required" aria-required="true"   onkeyup="getTableSum();GetZeroFunction('accountdayen` + id + `');">\
                        </td>\

                        <td>\
                        <input type="text" class="form-control testButton" name="rkm_hesab[]" id="account_num` + id + `" data-validation="required" aria-required="true" readonly="" onclick="$('#modalID').val(` + id + `); $(this).removeAttr('readonly');" ondblclick="$(this).attr('readonly','readonly'); $('#myModal').modal('show');" style="cursor:pointer;" autocomplete="off" onkeypress="return isNumberKey(event);" onblur="$(this).attr('readonly','readonly')" onkeyup="getAccountName($(this).val(),` + id + `);">\
                        </td>\
                        <td>\
                        <input type="text" class="form-control" name="hesab_name[]" id="account` + id + `" data-validation="required" aria-required="true" readonly="" >\
                        </td>\
                        <td>\
                        <input type="text" class="form-control " step="any" name="marg3[]">\
                        </td>\
                        <td>\
                        <select class="form-control " name="harka_id[]" id="harka_id` + id + `">
                         <option value="">إختر</option>
                      <?php
            $pay_method_arr = array('إختر', 1 => 'نقدي', 2 => 'شيك', 3 => 'شبكة', 4 => 'إيداع نقدي'
            , 5 => 'إيداع شيك', 6 => 'تحويل', 7 => 'أمر مستديم', 8 => 'صرف شيك',
             9=>'إثبات إستحقاق',
                                    10=>'إثبات سداد',
                                    11=>'تسوية',
                                    12=>'سداد فواتير',
                                    13=>'سداد مدفوعات حكومية',
                                    14=>'إستلام عينى',
                                    15=>'شراء عينى',
                                    16=>'صرف عينى');

            if(isset($pay_method_arr) && !empty($pay_method_arr)) {
            for($a = 1;$a < sizeof($pay_method_arr);$a++){
            ?>
                                                                <option value="<?php echo $a;?>">
                                                                    <?php echo $pay_method_arr[$a];?></option >
                                                                <?php
            }
            }
            ?>
                        </select>
                        </td>\
                        <td>\
                        <input type="text" class="form-control" name="byan[]"  aria-required="true">\
                        </td>\
                        <td id="TD` + id + `">\
                        \
                        <a class="pull-right" id="deleteRow` + id + `" onclick="addPlusButtonQuod(` + id + `); getTableSum();"> <i class="fa fa-trash" aria-hidden="true"></i>
                        </a>\
                        </td>\
                        </tr>`;
        $("#" + div).after(html);
    }

</script>

<script>

    document.addEventListener("DOMContentLoaded", function (event) {
        getTableSum();
    });

    function addNewRow() {
        var x = document.getElementById('QuodresultTable');
         var id = x.rows.length + 1;
       // var id = parseFloat($("#QuodresultTable tr:last").attr('id')) + 1;

        var html = `<tr id="` + id + `">\
                        <td>\
                        <input type="text"   onkeypress="return validate_number(event);" class="form-control accountmaden all_total" id="accountdayen` + id + `" step="any" name="maden_value[]" data-validation="required" aria-required="true"  onkeyup="getTableSum();GetZeroFunction('accountmaden` + id + `');">\
                        </td>\
                        <td>\
                        <input type="text"  onkeypress="return validate_number(event);" class="form-control accountdayen all_total"  id="accountmaden` + id + `" step="any" name="dayen_value[]" data-validation="required" aria-required="true"   onkeyup="getTableSum();GetZeroFunction('accountdayen` + id + `');">\
                        </td>\

                        <td>\
                        <input type="text" class="form-control testButton" name="rkm_hesab[]" id="account_num` + id + `" data-validation="required" aria-required="true" readonly="" onclick="$('#modalID').val(` + id + `); $(this).removeAttr('readonly');" ondblclick="$(this).attr('readonly','readonly'); $('#myModal').modal('show');" style="cursor:pointer;" autocomplete="off" onkeypress="return isNumberKey(event);" onblur="$(this).attr('readonly','readonly')" onkeyup="getAccountName($(this).val(),` + id + `);">\
                        </td>\
                        <td>\
                        <input type="text" class="form-control" name="hesab_name[]" id="account` + id + `" data-validation="required" aria-required="true" readonly="" >\
                        </td>\
                        <td>\
                        <input type="text" class="form-control " step="any" name="marg3[]">\
                        </td>\
                        <td>\
                        <select class="form-control " name="harka_id[]" id="harka_id` + id + `">
                         <option value="">إختر</option>
                      <?php
            $pay_method_arr = array('إختر', 1 => 'نقدي', 2 => 'شيك', 3 => 'شبكة', 4 => 'إيداع نقدي'
            , 5 => 'إيداع شيك', 6 => 'تحويل', 7 => 'أمر مستديم', 8 => 'صرف شيك',
             9=>'إثبات إستحقاق',
                                    10=>'إثبات سداد',
                                    11=>'تسوية',
                                    12=>'سداد فواتير',
                                    13=>'سداد مدفوعات حكومية',
                                    14=>'إستلام عينى',
                                    15=>'شراء عينى',
                                    16=>'صرف عينى');

            if(isset($pay_method_arr) && !empty($pay_method_arr)) {
            for($a = 1;$a < sizeof($pay_method_arr);$a++){
            ?>
                                                                <option value="<?php echo $a;?>">
                                                                    <?php echo $pay_method_arr[$a];?></option >
                                                                <?php
            }
            }
            ?>
                        </select>
                        </td>\
                        <td>\
                        <input type="text" class="form-control" name="byan[]"  aria-required="true">\
                        </td>\
                        <td id="TD` + id + `">\
                        \
                        <a class="pull-right" id="deleteRow` + id + `" onclick="addPlusButtonQuod(` + id + `); getTableSum();"> <i class="fa fa-trash" aria-hidden="true"></i>
                        </a>\
                        </td>\
                        </tr>`;


        $("#QuodresultTable").append(html);
    }


    function addPlusButtonQuod(id) {
        if (parseFloat($("#QuodresultTable tr:last").attr('id')) == id) {
            $('#' + id).remove();
            var last = $("#QuodresultTable tr:last").attr('id');
            //$('#TD' + $("#QuodresultTable tr:last").attr('id')).append(`<a  onclick="addNewRow(); $(this).remove(); $('#deleteRow` + last + `').show();"><i class="fa fa-plus sspan"></i></a>`);
        } else {
            $('#' + id).remove();
        }
    }

    function isFloat(n) {
        return n === +n && n !== (n|0);
    }

    function getTableSum() {


        var total = 0;
        $(".accountmaden").each(function () {
            if ($(this).val()) {
                total += parseFloat($(this).val());
            }
        });
       // $('#total').html(total.toFixed(2));
        $('.total').val(total);
        if (isFloat(total) == true) {
            $('#total').html(total.toFixed(2));

        } else {
            $('#total').html(total);

        }


        var total2 = 0;
        $(".accountdayen").each(function () {
            if ($(this).val()) {
                total2 += parseFloat($(this).val());
            }
        });


        if (isFloat(total2) == true) {
            $('#total2').html(total2.toFixed(2));

        } else {
            $('#total2').html(total2);

        }

      var qued_percent = Math.abs(total - total2);

        if (isFloat(qued_percent) == true) {
            $('#qued_percent').html(qued_percent.toFixed(2));

        } else {
            $('#qued_percent').html(qued_percent.toFixed(2));

        }

//alert(parseFloat((total).toFixed(2)));
//parseInt(qued_percent) == 0  &&
        if ( parseFloat((total).toFixed(2)) == parseFloat((total2).toFixed(2)) ) {
            GetTotalValueArabic(total2);
            $('#qued_percent').attr('style', 'background-color:#c0ff9f;font-size:18px;font-weight:bold;text-align:center');
            $('#total').attr('style', 'background-color:#c0ff9f;font-size:18px;font-weight:bold;text-align:center');
            $('#total2').attr('style', 'background-color:#c0ff9f;font-size:18px;font-weight:bold;text-align:center');
            $(".myBtnInsert").attr('onclick', "save_me()");
            $('.myBtn').prop('type', 'submit');

        } else {
            $('#qued_percent').attr('style', 'background-color:#ffaeae;font-size:18px;font-weight:bold;text-align:center');
            $('#total').attr('style', 'background-color:#ffaeae;font-size:18px;font-weight:bold;text-align:center');
            $('#total2').attr('style', 'background-color:#ffaeae;font-size:18px;font-weight:bold;text-align:center');
            $('.myBtn').prop('type', 'button');
            $(".myBtnInsert").removeAttr('onclick', "save_me()");
            $('#total_value_arabic').html(' ');

        }



        /*if (total > 0 && total2 > 0) {

            if (total != total2) {


                $('#total').attr('style', 'background-color:#ffaeae;font-size:18px;font-weight:bold;text-align:center');
                $('#total2').attr('style', 'background-color:#ffaeae;font-size:18px;font-weight:bold;text-align:center');
                $('.myBtn').prop('type', 'button');
                $(".myBtnInsert").removeAttr('onclick', "save_me()");
                $('#total_value_arabic').html(' ');

            } else {
                GetTotalValueArabic(total2);

                $('#total').attr('style', 'background-color:#c0ff9f;font-size:18px;font-weight:bold;text-align:center');
                $('#total2').attr('style', 'background-color:#c0ff9f;font-size:18px;font-weight:bold;text-align:center');
                $(".myBtnInsert").attr('onclick', "save_me()");
                $('.myBtn').prop('type', 'submit');


            }
        }*/


        var x = document.getElementById('QuodresultTable');
        if (x.rows.length == 1) {
            $('#deleteRow' + $("#resultTable tr:last").attr('id') + '').css({display: 'none'});
        }


    }


    $("input[name=searchType]").click(function () {
        if ($(this).val() == 2) {
            $('.divDate').show();
            $('.dateSearch').removeAttr('disabled');
            $('.dateSearch').attr('data-validation', 'required');
        } else {
            $('.divDate').hide();
            $('.dateSearch').removeAttr('data-validation');
            $('.dateSearch').attr('disabled', 'disabled');
        }
    });


</script>


<Script>
    function GetZeroFunction(MyId) {
        $('#' + MyId).val(0);
    }
</Script>


        <script>
        /*  function check_val(value) {
            $('#input_search_id').val('');
       
            if (value === 'byan') {
              $('.input_search_id').show();
              $('#input_search_id').attr('type', 'text');
              $('.input_search_id2').hide();
            } else {
              $('.input_search_id').hide();

            }

          }*/
        </script>



        <script>
        /* function searchResults() {
          //  $('.search_div').show();
            // var select_search_id=$('#select_search_id').val();
            var array_search_id = $('#array_search_id').val();
            var input_search_id = $('#input_search_id').val();
            if (array_search_id == '' || input_search_id == '') {
              alert('من فضلك ادخل القيمه ');
              return;
            }
            //input_search_id  select_search_id
            $.ajax({
                type:'post',
                url: "<?php echo base_url();?>finance_accounting/box/quods/Quods/get_result_search",
                 data:{
                   array_search_id: array_search_id,
                   input_search_id: input_search_id
                 },
                dataType: 'html',
                cache:false,
                beforeSend: function() {
                    $('.search_div').html('<div class="text-center"><img src="<?php echo base_url()?>asisst/admin_asset/img/loader.png" alt=""></div>');
                },
                success: function(html){
                    $(".search_div").html(html);
                }
            });





            }*/
        </script>



        <script>
          function check_val(value) {
            $('#input_search_id').val('');
            /*  if(valu=='k_num' ||valu=='k_name' ||valu=='k_mob'   )
              {
                  $('.input_search_id').show();
                  $('#input_search_id').attr('type','text');

                  $('.input_search_id2').hide();


              }*/

            if (value === 'byan' || value ==='rkm') {
              $('.input_search_id').show();
              $('#input_search_id').attr('type', 'text');
              $('#select_search_id').hide();
              $('#select_search_id2').hide();
              $('#date_search_id').hide();
              $('#input_search_id').show();
            }else if (value ==='no3_qued') {
              $('.input_search_id').show();
              $('#input_search_id').hide();
              $('#select_search_id2').hide();
              $('#date_search_id').hide();
              $('#select_search_id').show();


            } else if ( value ==='halet_qued') {
              $('.input_search_id').show();
              $('#input_search_id').hide();
              $('#select_search_id').hide();
              $('#select_search_id2').show();
              $('#date_search_id').hide();
            }else if (value ==='qued_date') {
              $('.input_search_id').show();
              $('#input_search_id').hide();
              $('#select_search_id').hide();
              $('#select_search_id2').hide();
              $('#date_search_id').show();
            }else {
              $('.input_search_id').hide();

            }

          }
        </script>



        <script>
          function searchResults() {

          let from_date =$('#from_date').val();
          let   to_date =$('#to_date').val();
          //  $('.search_div').show();
            // var select_search_id=$('#select_search_id').val();
            var array_search_id = $('#array_search_id').val();


            if( array_search_id ==='no3_qued'){

              var input_search_id = $('#select_search_id').val();
            }else if (array_search_id ==='halet_qued') {
              var input_search_id = $('#select_search_id2').val();
            }else if (array_search_id ==='qued_date') {
                    var input_search_id =from_date +'/'+ to_date;
            }else {
              var input_search_id = $('#input_search_id').val();

            }


            if (array_search_id == '' || input_search_id == '' ) {
              alert('من فضلك ادخل القيمه ');
              return;
            }
            //input_search_id  select_search_id
            $.ajax({
                type:'post',
                url: "<?php echo base_url();?>finance_accounting/box/quods/Quods/get_result_search",
                 data:{
                   array_search_id: array_search_id,
                   input_search_id: input_search_id
                 },
                dataType: 'html',
                cache:false,
                beforeSend: function() {
                    $('.search_div').html('<div class="text-center"><img src="<?php echo base_url()?>asisst/admin_asset/img/loader.png" alt=""></div>');
                },
                success: function(html){
                    $(".search_div").html(html);
                }
            });





            }
        </script>





<script>
    function getDetails(valu) {
        if (valu != 0 && valu != '') {
            var dataString = 'id=' + valu;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/quods/Quods/getDetails',
                data: dataString,
                dataType: 'html',
                cache: false,
                success: function (html) {
                    $("#optionearea1").html(html);
                }
            });

        }

    }

</script>


<script>
    function checkInputs() {

        var inputsNotEmprty = []
        $(".inputclass").each(function () {
            if ($(this).val() != '') {
                inputsNotEmprty.push($(this).val());
            }
        });
        if ($('.inputclass').length == inputsNotEmprty.length) {
            $("#attach_button").attr('data-target', '#myModal_attach');
        } else {
            $("#attach_button").removeAttr('data-target', '#myModal_attach');
            alert('تأكد من إدخال الحقول الناقصة!');
        }

    }
</script>


<script>
    function add_row() {
        $(".mytable").show();
        //var x = document.getElementById('resultTable');
        var len = $(".attachTable").length + 1;

        $(".attachTable").append('<tr class="' + len + '"><td><input type="input" name="title[]" id="title"  class="form-control  " data-validation="reuqired"></td><td><input type="file" name="file[]" id="file"  class="form-control " data-validation="reuqired"></td><td><a   onclick="DeleteRowImg(' + len + ')"> <i class="fa fa-trash" ></i> </a></td></tr>');
    }

    function DeleteRowImg(valu) {
        $('.' + valu).remove();
        // var x = document.getElementById('resultTable');
        var len = $(".attachTable").length;
        if (len == 0) {
            $(".mytable").hide();
        }
    }

</script>

<script>

    function GetAttachTable() {
        $('#AttachTableDiv').html('');
        $(".AttachTable").clone().appendTo('#AttachTableDiv')
        $("#myModal_attach .close").click();
    }


</script>


<script>

    function GetTotalValueArabic(valu) {

        if (valu != 0 && valu != '') {
            var dataString = 'number=' + valu;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/quods/Quods/GetTotalValueArabic',
                data: dataString,
                cache: false,
                success: function (json_data) {
                    var JSONObject = JSON.parse(json_data);
                    $('#total_value_arabic').html('   مبلغ وقدره :' + JSONObject['title']);
                }
            });

        }

    }
</script>
<!----------------------------------------->

<script>


    function CheckRkm(value) {


        if (value != 0 && value != '') {
            // alert(value);
            // return;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>finance_accounting/box/quods/Quods/CheckRkm',
                data: {rkm: value},
                cache: false,
                success: function (json_data) {
                    var JSONObject = JSON.parse(json_data);

                    //  console.log(JSONObject);
                    if (JSONObject > 0) {
                        $('.myBtn').prop('type', 'button');


                        swal({
                            title: "رقم القيد مسجل من قبل !",
                            text: "",
                            type: "danger",
                            showCancelButton: true,
                        });

                        //alert(' رقم القيد مسجل من قبل !!!');
                        setTimeout(function () {
                            $('#rkm').val(<?php echo $rkm;?>);
                            //$('.myBtn').prop('type', 'submit');
                        }, 500);


                    } else if (JSONObject == 0) {


                    }
                    /*document.getElementById("value").setAttribute("readonly","readonly");
                    $('#value').val(JSONObject);*/
                }
            });
            // return false;


        }


    }


    function delete_me(value) {
        swal({
            title: "هل تريد حذف القيد!",
            text: "",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            cancelButtonClass: "btn-danger",
            confirmButtonText: "نعم, قم بالحذف!",
            cancelButtonText: "لا, إلغاء الأمر!",
        }, function (isConfirm) {
            if (isConfirm) {
                window.location.href = "<?php echo base_url();?>finance_accounting/box/quods/Quods/deleteQuod/" + value;
            }

        });


    }

</script>

<script>


    function save_me() {
        var inputsNotEmprty = []
        $(".inputclass").each(function () {
            if ($(this).val() != '') {
                inputsNotEmprty.push($(this).val());
            }
        });
        if ($('.inputclass').length == inputsNotEmprty.length) {
            //$("#attach_button").attr('data-target','#myModal_attach');
        } else {
            // $("#attach_button").removeAttr('data-target','#myModal_attach');
            alert('تأكد من إدخال الحقول الناقصة!   ');
            return;
        }
        Swal.fire({
            title: "هل تريد حفظ القيد!",
            text: "",
            type: 'warning',

            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            cancelButtonText: "لا, إلغاء الأمر!",
            confirmButtonText: "نعم, قم بالحفظ!",
        }).then((result) => {
            if (result.value) {
                $('#form1').submit();

            }
        })
        /*  swal({
              title: "هل تريد حفظ القيد!",
              text: "",
              type: "warning",
              showCancelButton: true,
              confirmButtonClass: "btn-success",
              cancelButtonClass: "btn-danger",
              confirmButtonText: "نعم, قم بالحفظ!",
              cancelButtonText: "لا, إلغاء الأمر!",
          }, function (isConfirm) {
              if (isConfirm) {
                  var dataString = $('#form1').serialize();
                  //console.log(dataString);
                  $.ajax({
                      type:'post',
                      url: '<?php echo base_url() ?>finance_accounting/box/quods/Quods/add_quods_form',
                    data:dataString,
                    cache:false,
                    success: function(json_data){
                        console.log(json_data);
                        window.location.reload();

                    }
                });

            }

        });*/

    }

</script>
<!-------------------------------------------------------------------------->
<script>
    function tarhel(valu) {
        $.ajax({
            type: 'post',
            url: "<?php echo base_url();?>finance_accounting/box/quods/Quods/trahel_qued",
            data: {valu: valu},


            success: function (d) {

                alert(d);
                $('.tarhel' + valu).removeClass("btn-danger");
                $('.tarhel' + valu).addClass("btn-success");
                $('.tarhel' + valu).text('تم مراجعة القيد');
            }

        });
    }


</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2"></script>

<script>
    function tarhel(valu, num) {
        if (num == 1) {
            var title = "هل انت متأكد من عملية مراجعة القيد؟";
            var confirm = "نعم, قم بتنفيذ العملية";
            var text2 = "عند الضغط علي نعم سيتم تحويل القيد إلي القيود قيد المراجعة";
        } else {
            var title = "هل انت متأكد من عملية التحويل؟";
            var confirm = "نعم, قم بالغاء التأمين";
            var text2 = "عند الضغط علي نعم سيتم تحويل القيد إلي القيود قيد المراجعة";
        }

        Swal.fire({
            title: title,
            text: text2,
            type: 'warning',

            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            cancelButtonText: 'ليس الان',
            confirmButtonText: confirm
        }).then((result) => {
            if (result.value) {
                Swal.fire(
                    'نجاح!',
                    'تم العمليه .',
                )
                window.location.href = "<?php echo base_url();?>finance_accounting/box/quods/Quods/trahel_qued/" + valu + "/" + num;
            }
        })
    }

</script>


<!---------------------------------------------------------------------------------------------------->


		<script>
           function check_tr(valu)
    {
        //alert(valu);
        $('.tr').removeClass('info');
        $('.form-control').removeClass('classtd');
        $('#'+valu).addClass('info');
        $('.tr'+valu).addClass('classtd');
       /// $('.tr'+valu).css("background-color", "gray");
        //$('#'+valu:td).hide();
    }
   /* function check_tr(valu)
    {
        //alert(valu);
        $('.tr').removeClass('info');
        $('#'+valu).addClass('info');
    }*/
</script>


<script>

/*
  var fauxTable = document.getElementById("faux-table");
  var mainTable = document.getElementById("mytable");
  var clonedElement = mainTable.cloneNode(true);
  var clonedElement2 = mainTable.cloneNode(true);
  clonedElement.id = "";
  clonedElement2.id = "";
  fauxTable.appendChild(clonedElement);
  fauxTable.appendChild(clonedElement2);


*/

</script>
        <script>

        $('#detailsModal2').on('show', function() {
        $('#myModal_search').css('opacity', .5);
        $('#myModal_search').unbind();
        });
        $('#detailsModal2').on('hidden', function() {
        $('#myModal_search').css('opacity', 1);
        $('#myModal_search').removeData("modal").modal({});
        });

        </script>
        
        
                <script>
    function print_qued(row_id) {
        var request = $.ajax({
            // print_resrv -- print_contract
            url: "<?=base_url() . 'finance_accounting/box/quods/Quods/print_qued'?>",
            type: "POST",
            data: {row_id: row_id},
        });
        request.done(function (msg) {
            var WinPrint = window.open('', '', 'width=800,height=700,toolbar=0,scrollbars=0,status=0');
            WinPrint.document.write(msg);
            WinPrint.document.close();
            WinPrint.focus();
            /*  WinPrint.print();
            WinPrint.close();*/
        });
        request.fail(function (jqXHR, textStatus) {
            console.log("Request failed: " + textStatus);
        });
    }


</script> 