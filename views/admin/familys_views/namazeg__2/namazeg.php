<style type="text/css">
    .btn-group > .btn, .btn-group > .btn + .btn, .btn-group > .btn:first-child, .fc .fc-button-group > * {
        height: 34px !important;
        border-radius: 4px !important;
        margin: 0 !important;
    }

    .bootstrap-select.btn-group .dropdown-toggle .caret {
        right: 92% !important;
    }

    .btn-label {
        left: 12px;
    }

    input, select {
        font-weight: 600 !important;
        color: #002c52 !important;
        font-size: 16px !important;
    }

    .top-label {
        font-size: 13px;
        background-color: #428bca !important;
        border: 2px solid #428bca !important;
        text-shadow: none !important;
        font-weight: 500 !important;
    }

    .myspan {
        color: rgb(255, 0, 0);
        font-size: 12px;
        position: absolute;
        bottom: -16px;
        right: 20px;
    }

    .no-padding {
        padding-left: 0px !important;
        padding-right: 0px !important;
    }

    .print_forma {
        padding: 15px;
    }

    .piece-box {
        margin-bottom: 12px;
        border: 1px solid #73b300;
        display: inline-block;
        width: 100%;
    }

    .piece-heading {
        background-color: #9bbb59;
        display: inline-block;
        float: right;
        width: 100%;
    }

    .piece-body {
        width: 100%;
        float: right;
    }

    .bordered-bottom {
        border-bottom: 4px solid #9bbb59;
    }

    .piece-footer {
        display: inline-block;
        float: right;
        width: 100%;
        border-top: 1px solid #73b300;
    }

    .piece-heading h5 {
        margin: 4px 0;
    }

    .piece-box table {
        margin-bottom: 0
    }

    .piece-box table th,
    .piece-box table td {
        padding: 2px 8px !important;
    }

    h6 {
        font-size: 16px;
        margin-bottom: 3px;
        margin-top: 3px;
    }

    .print_forma table th {
        text-align: right;
    }

    .print_forma table tr th {
        vertical-align: middle;
        font-size: 18px;
    }

    .no-padding {
        padding: 0;
    }

    .header p {
        margin: 0;
    }

    .header img {
        height: 120px;
        width: 100%
    }

    .main-title {
        display: table;
        text-align: center;
        position: relative;
        height: 120px;
        width: 100%;
    }

    .main-title h4 {
        display: table-cell;
        vertical-align: bottom;
        text-align: center;
        width: 100%;
    }

    .print_forma hr {
        border-top: 1px solid #73b300;
        margin-top: 7px;
        margin-bottom: 7px;
    }

    .no-border {
        border: 0 !important;
    }

    .gray_background {
        background-color: #eee;
    }

    @media print {
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    }

    .footer img {
        width: 100%;
        height: 120px;
    }

    @page {
        size: A4;
        margin: 20px 0 0;
    }

    .open_green {
        background-color: #e6eed5;
    }

    .closed_green {
        background-color: #cdddac !important;
    }

    .table-bordered > thead > tr > th,
    .table-bordered > tbody > tr > th,
    .table-bordered > tfoot > tr > th,
    .table-bordered > thead > tr > td,
    .table-bordered > tbody > tr > td,
    .table-bordered > tfoot > tr > td {
        border: 1px solid #abc572;
    }

    .btn-close-model,
    .btn-close-model:hover,
    .btn-close-model:focus {
        background-color: #8a9e5f;
        color: #fff;
        margin-top: -20px;
    }

    .my_style {
        color: #222;
        font-size: 15px;
        font-weight: 500;
    }

    .one_three {
        width: 43% !important;
        float: right;
    }

    .two_three {
        width: 57% !important;
        float: right;
    }

    @media (min-width: 992px) {
        .col_md_10 {
            width: 10%;
            float: right;
        }

        .col_md_15 {
            width: 15%;
            float: right;
        }

        .col_md_20 {
            width: 20%;
            float: right;
        }

        .col_md_25 {
            width: 25%;
            float: right;
        }

        .col_md_30 {
            width: 30%;
            float: right;
        }

        .col_md_35 {
            width: 35%;
            float: right;
        }

        .col_md_40 {
            width: 40%;
            float: right;
        }

        .col_md_45 {
            width: 45%;
            float: right;
        }

        .col_md_50 {
            width: 50%;
            float: right;
        }

        .col_md_60 {
            width: 60%;
            float: right;
        }

        .col_md_70 {
            width: 70%;
            float: right;
        }

        .col_md_75 {
            width: 75%;
            float: right;
        }

        .col_md_80 {
            width: 80%;
            float: right;
        }

        .col_md_85 {
            width: 85%;
            float: right;
        }

        .col_md_90 {
            width: 90%;
            float: right;
        }

        .col_md_95 {
            width: 95%;
            float: right;
        }

        .col_md_100 {
            width: 100%;
            float: right;
        }
    }

    .label_title_2 {
        width: 100%;
        color: #222;
        font-weight: 600;
        background-color: #fcb632;
        border: 2px solid #fcb632;
        height: 34px;
        margin: 0;
        line-height: 32px;
        padding-right: 0px;
        font-size: 16px;
        margin-bottom: 5px;
        border-radius: 10px;
        text-align: center;
    }

    .input_style_2 {
        border-radius: 0px;
        border-right: transparent;
        width: 100%;
    }

    .label-blue {
        background-color: #003665;
        border: 1px solid #003665;

        height: 34px;
        line-height: 25px !important;
        font-size: 13px !important;
        font-weight: 500 !important;
        text-align: right !important;
    }

    .bond-header {
        height: 55px;
        margin-bottom: 15px;
    }

    .bond-header .right-img img,
    .bond-header .left-img img {
        width: 100%;
        height: 55px;
    }

    .border-box {
        padding: 5px 20px;
        border: 5px double #000 !important;
        border-radius: 29px;
        font-size: 14px !important;
        color: #002c57 !important;
        font-weight: bold !important;
    }

    .border-box-h {
        padding: 3px 20px;
        border: 2px solid #222;
        border-radius: 24px;
    }

    .main-bond-title {
        display: table;
        height: 55px;
        text-align: center;
        width: 100%;
    }

    .main-bond-title h3 {
        display: table-cell;
        vertical-align: bottom;
        font-size: 12px;
    }

    .bond-body {
        padding: 10px;
        border: 2px solid #222;
        display: inline-block;
        width: 100%;
        border-radius: 30px;
        background: url(<?php echo base_url() ?>asisst/admin_asset/img/pills/back2.jpg);
        background-position: center;
        background-size: 50% 100%;
        background-repeat: no-repeat;
    }

    .bond-body h6 {
        font-size: 11px !important;
        color: #002c57 !important;
        font-weight: bold !important;
        line-height: 17px;
    }

    .bond-body h6 span {
        color: darkred;
    }

    .pad-2 {
        padding-left: 2px;
        padding-right: 2px;
    }

    .bond-footer h6 {
        font-size: 13px !important;
        color: #002c57 !important;
        font-weight: bold !important;
        line-height: 17px;
    }

    #cheq, #eda3, #shabka, #mosatadem {
        padding-top: 5px !important;
        padding-bottom: 5px !important;
    }

    .table_style {
        font-size: 11px !important;
        color: darkred !important;
        font-weight: bold !important;
        line-height: 17px !important;
        margin: 1px;
    }

    button[type=submit] {
        padding: 0px 12px;
    }

    .btn-label {
        right: -14px;
    }

    .list::-webkit-calendar-picker-indicator {
        display: none;
    }

    input[type=date]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        display: none;
    }

    input[type=date]::-webkit-clear-button {
        display: none;
        -webkit-appearance: none;
    }

    .tree ul {
        margin-right: 10px;
        position: relative;
        margin-left: 0;
    }

    .tree ul li {
        padding-left: 0;
    }

    .tree ul ul {
        margin-left: 0;
    }

    ul span {
        display: inline !important;
    }

    .fa-plus.sspan {
        background-color: #5b69bc;
        padding: 3px 6px;
        color: #fff;
        border-radius: 5px;
    }

    #colspan4 {
        text-align: right;
        color: red

    }

    .forTd {
        color: black !important;
        font-family: tahoma !important;
        font-size: 15px !important;
        font-weight: 700 !important;
    }

    .tb-table th, .tb-table td {
        padding: 4px !important;
    }

    .tb-table td .form-control {
        width: 100% !important;
    }
    /********************************************/



    /*********************************************/
    .classtd{
        background-color: orange !important;
    }

    td .fa-trash {
        border-radius: 7px !important;
    }
    .fa-plus.sspan {

        border-radius: 7px !important;
        font-size: 15px !important;
    }

    .allpad-12{
        padding: 20px 0 20px 0;
    }
    .fhelvetic{
        font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    }
    /*@page{
        margin: 20px 0px;
    }*/

    @page {
        size: A4;
        /*	margin: 180px 0 135px;*/
        margin: 60px 20px 200px 20px;
        border: none;

    }
    /***************************************************/
    .ahwal_style h5{

        font-weight: bold;

    }

    .ahwal_signs label{

        display: inline-block;
        max-width: 100%;
        margin-bottom: 5px;
        font-weight: bold !important;
        font-size: 24px !important;
    }

    .ahwal_signs h5{
        font-weight: bold;
        font-size: 24px !important;

    }

    .ahwal_signs {
        font-weight: bold;
        font-size: 20px !important;

    }



    .table-bordered>thead>tr>th,
    .table-bordered>tbody>tr>th,
    .table-bordered>tfoot>tr>th,
    .table-bordered>thead>tr>td,
    .table-bordered>tbody>tr>td,
    .table-bordered>tfoot>tr>td {
        border: 1px solid #000 !important;
    }

    .justify  {
        text-align: justify;
        text-justify: inter-word;
        line-height: 40px;


    }

    .justify_another{
        text-align: justify;
        text-justify: inter-word;
        line-height: 18px !important;
        margin: 0;
    }
    /*******************************************************************************************/
    .radio label, .checkbox label {

        font-size: 17px !important;
        font-weight: bold !important;

    }


    .final_table table>thead>tr>th,
    .table>tbody>tr>th,
    .table>tfoot>tr>th,
    .table>thead>tr>td,
    .table>tbody>tr>td,
    .table>tfoot>tr>td {

        padding: 4px !important;

    }
    .final_table_back_color{
        background-color: #cacaca !important;
        color: #000 !important;

    }
    table tbody td{
        background-color: #fff !important;
    }

    .input-write{
		
		border: 0;
		background-color: transparent;
		box-shadow: none;
	}

</style>


<div class="col-sm-12 no-padding">
    <div class="panel panel-bd lobidisable lobipanel lobipanel-sortable">
        <div class="panel-heading">
            <h3 class="panel-title"><?= $title ?></h3>
        </div>
        <div class="panel-body">
            <?php
            echo form_open_multipart('finance_accounting/box/quods/Quods/add_quods', array('id' => 'form1'));?>
            <div class="col-md-12 no-padding">
                <div class="col_md_25 col-sm-6 padding-4">
                    <div class="col-md-5 col-sm-6 no-padding">
                        <h6 class="label_title_2 ">التاريخ</h6>
                    </div>
                    <div class="col-md-7 col-sm-6 no-padding">
                        <input type="date" name="letter_date" class="form-control inputclass" value="<?php echo date('Y-m-d');?>" >
                    </div>
                </div>
                <div class="col_md_25 col-sm-6 padding-4">
                    <div class="col-md-5 col-sm-6 no-padding">
                        <h6 class="label_title_2 ">رقم الخطاب</h6>
                    </div>
                    <div class="col-md-7 col-sm-6 no-padding">
                        <input type="text" name="letter_rkm" class="form-control inputclass" value="11"  readonly>
                    </div>
                </div>
                <div class="col_md_25 col-sm-6 padding-4">
                    <div class="col-md-5 col-sm-6 no-padding">
                        <h6 class="label_title_2 ">الأسرة</h6>
                    </div>
                    <div class="col-md-7 col-sm-6 no-padding">
                        <input type="text" name="file_num" id="file_num"
                               onclick="$('#myModal').modal();load_table()"
                               class="form-control inputclass" value="" >
                        <input type="hidden" name="father_name" id="father_name" value="">
                        <input type="hidden" name="mother_national_num" id="mother_national_num" value="">
                        <input type="hidden" name="father_card" id="father_card" value="">
                    </div>
                </div>
                <div class="col_md_25 col-sm-6 padding-4">
                    <div class="col-md-5 col-sm-6 no-padding">
                        <h6 class="label_title_2 ">الخطاب</h6>
                    </div>
                    <div class="col-md-7 col-sm-6 no-padding">
                        <select name="letter_type_fk" id="letter_type_fk" class="form-control inputclass" data-validation="required"
                                aria-required="true">
                            <option value="">إختر</option>
                            <?php foreach ($letters_type_arr as $value) { ?>
                                <option value="<?php echo  $value->id; ?>"
                                ><?= $value->letter_name ?></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>


            <div class="col-xs-12 text-center">
                <button type="button" onclick="GetNamozegDiv($('#letter_type_fk').val())"
                        class="btn btn-labeled btn-success myBtnInsert" name="action" value="action">
                    <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>حفظ
                </button>
            </div>

                <div class="col-md-12 " id="Details"  ></div>

            <?php echo form_close() ?>
        </div>
    </div>
</div>
</div>


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document" style="width: 70%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">الأسرة</h4>
                </div>
                <div class="modal-body" id="json_table">

                </div>
                <div class="modal-footer" style="display: inline-block;width: 100%">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">إغلاق</button>
                </div>
            </div>
        </div>
    </div>






    <script>

        function load_table() {
            var html;
            html = '<div class="col-md-12"><table id="my_table" class="table table-striped table-bordered dt-responsive nowrap " >' +
                '<thead><tr><th style="width: 30px;">#</th><th style="width: 50px;"> رقم الملف </th><th style="width: 80px;"> إسم رب الأسرة </th><th style="width: 50px;" >رقم الهوية</th>' +
                '<th style="width: 80px;"> إسم الأم </th><th style="width: 50px;"> رقم الهوية </th></tr></thead><table><div id="dataMember"></div></div>';

            $("#json_table").html(html);
            $('#my_table').show();
            var oTable_usergroup = $('#my_table').DataTable({
                dom: 'Bfrtip',
                "ajax": '<?php echo base_url(); ?>family_controllers/Namazeg/getFamilyTable' ,

                aoColumns: [
                    {"bSortable": true},
                    {"bSortable": true},
                    {"bSortable": true},
                    {"bSortable": true},
                    {"bSortable": true},
                    {"bSortable": true}
                ],

                buttons: [
                    'pageLength',
                    'copy',
                    'excelHtml5',
                    {
                        extend: "pdfHtml5",
                        orientation: 'landscape'
                    },
                    {
                        extend: 'print',
                        exportOptions: {columns: ':visible'},
                        orientation: 'landscape'
                    },
                    'colvis'
                ],

                colReorder: true,
                destroy: true

            });

        }
    </script>


<script>
    
    
    function getFile_num(value) {
        $('#file_num').val(value);
         $('#father_name').val($('#radio' + value).attr('data-father'));
          $('#mother_national_num').val($('#radio' + value).attr('data-mother'));
          $('#mother_national_num').val($('#radio' + value).attr('data-mother'));
          $('#father_card').val($('#radio' + value).attr('data-father-card'));
        $('#myModal').modal('hide');
    }
    
</script>


<script>
    
    function GetNamozegDiv(value) {

        if (value != 0 && value != '') {
            var dataString = 'id=' + value;
            $.ajax({
                type: 'post',
                url: '<?php echo base_url() ?>family_controllers/Namazeg/getNamozegDetails',
                data: dataString,
                dataType: 'html',
                cache: false,
                success: function(html){
                    $("#Details").html(html);


                    /*someString = $('.content_view').text();
                    $('.content_view').text( someString.replace(new RegExp("X", 'g'), $('#father_name').val()));
                    $('.content_view').text( someString.replace(new RegExp("B", 'g'), $('#father_card').val()));
                    $('.content_view').text( someString.replace(new RegExp("V", 'g'), $('#file_num').val()));
*/

                   function replaceMulti(haystack, needle, replacement)
                    {
                        return haystack.split(needle).join(replacement);
                    }

                    someString = $('.content_view').text();
                  //  console.log(replaceMulti(someString, 'أبنـاء', 'dog'));
                    $('.content_view').text(replaceMulti($('.content_view').text(), 'X', $('#father_name').val()));
                    $('.content_view').text(replaceMulti($('.content_view').text(), 'B', $('#file_num').val()));
                $('.content_view').text( replaceMulti($('.content_view').text(), 'C', $('#father_card').val()));




                   // var regex = /X/g;
                    //var title = "aywa" ;
                    //alert(title);
                 //   str.replace(regex, 'gggg')
//alert($('#father_name').val());


                    //$('#mother_national_num').val($('#radio' + value).attr('data-mother'));
                }
            });
        }
        
    }
    
</script>