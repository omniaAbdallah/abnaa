<?phpclass Matgr_card extends MY_Controller{	public function __construct()	{        parent::__construct();        $this->load->library('pagination');        if ($this->session->userdata('is_logged_in') == 0) {            redirect('login');        }        $this->load->helper(array('url', 'text', 'permission', 'form'));        $this->load->model('Difined_model');        $this->load->model('system_management/Groups');        $this->main_groups = $this->Groups->main_fetch_group();        $this->groups = $this->Groups->get_group($_SESSION["group_number"]);        $this->groups_title = $this->Groups->get_group_title($_SESSION["group_number"]);        /**********************************************************/        $this->load->model('familys_models/for_dash/Counting');        $this->count_basic_in = $this->Counting->get_basic_in_num();        $this->files_basic_in = $this->Counting->get_files_basic_in();        /*************************************************************/        $this->load->model('all_Finance_resource_models/settings/Matgr_card_model');	}	private  function test($data=array()){		echo "<pre>";		print_r($data);		echo "</pre>";		die;	}	private  function message($type,$text){		if($type =='success') {			return $this->session->set_flashdata('message','<div class="alert alert-success alert-dismissable">                                                              <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>                                                              <strong>تم بنجاح!</strong> '.$text.'.                                                               </div>');		}elseif($type=='wiring'){			return $this->session->set_flashdata('message','<div class="alert alert-warning alert-dismissable">                                                              <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>                                                              <strong>تحزير!</strong> '.$text.'.                                                               </div>');		}elseif($type=='error'){			return  $this->session->set_flashdata('message', '<div class="alert alert-danger alert-dismissable">                                                              <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>                                                              <strong>خطأ!</strong> '.$text.'.                                                               </div>');		}	}    public function addCard(){ // all_Finance_resource/settings/Matgr_card/addCard        if($this->input->post('save')) {            $this->Matgr_card_model->insert();            echo 1;            return;            //$this->message('success', ' تم الاضافه بنجاح');            //redirect('follow/addFollow', 'refresh');        }else{            $data['title'] = 'إعدادات البطاقات الإلكترونية';            $data['subview'] = 'admin/all_Finance_resource_views/settings/Matgr_card_view/add_card';            $this->load->view('admin_index', $data);        }    }    public function load_cards(){/* all_Finance_resource/settings/Matgr_card/load_cards */        $data['cards'] = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("ttype"=>1));        $this->load->view('admin/all_Finance_resource_views/settings/Matgr_card_view/load_cards', $data);    }    public function delete_card(){        $id = $this->input->post('id');        $this->Matgr_card_model->delete($id);        echo 1;        return;    }    public function load_pageresults(){        $data['cards'] = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("ttype"=>1));        $data['follow_results'] = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("ttype"=>2));        $data['banks'] =$this->Matgr_card_model->fetch_banks();        $this->load->view('admin/all_Finance_resource_views/settings/Matgr_card_view/load_pageresult_card', $data);    }    public function add_bank_accounts() {   //  all_Finance_resource/settings/Matgr_card/add_bank_accounts        $bank_id=$this->input->post('bank_id');        $data['accounts'] =$this->Matgr_card_model->fetch_bank_accounts($bank_id);        $this->load->view('admin/all_Finance_resource_views/settings/devices_points/get_bank_accounts',$data);    }    public function get_accounts_nums() {   //  all_Finance_resource/settings/Matgr_card/get_accounts_nums        $bank_id=$this->input->post('bank_id');        $account_id=$this->input->post('account_id');        $data['accounts'] =$this->Matgr_card_model->get_accounts_nums($bank_id,$account_id);        $this->load->view('admin/all_Finance_resource_views/settings/devices_points/get_accounts_nums',$data);    }    public function getAccountName($id)    {        return $this->db->get_where('society_main_banks_account', array('id'=>$id))->row_array();    }    public function load_results(){        $cards = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("ttype"=>1));if(isset($cards) and $cards != null ){      $allcards= array();        foreach($cards as $q){            $allcards[$q->id] = $q->title;             }        $data['allcards'] = $allcards; }     //        $data['results_card'] = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("ttype"=>2));        $data['results_card'] = $this->Matgr_card_model->fetch_results_card();        $this->load->view('admin/all_Finance_resource_views/settings/Matgr_card_view/load_results_card', $data);    }    public function load_details(){        $card_id_fk = $this->input->post('row_id');        $data['card_title'] = $this->Matgr_card_model->get_by('fr_matgr_card_type',array("id"=>$card_id_fk),'title');        $data['results_card'] = $this->Matgr_card_model->fetch_results_card($card_id_fk);//        $data['question'] = $this->Matgr_card_model->select_follow_questionID($row_id)['title'];        $this->load->view('admin/all_Finance_resource_views/settings/Matgr_card_view/load_details', $data);    }}//END CLASS