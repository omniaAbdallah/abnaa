<?phpclass Maham extends MY_Controller{    public function __construct()    {        parent::__construct();        $this->load->library('pagination');        if ($this->session->userdata('is_logged_in') == 0) {            redirect('login');        }        $this->load->helper(array('url', 'text', 'permission', 'form'));        $this->load->model('maham_mowazf_model/basic_data/Basic_data_model');        $this->load->model('human_resources_model/Finance_employee_model');        $this->load->model('human_resources_model/Employee_model');    }    public function hr_data()    { //maham_mowazf/basic_data/Maham/hr_data        /*echo "<pre>";      print_r($_SESSION);*/        $emp_id = $_SESSION['emp_code'];        //----------------- basic_data        $data["basic_data"] = $this->Employee_model->get_emp_basic_data($emp_id);        //----------------- job_data//        $data["job_data"] = $this->Employee_model->get_emp_job_data($emp_id);        $this->load->model('all_secretary_models/archive_m/notes/Notes_model');        $data['notes'] = $this->Notes_model->get_events();        //YARA10-8-2020        $data['agaza_sanwya'] = $this->Basic_data_model->get_by_options('hr_all_agzat_orders', array('no3_agaza' => 2, 'emp_id_fk' => $emp_id), 'num_days');        // $this->test( $data['agaza_sanwya']);        $data['agaza_important'] = $this->Basic_data_model->get_by_options('hr_all_agzat_orders', array('no3_agaza' => 1, 'emp_id_fk' => $emp_id), 'num_days');        $data['agaza_short'] = $this->Basic_data_model->get_by_options('hr_all_agzat_orders', array('no3_agaza' => 3, 'emp_id_fk' => $emp_id), 'num_days');        $data['agaza_tall'] = $this->Basic_data_model->get_by_options('hr_all_agzat_orders', array('no3_agaza' => 4, 'emp_id_fk' => $emp_id), 'num_days');        if (!empty($data['agaza_sanwya'])) {            $data['agaza_sanwya_days'] = $this->Basic_data_model->get_by_options('holiday_setting', array('id' => $data['agaza_sanwya']), 'num_days');        }        if (!empty($data['agaza_important'])) {            $data['agaza_important_days'] = $this->Basic_data_model->get_by_options('holiday_setting', array('id' => $data['agaza_important']), 'num_days');        }        if (!empty($data['agaza_short'])) {            $data['agaza_short_days'] = $this->Basic_data_model->get_by_options('holiday_setting', array('id' => $data['agaza_short']), 'num_days');        }        if (!empty($data['agaza_tall'])) {            $data['agaza_tall_days'] = $this->Basic_data_model->get_by_options('holiday_setting', array('id' => $data['agaza_tall']), 'num_days');        }        //YARA10-8-2020        $data['emp_tataw3'] = $this->Basic_data_model->get_emp_tataw3();        $data['title'] = 'الرئيسية';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/pprofile_view';        $this->load->view('admin_index', $data);    }    /*19-8-20-om*/    public function ratb()    { //maham_mowazf/basic_data/Maham/ratb        $empCode = $_SESSION['emp_code'];        $data["personal_data"] = $this->Employee_model->get_one_employee($empCode);        $data['allData'] = $this->Finance_employee_model->getAllData_n($empCode)[0];        //  $this->test($data['allData']);        $data['employee'] = $this->Finance_employee_model->getEmpData($empCode);        $data['badalat'] = $this->Finance_employee_model->getBadalat(1);        $data['discounts'] = $this->Finance_employee_model->getBadalat(2);        $month_n = date('m');       $data['all_mosayer_data'] = $this->Finance_employee_model->get_all_mosayer_details_for_emp($empCode,$month_n);                  $data['month_n']= date('m');                $data['title'] = 'بيان مفردات راتب شهر ';        $data['subview'] = 'admin/maham_mowazf_view/ratb_data/ratb_view';        $this->load->view('admin_index', $data);    }         public function tafselratb(){          $empCode = $_SESSION['emp_code'];                      $data['employee'] = $this->Finance_employee_model->getEmpData($empCode);       $data['all_mosayer_data'] = $this->Finance_employee_model->get_all_mosayer_details_for_emp($empCode);               $data['title'] = '';              $data['subview'] = 'admin/maham_mowazf_view/ratb_data/tafselratb_view';              $this->load->view('admin_index', $data);               }    public function print_card()    {        $empCode = $_SESSION['emp_code'];        $data["personal_data"] = $this->Employee_model->get_one_employee($empCode);        $data['allData'] = $this->Finance_employee_model->getAllData_n($empCode)[0];        $data['employee'] = $this->Finance_employee_model->getEmpData($empCode);        $data['badalat'] = $this->Finance_employee_model->getBadalat(1);        $data['discounts'] = $this->Finance_employee_model->getBadalat(2);        $this->load->view('admin/maham_mowazf_view/ratb_data/print_new', $data);    }   public function all_solaf()    { //maham_mowazf/basic_data/Maham/all_solaf        $this->load->model('human_resources_model/employee_forms/solaf/Solaf_requests_model');$empCode = $_SESSION['emp_code'];$real_emp_ccode = $this->Solaf_requests_model->getemp_code($empCode);   //$data['items'] = $this->Solaf_requests_model->get_all_solfa_cond($empCode);    $data['items'] = $this->Solaf_requests_model->get_all_solfa_new_emps($empCode);           $data['quests'] = $this->Solaf_requests_model->get_all_aksat($real_emp_ccode);              $data['title'] = 'بيان السلف';        $data['subview'] = 'admin/maham_mowazf_view/ratb_data/all_solaf_v';        $this->load->view('admin_index', $data);    }    public function read_file_report($file_name)    {        $this->load->helper('file');        $file_path = 'uploads/files/' . $file_name;        header('Content-Type: application/pdf');        header('Content-Discription:inline; filename="' . $file_name . '"');        header('Content-Disposition: filename="' . $file_name . '"');        //header('Content-Discription:inline; filename="'.$name.'"');        header('Content-Transfer-Encoding: binary');        header('Accept-Ranges:bytes');        header('Content-Length: ' . filesize($file_path));        readfile($file_path);    }    //yara_newwww_funcc    public function downloads($file)    {        $this->load->helper('download');        $name = $file;        $data = file_get_contents('./uploads/files/' . $file);        force_download($name, $data);    }    public function downloads_maham($file)    {        $this->load->helper('download');        $name = $file;        $data = file_get_contents('./uploads/human_resources/job_title/' . $file);        force_download($name, $data);    }    public function read_file_maham($file_name)    {        $this->load->helper('file');        $file_path = 'uploads/human_resources/job_title/' . $file_name;        header('Content-Type: application/pdf');        header('Content-Discription:inline; filename="' . $file_name . '"');        header('Content-Transfer-Encoding: binary');        header('Accept-Ranges:bytes');        header('Content-Length: ' . filesize($file_path));        readfile($file_path);    }    public function edit_emp()//maham_mowazf/basic_data/Maham/edit_emp    {        $this->load->model('Difined_model');        $this->load->model('human_resources_model/Employee_model');        $code = $_SESSION['emp_code'];        $data["current_hijry_year"] = $this->current_hjri_year();        $data['gender_data'] = $this->Difined_model->select_search_key('employees_settings', 'type', '1');        $data['deyana'] = $this->Difined_model->select_search_key('employees_settings', 'type', '3');        $data['type_card'] = $this->Difined_model->select_search_key('employees_settings', 'type', '5');        $data['emp'] = $this->Difined_model->select_search_key('employees', 'id', $code)[0];        // $this->test($data['emp']->emp_code );        if (isset($data['emp']) and $data['emp'] != null) {            $emp_code = $data['emp']->emp_code;            $data['city_name'] = $this->Employee_model->get_city_name($data['emp']->city_id_fk);            $data['hai_name'] = $this->Employee_model->get_city_name($data['emp']->hai_id_fk);            $data['nationality_name'] = $this->Employee_model->get_nationality_name($data['emp']->nationality);            $data['dest_card_name'] = $this->Employee_model->get_dest_card_name($data['emp']->dest_card);            $data['status_name'] = $this->Employee_model->get_status_name($data['emp']->status);            $emp_id = $data['emp']->id;            $data["personal_data"] = $this->Employee_model->get_one_employee($emp_id);        }        $data['title'] = "البيانات الأساسية ";        if ($this->input->post('add')) {            $img = 'img';            $img_file = $this->upload_image_2($img, 'human_resources/emp_photo');            $this->Employee_model->edit_emp($emp_code, $img_file);            redirect('maham_mowazf/basic_data/Maham/edit_emp', 'refresh');        }        $data['subview'] = 'admin/maham_mowazf_view/basic_data/add_employee';        $this->load->view('admin_index', $data);    }    private function current_hjri_year()    {        $time = mktime(0, 0, 0, Date('m'), Date('j'), Date('Y'));        $TDays = round($time / (60 * 60 * 24));        $HYear = round($TDays / 354.37419);        $Remain = $TDays - ($HYear * 354.37419);        $HMonths = round($Remain / 29.531182);        $HDays = $Remain - ($HMonths * 29.531182);        $HYear = $HYear + 1389;        $HMonths = $HMonths + 10;        $HDays = $HDays + 23;        if ($HDays > 29.531188 and round($HDays) != 30) {            $HMonths = $HMonths + 1;            $HDays = Round($HDays - 29.531182);        } else {            $HDays = Round($HDays);        }        if ($HMonths > 12) {            $HMonths = $HMonths - 12;            $HYear = $HYear + 1;        }        $NowDay = $HDays;        $NowMonth = $HMonths;        $NowYear = $HYear;        $MDay_Num = date("w");        if ($MDay_Num == "0") {            $MDay_Name = "الأحد";        } elseif ($MDay_Num == "1") {            $MDay_Name = "الإثنين";        } elseif ($MDay_Num == "2") {            $MDay_Name = "الثلاثاء";        } elseif ($MDay_Num == "3") {            $MDay_Name = "الأربعاء";        } elseif ($MDay_Num == "4") {            $MDay_Name = "الخميس";        } elseif ($MDay_Num == "5") {            $MDay_Name = "الجمعة";        } elseif ($MDay_Num == "6") {            $MDay_Name = "السبت";        }        $NowDayName = $MDay_Name;        $NowDate = $MDay_Name . "، " . $HDays . "/" . $HMonths . "/" . $HYear . " هـ";        return $HYear;    }   /* private function upload_image_2($file_name, $folder = '')    {        if (!empty($folder)) {            $config['upload_path'] = 'uploads/' . $folder;        } else {            $config['upload_path'] = 'uploads/files';        }        $config['allowed_types'] = 'gif|Gif|ico|ICO|jpg|JPG|jpeg|JPEG|BNG|png|PNG|bmp|BMP|WMV|wmv|MP3|mp3|FLV|flv|SWF|swf';        $config['max_size'] = '1024*8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888';        $config['encrypt_name'] = true;        $this->load->library('upload', $config);        if (!$this->upload->do_upload($file_name)) {            return false;        } else {            $datafile = $this->upload->data();            $this->thumb($datafile, $folder);            return $datafile['file_name'];        }    }*/function edit_profile(){    $data["user_data"] = $this->Basic_data_model->get_user_data($_SESSION['user_id']);    $emp_id = $_SESSION['emp_code'];    $data["basic_data"] = $this->Employee_model->get_emp_basic_data($emp_id);    if ($this->input->post('add')) {        $img = 'emp_photo';        $img_file = $this->upload_image_2($img, 'human_resources/emp_photo');        $emp_sign = 'emp_sign';        $emp_sign_file = $this->upload_image_2($emp_sign, 'human_resources/emp_sign');        $this->Basic_data_model->edit_profile($emp_sign_file, $img_file);        redirect('maham_mowazf/basic_data/Maham/edit_profile', 'refresh');    }    $data['title'] = 'تعديل البروفيل';    $data['subview'] = 'admin/maham_mowazf_view/basic_data/edit_profile_view';    $this->load->view('admin_index', $data);}private function thumb($data, $folder = ''){    $config['image_library'] = 'gd2';    $config['source_image'] = $data['full_path'];    if (!empty($folder)) {        $config['new_image'] = 'uploads/' . $folder . '/thumbs/' . $data['file_name'];    } else {        $config['new_image'] = 'uploads/thumbs/' . $data['file_name'];    }    $config['create_thumb'] = TRUE;    $config['maintain_ratio'] = TRUE;    $config['thumb_marker'] = '';    $config['width'] = 275;    $config['height'] = 250;    $this->load->library('image_lib', $config);    $this->image_lib->initialize($config);    $this->image_lib->resize();}//reblaceprivate function upload_image_2($file_name, $folder = ''){    if (!empty($folder)) {        $config['upload_path'] = 'uploads/' . $folder;    } else {        $config['upload_path'] = 'uploads/files';    }    $config['allowed_types'] = 'gif|Gif|ico|ICO|jpg|JPG|jpeg|JPEG|BNG|png|PNG|bmp|BMP|WMV|wmv|MP3|mp3|FLV|flv|SWF|swf';    $config['max_size'] = '1024*8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888';    $config['encrypt_name'] = true;    $this->load->library('upload', $config);    $this->upload->initialize($config);/*15-9-20-om*/    if (!$this->upload->do_upload($file_name)) {        return false;    } else {        $datafile = $this->upload->data();        $this->thumb($datafile, $folder);        return $datafile['file_name'];    }}    public function add_job_data()    {////maham_mowazf/basic_data/Maham/add_job_data        $this->load->model('Difined_model');        $code = $_SESSION['emp_code'];        $this->load->model('human_resources_model/Employee_model');        $this->load->model('administrative_affairs_models/Prog_main_sitting_mo');        if ($this->input->post('manage')) {            $this->Employee_model->insert_manage_emp($code);            redirect('maham_mowazf/basic_data/Maham/add_job_data', 'refresh');        }        $data["personal_data"] = $this->Employee_model->get_one_employee($code);        $data['emp'] = $this->Difined_model->select_search_key('employees', 'id', $code)[0];        $data['admin'] = $this->Employee_model->select_data();        $data['department_branch'] = $this->Employee_model->select_branch_department();        $data['all_emps'] = $this->Difined_model->select_all('employees', '', '', 'id', 'desc');        $data["direct_all_emps"] = $this->Employee_model->get_direct_manger($data["emp"]->administration);        $data["manger_data"] = $this->Employee_model->get_empolyee($data["emp"]->manger);        $data['deyana'] = $this->Difined_model->select_search_key('employees_settings', 'type', '3');        $data['type_card'] = $this->Difined_model->select_search_key('employees_settings', 'type', '5');        $data['dest_card'] = $this->Difined_model->select_search_key('employees_settings', 'type', '6');        $data['cat_tamin'] = $this->Difined_model->select_search_key('employees_settings', 'type', '8');        $data['job_role'] = $this->Difined_model->select_search_key('all_defined_setting', 'defined_type', '4');        $data['manager_category'] = $this->Employee_model->get_manager_cat();        if (isset($data['emp']->reason) and $data['emp']->reason != null) {            $data['reason_name'] = $this->Employee_model->get_reason_name($data['emp']->reason);        }        if (isset($data['emp']->employee_qualification) and $data['emp']->employee_qualification != null) {            $data['qualification_name'] = $this->Employee_model->get_qualification_name($data['emp']->employee_qualification);        } else {            $data['qualification_name'] = '';        }        if (isset($data['emp']->employee_degree) and $data['emp']->employee_degree != null) {            $data['employee_degree_name'] = $this->Employee_model->get_employee_degree_name($data['emp']->employee_degree);        } else {            $data['employee_degree_name'] = '';        }        if (isset($data['emp']->work_maktb) and $data['emp']->work_maktb != null) {            $data['work_maktb_name'] = $this->Employee_model->get_work_maktb_name($data['emp']->work_maktb);        } else {            $data['work_maktb_name'] = '';        }        if (isset($data['emp']->tamin_company) and $data['emp']->tamin_company != null) {            $data['tamin_company_name'] = $this->Employee_model->get_work_maktb_name($data['emp']->tamin_company);        } else {            $data['tamin_company_name'] = '';        }        if (!empty($data['emp'])) {            $data['job_data'] = $this->Employee_model->get_job_data(array('administrative_structure_id_fk' => $data['emp']->qsm_id));        } else {            $data['job_data'] = $this->Employee_model->get_job_data();        }        //$data['departs'] = $this->Employee_model->select_depart();        $data['departs'] = $this->Difined_model->select_all('hr_administrative_structure', '', '', 'code', 'ASC');        $data['title'] = " البيانات الوظيفيه";        $data['subview'] = 'admin/maham_mowazf_view/basic_data/job_data';        $this->load->view('admin_index', $data);    }    public function financeEmployee()    { ////maham_mowazf/basic_data/Maham/financeEmployee        $this->load->model('Difined_model');        $this->load->model('human_resources_model/Employee_model');        $empCode = $_SESSION['emp_code'];        $data["personal_data"] = $this->Employee_model->get_one_employee($empCode);        $data['allData'] = $this->Finance_employee_model->getAllData($empCode)[0];        $data['badalat'] = $this->Finance_employee_model->getBadalat(1);        $data['discounts'] = $this->Finance_employee_model->getBadalat(2);        $data['bdalat_id'] = $this->Finance_employee_model->getBadalat_id(1);        $data['employee'] = $this->Finance_employee_model->getEmpData($empCode);        $data['banks'] = $this->Finance_employee_model->getBanks();        $data['markz'] = $this->Difined_model->select_search_key('employees_settings', 'type', '17');        //yaraa 26-7-2020        $ids = $this->Finance_employee_model->getBadalat_id_by_emp(1, $empCode);        $id_disc = $this->Finance_employee_model->getBadalat_id_by_emp(2, $empCode);        $data['records_have'] = $this->Finance_employee_model->get_all_badalat(1, $ids);        $data['records_disc'] = $this->Finance_employee_model->get_all_badalat(2, $id_disc);//   print_r($data['records_have']);        //yaraa26-7-2020        $data['cuts_id'] = $this->Finance_employee_model->getBadalat_id(2);        $data['title'] = 'البيانات المالية للموظف';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/finance_employee';        $this->load->view('admin_index', $data);    }    public function contractEmployee() //maham_mowazf/basic_data/Maham/contractEmployee    {        $empCode = $_SESSION['emp_code'];        $this->load->model('Difined_model');        $this->load->model('human_resources_model/Contract_employee_model');        if ($this->input->post('add')) {            $this->Contract_employee_model->insert();            $this->message('success', 'إضافة بيانات التعاقد بنجاح');            redirect("admin/maham_mowazf_view/basic_data/contractEmployee/" . $empCode . "");        }        $data["personal_data"] = $this->Employee_model->get_one_employee($empCode);        $data["emp_salary"] = $this->Contract_employee_model->get_emp_salary($empCode);        $data['all_links'] = $this->cheek_link($data["personal_data"][0]->emp_code);        $data['all_field'] = $this->Difined_model->get_field('contract_employe');        $data['employee_data'] = $this->Contract_employee_model->get_emp_data($empCode);        $data['check_finance_data'] = $this->Contract_employee_model->check_finance_data($empCode);        // $this->test($data['check_finance_data']);        $data['banks_data'] = $this->Contract_employee_model->get_banks_data($empCode);        $data["tickets"] = $this->Difined_model->select_search_key('employees_settings', 'type', 13);        $data["contract_nature"] = $this->Difined_model->select_search_key('employees_settings', 'type', 10);        $data["job_types"] = $this->Difined_model->select_search_key('hr_forms_settings', 'type', 2);        $data['emp'] = $this->Difined_model->select_search_key('contract_employe', 'id', $empCode)[0];        if (isset($data['emp']->travel_type_fk) and $data['emp']->travel_type_fk != null) {            $data['travel_type_name'] = $this->Employee_model->get_status_name($data['emp']->travel_type_fk);        }        /*21-7-om-strat*/        $data['holiday_year'] = $this->Difined_model->select_search_key('holiday_setting', 'id', 2);        if (!empty($data['holiday_year'])) {            $data['holiday_year'] = $data['holiday_year'][0];        }        $data['casual_vacation'] = $this->Difined_model->select_search_key('holiday_setting', 'id', 1);        if (!empty($data['casual_vacation'])) {            $data['casual_vacation'] = $data['casual_vacation'][0];        }        /*21-7-om end*/        $data['title'] = 'بيانات التعاقد ';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/contractEmployee';        $this->load->view('admin_index', $data);    }    private function cheek_link($last_id)    {        $this->load->model('Difined_model');        $key = $last_id;        $arr_in = array("emp_code" => $key);        $cheek_value["contract_employe"] = $this->Difined_model->getByArray("contract_employe", $arr_in);        $cheek_value["emp_files"] = $this->Difined_model->getByArray("emp_files", $arr_in);        return $cheek_value;    }    public function add_dwam() // maham_mowazf/basic_data/Maham/add_dwam/    {        $this->load->model('Difined_model');        $this->load->model('human_resources_model/dwam_m/Dwam_model');        $emp_id = $_SESSION['emp_code'];        $data["last_period_id_fk"] = $this->Dwam_model->get_last_period_id_fk($emp_id);        $data["personal_data"] = $this->Dwam_model->get_one_employee($emp_id);        $data['all_links'] = $this->cheek_link_all($data["personal_data"][0]->emp_code);        $data['all_field'] = $this->Dwam_model->get_field('hr_emp_dwam_details');        $data['employee_data'] = $this->Dwam_model->get_emp_data($emp_id);        $data['always_setting_data'] = $this->Dwam_model->get_always_setting();        $data["printer_machine"] = $this->Dwam_model->select_search_key('employees_settings', 'type', 11);        $data['title'] = 'بيانات الدوام';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/dwam_added';        $this->load->view('admin_index', $data);    }    public function cheek_link_all($last_id)    {        $key = $last_id;        $arr_in = array("emp_code" => $key);        $cheek_value["printer_machin"] = $this->Dwam_model->getByArray("hr_emp_dwam_details", $arr_in);        return $cheek_value;    }    public function dwam_table($emp_id)    {        $this->load->model('human_resources_model/dwam_m/Dwam_model');        $data["my_always"] = $this->Dwam_model->get_my_dwam($emp_id);        $this->load->view('admin/maham_mowazf_view/basic_data/dwam_table', $data);    }    public function employee_files()    { // maham_mowazf/basic_data/Maham/employee_files        $this->load->model('Difined_model');        $this->load->model('human_resources_model/Files_employee_model');        $emp_id = $_SESSION['emp_code'];        $data["personal_data"] = $this->Employee_model->get_one_employee($emp_id);        $data['files_names'] = $this->Difined_model->select_search_key("employees_settings", 'type', 16);        $data['employee'] = $this->Files_employee_model->getEmpData($emp_id);        $data['title'] = 'بيانات المستندات والبطاقات والمهارات';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/employee_files';        $this->load->view('admin_index', $data);    }    public function employee_files_table($emp_id)    {        $this->load->model('human_resources_model/Files_employee_model');        $data['allData'] = $this->Files_employee_model->getAllData($emp_id);        $this->load->view('admin/maham_mowazf_view/basic_data/employee_files_table', $data);    }    public function custody()    {     // maham_mowazf/basic_data/Maham/custody        $this->load->model('human_resources_model/Custody_employee_model');        $this->load->model('human_resources_model/Custody_devices_model');        $empCode = $_SESSION['emp_code'];        $data["personal_data"] = $this->Employee_model->get_one_employee($empCode);        $data['allData'] = $this->Custody_employee_model->getAllData($empCode);        /*******************new***************/        $data['all_Data_tansfer'] = $this->Custody_employee_model->getAllData_t($empCode);        $data['all_Data_tansfered'] = $this->Custody_employee_model->getAllData_transfer($empCode);        /*******************new***************/        $data['employee'] = $this->Custody_employee_model->getEmpData($empCode);        $data['all_employee'] = $this->Custody_employee_model->getEmpData_exp($empCode);        $data['names'] = $this->Custody_devices_model->select_Name();        $data['max_value'] = $this->Custody_devices_model->select_Max_value();        $data['custody'] = $this->Custody_devices_model->select_all_();        $data['title'] = 'بيانات العهد';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/custody_added';        $this->load->view('admin_index', $data);    }    public function getDetailsDiv()    {        $emp_id = $_SESSION['emp_code'];        $data["job_data"] = $this->Employee_model->get_emp_job_data($emp_id);        ///yaraaaa_start        $data['system'] = $this->Basic_data_model->get_by_options_new('pr_system', array('type' => 1));        $data['sysa'] = $this->Basic_data_model->get_by_options_new('pr_system', array('type' => 2));        if (!empty($data["job_data"]->degree_id)) {            $data['mahma_wazefya'] = $this->Basic_data_model->get_by_options('hr_egraat_setting_details', array('status' => 1, 'job_title_id_fk' => $data["job_data"]->degree_id));        }//yraraaaaa_end        $this->load->view('admin/maham_mowazf_view/basic_data/getDetailsDiv', $data);    }    public function chat()    {        $this->load->model(['maham_mowazf_model/chating/ChatModel', 'maham_mowazf_model/chating/OuthModel', 'maham_mowazf_model/chating/UserModel']);        $data['strTitle'] = '';        $data['strsubTitle'] = '';        $list = [];        $list = $this->UserModel->ClientsListCs();        $data['strTitle'] = 'المستخدمين المتصلين';        $data['strsubTitle'] = 'مستخدم';        $data['chatTitle'] = ' اختر مستخدم للتواصل';        $vendorslist = [];        foreach ($list as $u) {            $vendorslist[] =                [                    'user_id' => $this->OuthModel->Encryptor('encrypt', $u['user_id']),                    'user_id_notifiy' => $u['user_id'],                    'online' => $u['online'],                    'user_name' => $this->UserModel->NameById($u['user_id']),                    'picture_url' => $this->UserModel->PictureUrlById($u['user_id']),                ];        }        $data['vendorslist'] = $vendorslist;        // $this->load->view('admin/maham_mowazf_view/chating/construction_services/chat_template',$data);        $data['subview'] = 'admin/maham_mowazf_view/chating/construction_services/chat_template';        $this->load->view('admin_index', $data);    }    /*9-8-20-om*/    function calendar()    {        $this->load->model('all_secretary_models/archive_m/notes/Notes_model');        $data['notes'] = $this->Notes_model->get_events();        $data['title'] = 'الأجندة';        $data['subview'] = 'admin/maham_mowazf_view/basic_data/calendar';        $this->load->view('admin_index', $data);    }    private function test($data = array())    {        echo "<pre>";        print_r($data);        echo "</pre>";        die;    }}?>